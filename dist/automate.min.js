!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.automate=e():t.automate=e()}(window,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}n.r(e);var i=!0,o=Object.prototype.toString,u=Object.getPrototypeOf;function a(t,e,n){if(k(t)){for(var r=0;r<t.length;r++)if(e(t[r],r))return}else if(w(t))for(var i in t)if((n||t.hasOwnProperty(i))&&e(t[i],i))return}function s(t,e){if(k(t)){for(var n=0;n<t.length;n++)if(e(n,t[n]))return!0}else{if(!w(t))return!1;for(var r in t)if(t.hasOwnProperty(r)&&e(r,t[r]))return!0}}function c(){var t,e=!1,n=0,r=arguments[n];if(_(r)&&(e=r,n++,r=arguments[n]),arguments.length>n+1&&(t=arguments[n+1]),k(r)){var i=[];return r.forEach((function(n,o){(null==t||t(r,o,n))&&i.push(e?c(e,n):n)})),i}if(w(r)){var o=y(r);return a(r,(function(n,i){(null==t||t(r,i,n))&&(o[i]=e?c(e,n):n)})),o}return r}function l(){var t=!1,e=0,n=arguments[e];_(n)&&(t=n,n=arguments[++e]),t?Array.prototype.slice.call(arguments,e+1).forEach((function(t){p(n,t)})):Array.prototype.slice.call(arguments,e+1).forEach((function(t){h(n,t)}))}function f(){var t=!1,e=0,n={};return _(arguments[e])&&(t=arguments[e],e++),t?Array.prototype.slice.call(arguments,e).forEach((function(t){p(n,t)})):Array.prototype.slice.call(arguments,e).forEach((function(t){h(n,t)})),n}function h(t,e){a(e,(function(e,n){t[n]=e}))}function p(t,e){a(e,(function(e,n){null==t[n]?t[n]=e:w(t[n])&&w(e)?p(t[n],e):t[n]=e}))}function y(t){function e(){}return e.prototype=t,new e}function d(t,e){!function(t,e){var n=y(e.prototype);n.constructor=t,t.prototype=n}(t,e),t.super=function(){e.apply(this,arguments)}}function v(t){return O(t)?t.toLowerCase():t}function b(t){return O(t)?t.toUpperCase():t}function m(t){return void 0===t}function g(t){return void 0!==t}function k(t){return t instanceof Array}function w(t){return null!==t&&"object"===r(t)}function x(t){return null!==t&&"object"===r(t)&&!u(t)}function O(t){return"string"==typeof t}function E(t){return"number"==typeof t}function S(t){return"[object Date]"===o.call(t)}function C(t){return"function"==typeof t}function j(t){return"[object RegExp]"===o.call(t)}function _(t){return"boolean"==typeof t}function $(t){return"undefined"!=typeof FormData&&t instanceof FormData}function P(t,e){var n=t===e;return n||(k(t)&&k(e)?t.length===e.length&&(n=!s(t,(function(t,n){return!P(n,e[t])}))):w(t)&&w(e)&&u(t)===u(e)&&(n=!s(t,(function(t,n){return!P(n,e[t])})))),n}function N(t){return!w(t)||!s(t,(function(){return!0}))}function T(t){i&&console.log(t)}function A(t,e){return t.some((function(t){return t===e}))}function I(t,e,n){return t.some((function(t){return t===e||n&&v(t)===v(e)}))}function L(t,e,n){if(!t)return!1;for(var r,i=!0,o=e.split("."),u=t;i&&o.length>0;)r=o.shift(),i=!1,a(u,(function(t,e){return(i=e===r||n&&v(e)===v(r))&&(u=t),i}),!0);return i}function V(t,e,n){if(!t)return null;for(var r,i=!0,o=e.split("."),u=t;i&&o.length>0;)r=o.shift(),i=!1,a(u,(function(t,e){return(i=e===r||n&&v(e)===v(r))&&(u=t),i}),!0);return i?u:null}function D(t,e,n,r){if(t){for(var i,o=!0,u=e.split("."),s=t;o&&u.length>0;)i=u.shift(),0===u.length?s[i]=n:(o=!1,a(s,(function(t,e){return(o=e===i||r&&v(e)===v(i))&&(s=t),o}),!0));if(!o)throw new Error(e+": Can not set property of undefined")}}function R(){return Array.prototype.concat.apply([],arguments)}function M(t,e){var n=function(t){return null==e?t:e(t)};return t.sort((function(t,e){return n(t)<n(e)?-1:n(t)>n(e)?1:0}))}function B(t,e){var n=function(t){return null==e?t:e(t)};return t.sort((function(t,e){return n(t)<n(e)?1:n(t)>n(e)?-1:0}))}function U(t){var e=parseFloat(t);return isNaN(e)?t:e}function F(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}function q(){if(0!==arguments.length){for(var t,e,n="",r=arguments[0],i=/\{(\d+)\}/g,o=i.lastIndex;t=i.exec(r);){if(t[0],e=Number.parseInt(t[1])+1,arguments.length<=e)throw new Error("format item "+e+"is not defined");n+=r.substring(o,t.index)+arguments[e],o=i.lastIndex}return n+=r.substring(o)}}function K(t){return t.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quote;/g,"")}function H(t,e){var n="",r=e.length;return e.forEach((function(e,i){n+=e,i+1<r&&(n+=t)})),n}var W=function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$event=e,this.$element=n,this.$argument=r};function z(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Y=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handlers=[]}var e,n,r;return e=t,(n=[{key:"on",value:function(t){this.handlers.push(t)}},{key:"off",value:function(t){for(var e=0;e<this.handlers.length;e++)this.handlers[e]===t&&this.handlers.splice(e,1)}},{key:"fire",value:function(t,e){var n;e=e||this;for(var r=0;r<this.handlers.length;r++)C(this.handlers[r])&&(n=this.handlers[r].call(e,t));return n}}])&&z(e.prototype,n),r&&z(e,r),t}();function Z(t){return t instanceof Y}function G(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var J=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.messages={}}var e,n,r;return e=t,(n=[{key:"get",value:function(t){return this.messages[t]||(this.messages[t]=new Y),this.messages[t]}},{key:"on",value:function(t,e){this.get(t).on(e)}},{key:"off",value:function(t,e){this.get(t).off(e)}},{key:"fire",value:function(t,e,n){return this.get(t).fire(e,n)}}])&&G(e.prototype,n),r&&G(e,r),t}(),Q={isIdentifierContinue:!1,isIdentifierStart:!1,literals:{false:!1,null:null,true:!0,undefined:void 0}};var X={Program:"Program",ExpressionStatement:"ExpressionStatement",AssignmentExpression:"AssignmentExpression",ConditionalExpression:"ConditionalExpression",LogicalExpression:"LogicalExpression",BinaryExpression:"BinaryExpression",UnaryExpression:"UnaryExpression",CallExpression:"CallExpression",MemberExpression:"MemberExpression",Identifier:"Identifier",Literal:"Literal",ArrayExpression:"ArrayExpression",Property:"Property",ObjectExpression:"ObjectExpression"},tt=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.$null=!0};function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.childNodes=[]}var e,n,r;return e=t,(n=[{key:"appendChild",value:function(t){this.childNodes.push(t)}}])&&et(e.prototype,n),r&&et(e,r),t}();function rt(t){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function it(t,e){return!e||"object"!==rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ot(t){return(ot=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ut(t,e){return(ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var at=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=it(this,ot(e).call(this,X.AssignmentExpression))).left=t,i.right=n,i.operator=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ut(t,e)}(e,t),e}(nt);function st(t){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ct(t,e){return!e||"object"!==st(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function lt(t){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ft(t,e){return(ft=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ht=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=ct(this,lt(e).call(this,X.BinaryExpression))).operator=t,i.left=n,i.right=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ft(t,e)}(e,t),e}(nt);function pt(t){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yt(t,e){return!e||"object"!==pt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function dt(t){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function vt(t,e){return(vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var bt=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=yt(this,dt(e).call(this,X.CallExpression))).callee=t,r.args=n,r.filter=!1,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vt(t,e)}(e,t),e}(nt);function mt(t){return(mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gt(t,e){return!e||"object"!==mt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function wt(t,e){return(wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var xt=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=gt(this,kt(e).call(this,X.ConditionalExpression))).test=t,i.alternate=n,i.consequent=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&wt(t,e)}(e,t),e}(nt);function Ot(t){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Et(t,e){return!e||"object"!==Ot(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function St(t){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ct(t,e){return(Ct=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var jt=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Et(this,St(e).call(this,X.ExpressionStatement))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ct(t,e)}(e,t),e}(nt);function _t(t){return(_t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $t(t,e){return!e||"object"!==_t(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pt(t){return(Pt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nt(t,e){return(Nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$t(this,Pt(e).call(this,X.Identifier))).name=t,n.allowNull=!1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nt(t,e)}(e,t),e}(nt);function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Lt(t){return(Lt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vt(t,e){return(Vt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=It(this,Lt(e).call(this,X.Literal))).value=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vt(t,e)}(e,t),e}(nt);function Rt(t){return(Rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mt(t,e){return!e||"object"!==Rt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ut(t,e){return(Ut=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ft=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Mt(this,Bt(e).call(this,X.LogicalExpression))).operator=t,i.left=n,i.right=r,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ut(t,e)}(e,t),e}(nt);function qt(t){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kt(t,e){return!e||"object"!==qt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Wt(t,e){return(Wt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var zt=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Kt(this,Ht(e).call(this,X.MemberExpression))).object=t,i.property=n,i.computed=r,i.allowNull=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Wt(t,e)}(e,t),e}(nt);function Yt(t){return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zt(t,e){return!e||"object"!==Yt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gt(t){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Jt(t,e){return(Jt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qt=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Zt(this,Gt(e).call(this,X.ObjectExpression))).properties=t,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Jt(t,e)}(e,t),e}(nt);function Xt(t){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function te(t,e){return!e||"object"!==Xt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ee(t){return(ee=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ne(t,e){return(ne=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var re=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),te(this,ee(e).call(this,X.Program))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ne(t,e)}(e,t),e}(nt);function ie(t){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oe(t,e){return!e||"object"!==ie(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ue(t){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ae(t,e){return(ae=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var se=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=oe(this,ue(e).call(this,X.Property))).kind="init",t.key=null,t.value=null,t.computed=!1,t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ae(t,e)}(e,t),e}(nt);function ce(t){return(ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function le(t,e){return!e||"object"!==ce(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function fe(t){return(fe=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function he(t,e){return(he=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pe=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=le(this,fe(e).call(this,X.UnaryExpression))).prefix=!0,r.operator=t,r.arg=n,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&he(t,e)}(e,t),e}(nt);function ye(t){return(ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function de(t,e){return!e||"object"!==ye(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ve(t){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function be(t,e){return(be=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var me=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),de(this,ve(e).call(this,X.ArrayExpression))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&be(t,e)}(e,t),e}(nt),ge={};function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}"+ - * / % === !== == != < > <= >= && || ! = |".split(" ").forEach((function(t){ge[t]=!0}));var we=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=f(Q,e)}var e,n,r;return e=t,(n=[{key:"lex",value:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.readString(e);else if(this.isNumber(e)||"."===e&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(e,"(){}[].,;:?"))this.tokens.push({index:this.index,text:e}),this.index++;else if(this.isWhitespace(e))this.index++;else{var n=e+this.peek(),r=n+this.peek(2),i=ge[e],o=ge[n],u=ge[r];if(i||o||u){var a=u?r:o?n:e;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens}},{key:"is",value:function(t,e){return-1!==e.indexOf(t)}},{key:"peek",value:function(t){var e=t||1;return this.index+e<this.text.length&&this.text.charAt(this.index+e)}},{key:"isNumber",value:function(t){return"0"<=t&&t<="9"&&"string"==typeof t}},{key:"isWhitespace",value:function(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"Â "===t}},{key:"isIdentifierStart",value:function(t){return this.options.isIdentifierStart?this.options.isIdentifierStart(t,this.codePointAt(t)):this.isValidIdentifierStart(t)}},{key:"isValidIdentifierStart",value:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t}},{key:"isIdentifierContinue",value:function(t){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(t,this.codePointAt(t)):this.isValidIdentifierContinue(t)}},{key:"isValidIdentifierContinue",value:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)}},{key:"codePointAt",value:function(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888}},{key:"peekMultichar",value:function(){var t=this.text.charAt(this.index),e=this.peek();if(!e)return t;var n=t.charCodeAt(0),r=e.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?t+e:t}},{key:"isExpOperator",value:function(t){return"-"===t||"+"===t||this.isNumber(t)}},{key:"throwError",value:function(t,e,n){n=n||this.index;var r=g(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n;throw new Error("Lexer Error: "+t+" at column"+r+" in expression ["+this.text+"].")}},{key:"readNumber",value:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=v(this.text.charAt(this.index));if("."===n||this.isNumber(n))t+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))t+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})}},{key:"readIdent",value:function(){var t=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var e=this.peekMultichar();if(!this.isIdentifierContinue(e))break;this.index+=e.length}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})}},{key:"readString",value:function(t){var e=this.index;this.index++;for(var n="",r=t,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var u=this.text.substring(this.index+1,this.index+5);u.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+u+"]"),this.index+=4,n+=String.fromCharCode(parseInt(u,16))}else n+=ESCAPE[o]||o;i=!1}else if("\\"===o)i=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}}])&&ke(e.prototype,n),r&&ke(e,r),t}();function xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Oe=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lexer=e,this.options=f(Q,n)}var e,n,r;return e=t,(n=[{key:"throwError",value:function(t,e){throw new Error("Syntax Error: Token '"+e.text+"'"+t+" at column "+(e.index+1)+" of the expression ["+this.text+"] starting at ["+this.text.substring(e.index)+"].")}},{key:"parse",value:function(t){this.text=t,this.tokens=this.lexer.lex(t);var e=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),e}},{key:"program",value:function(){for(var t=new re;;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&t.appendChild(this.expressionStatement()),!this.expect(";"))return t}},{key:"expressionStatement",value:function(){var t=new jt;return t.appendChild(this.filterChain()),t}},{key:"filterChain",value:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t}},{key:"expression",value:function(){return this.assignment()}},{key:"isAssignable",value:function(t){return t.type===X.Identifier||t.type===X.MemberExpression}},{key:"assignment",value:function(){var t=this.ternary();if(this.expect("=")){if(!this.isAssignable(t))throw new Error("Trying to assign a value to a non l-value");t=new at(t,this.assignment(),"=")}return t}},{key:"ternary",value:function(){var t,e,n=this.logicalOR();return this.expect("?")&&(t=this.expression(),this.consume(":"))?(e=this.expression(),new xt(n,t,e)):n}},{key:"logicalOR",value:function(){for(var t=this.logicalAND();this.expect("||");)t=new Ft("||",t,this.logicalAND());return t}},{key:"logicalAND",value:function(){for(var t=this.equality();this.expect("&&");)t=new Ft("&&",t,this.equality());return t}},{key:"equality",value:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=new ht(t.text,e,this.relational());return e}},{key:"relational",value:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=new ht(t.text,e,this.additive());return e}},{key:"additive",value:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=new ht(t.text,e,this.multiplicative());return e}},{key:"multiplicative",value:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=new ht(t.text,e,this.unary());return e}},{key:"unary",value:function(){var t;return(t=this.expect("+","-","!"))?new pe(t.text,this.unary()):this.primary()}},{key:"primary",value:function(){var t,e;for(this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.options.literals.hasOwnProperty(this.peek().text)?t=new Dt(this.options.literals[this.consume().text]):this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());this.peek("(","[",".")||this.peek("?")&&this.peekAhead(1,".");)this.expect("?")&&(t.allowNull=!0),"("===(e=this.expect("(","[",".")).text?(t=new bt(t,this.parseArguments()),this.consume(")")):"["===e.text?(t=new zt(t,this.expression(),!0),this.consume("]")):"."===e.text?t=new zt(t,this.identifier(),!1):this.throwError("IMPOSSIBLE");return t}},{key:"filter",value:function(t){for(var e=[t],n=[this.identifier()];this.expect(".");)n.push(this.identifier());var r=n.map((function(t){return t.name})).join("."),i=new bt(new Tt(r),e);for(i.filter=!0;this.expect(":");)e.push(this.expression());return i}},{key:"parseArguments",value:function(){var t=[];if(")"!==this.peekToken().text)do{t.push(this.filterChain())}while(this.expect(","));return t}},{key:"identifier",value:function(){var t=this.consume();return t.identifier||this.throwError("is not a valid identifier",t),new Tt(t.text)}},{key:"constant",value:function(){return new Dt(this.consume().value)}},{key:"arrayDeclaration",value:function(){var t=new me;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.appendChild(this.expression())}while(this.expect(","));return this.consume("]"),t}},{key:"object",value:function(){var t,e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;t=new se,this.peek().constant?(t.key=this.constant(),t.computed=!1,this.consume(":"),t.value=this.expression()):this.peek().identifier?(t.key=this.identifier(),t.computed=!1,this.peek(":")?(this.consume(":"),t.value=this.expression()):t.value=t.key):this.peek("[")?(this.consume("["),t.key=this.expression(),this.consume("]"),t.computed=!0,this.consume(":"),t.value=this.expression()):this.throwError("invalid key",this.peek()),e.push(t)}while(this.expect(","));return this.consume("}"),new Qt(e)}},{key:"consume",value:function(t){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e}},{key:"peekToken",value:function(){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);return this.tokens[0]}},{key:"peek",value:function(t,e,n,r){return this.peekAhead(0,t,e,n,r)}},{key:"peekAhead",value:function(t,e,n,r,i){if(this.tokens.length>t){var o=this.tokens[t],u=o.text;if(u===e||u===n||u===r||u===i||!e&&!n&&!r&&!i)return o}return!1}},{key:"expect",value:function(t,e,n,r){var i=this.peek(t,e,n,r);return!!i&&(this.tokens.shift(),i)}}])&&xe(e.prototype,n),r&&xe(e,r),t}();function Ee(t){return(new we).lex(t)}function Se(t){return new Oe(new we).parse(t)}function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var je=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"build",value:function(t){var e;switch(t.type){case X.ExpressionStatement:e=this.buildExpression(t);break;case X.AssignmentExpression:e=this.buildAssignment(t);break;case X.ConditionalExpression:e=this.buildCondition(t);break;case X.LogicalExpression:e=this.buildLogic(t);break;case X.BinaryExpression:e=this.buildBinary(t);break;case X.UnaryExpression:e=this.buildUnary(t);break;case X.CallExpression:e=this.buildCall(t);break;case X.MemberExpression:e=this.buildMember(t);break;case X.Identifier:e=this.buildIdentifier(t);break;case X.Literal:e=this.buildLiteral(t);break;case X.ArrayExpression:e=this.buildArray(t);break;case X.Property:e=this.buildProperty(t);break;case X.ObjectExpression:e=this.buildObject(t)}return e}},{key:"buildExpression",value:function(t){var e,n=this;return t.childNodes.forEach((function(t){e=n.build(t)})),e}},{key:"buildAssignment",value:function(t){return q("{0}={1}",this.build(t.left),this.build(t.right))}},{key:"buildCondition",value:function(t){return q("{0}?{1}:{2}",this.build(t.test),this.build(t.alternate),this.build(t.consequent))}},{key:"buildLogic",value:function(t){var e=this.build(t.left),n=this.build(t.right);return q("{0}{1}{2}",e,t.operator,n)}},{key:"buildBinary",value:function(t){var e=this.build(t.left),n=this.build(t.right);return q("{0}{1}{2}",e,t.operator,n)}},{key:"buildUnary",value:function(t){var e=this.build(t.arg);return q("{0}{1}",t.operator,e)}},{key:"buildCall",value:function(t){var e=this,n="",r=t.args.map((function(t){return e.build(t)})),i=this.build(t.callee);return t.filter?(r.length>0&&(n=r.shift()),n+=" | "+i,r.length>0&&(n+=":"+H(":",r))):n=q("{0}({1})",i,H(", ",r)),n}},{key:"buildMember",value:function(t){var e=this.build(t.object),n=this.build(t.property);return t.computed?q("{0}[{1}]",e,n):q("{0}.{1}",e,n)}},{key:"buildIdentifier",value:function(t){return t.name}},{key:"buildLiteral",value:function(t){return O(t.value)?q('"{0}"',t.value):t.value}},{key:"buildProperty",value:function(t){return q("{0}:{1}",this.build(t.key,{propertyKey:!0}),this.build(t.value))}},{key:"buildObject",value:function(t){var e=this;return q("{{0}}",H(", ",t.properties.map((function(t){return e.build(t)}))))}},{key:"buildArray",value:function(t){var e=this;return q("[{0}]",H(",",t.childNodes.map((function(t){return e.build(t)}))))}}])&&Ce(e.prototype,n),r&&Ce(e,r),t}();function _e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $e=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.locals=null,this.program=null,this.scope=e,this.options=f({allowNull:!1,assignInterceptor:null},n),this.builder=new je,this.buffer={}}var e,n,r;return e=t,(n=[{key:"parse",value:function(t){var e=this.buffer[t];return e||(e=Se(t),this.buffer[t]=e),e}},{key:"evaluate",value:function(t,e){return this.evaluateProgram(this.parse(t),e)}},{key:"evaluateProgram",value:function(t,e){var n,r=this;return this.program=t,this.locals=e,this.program.childNodes.forEach((function(t){n=r.evaluateNode(t)})),n&&n.$null&&(n=null),n}},{key:"assign",value:function(t,e,n){return this.assignProgram(this.parse(t),e,n)}},{key:"assignProgram",value:function(t,e,n){if(this.program=t,this.locals=n,1!==this.program.childNodes.length)throw new Error(q("{0} is not a valid assignment",exp));var r=this.program.childNodes[0];if(r.childNodes.length>1)throw new Error(q("{0} is not a valid assignment",exp));var i=r.childNodes[0];if(i.type===X.MemberExpression){var o=this.evaluateNode(i.object);if(null==o)throw new Error(q("{0} is null or undefined",this.builder.build(i.object)));if(null==(u=this.evaluateNode(i.property,{propertyKey:!i.computed})))throw new Error(q("{0} is null or undefined",this.builder.build(i.property)));null==this.options.assignInterceptor?o[u]=e:this.options.assignInterceptor.call(this,o,u,e)}else{if(i.type!==X.Identifier)throw new Error(q("{0} is not a valid assignment",exp));var u=this.builder.build(i);null==this.options.assignInterceptor?this.scope[u]=e:this.options.assignInterceptor.call(this,this.scope,u,e)}}},{key:"evaluateNode",value:function(t,e){var n;switch(t.type){case X.ExpressionStatement:n=this.evaluateExpression(t);break;case X.AssignmentExpression:n=this.evaluateAssignment(t);break;case X.ConditionalExpression:n=this.evaluateCondition(t);break;case X.LogicalExpression:n=this.evaluateLogic(t);break;case X.BinaryExpression:n=this.evaluateBinary(t);break;case X.UnaryExpression:n=this.evaluateUnary(t);break;case X.CallExpression:n=this.evaluateCall(t);break;case X.MemberExpression:n=this.evaluateMember(t,e);break;case X.Identifier:n=this.evaluateIdentifier(t,e);break;case X.Literal:n=this.evaluateLiteral(t);break;case X.ArrayExpression:n=this.evaluateArray(t);break;case X.Property:n=this.evaluateProperty(t);break;case X.ObjectExpression:n=this.evaluateObject(t)}return n}},{key:"evaluateExpression",value:function(t){var e,n=this;return t.childNodes.forEach((function(t){e=n.evaluateNode(t)})),e}},{key:"evaluateAssignment",value:function(t){var e=this.evaluateNode(t.left,{assignmentLeft:!0}),n=this.evaluateNode(t.right);null==this.options.assignInterceptor?e.obj[e.prop]=n:this.options.assignInterceptor.call(this,e.obj,e.prop,n)}},{key:"evaluateCondition",value:function(t){return this.evaluateNode(t.test)?this.evaluateNode(t.alternate):this.evaluateNode(t.consequent)}},{key:"evaluateLogic",value:function(t){var e,n=this.evaluateNode(t.left),r=this.evaluateNode(t.right);switch(t.operator){case"&&":case"||":e=n&&r}return e}},{key:"evaluateBinary",value:function(t){var e,n=this.evaluateNode(t.left),r=this.evaluateNode(t.right);switch(t.operator){case"+":e=n+r;break;case"-":e=n-r;break;case"*":e=n*r;break;case"/":e=n/r;break;case"%":e=n%r;break;case"<":e=n<r;break;case">":e=n>r;break;case"<=":e=n<=r;break;case">=":e=n>=r;break;case"==":e=n==r;break;case"!=":e=n!=r;break;case"===":e=n===r;break;case"!==":e=n!==r}return e}},{key:"evaluateUnary",value:function(t){var e,n=this.evaluateNode(t.arg);switch(t.operator){case"+":e=n;break;case"-":e=-n;break;case"!":e=!n}return e}},{key:"evaluateCall",value:function(t){var e=this,n=t.args.map((function(t){return e.evaluateNode(t)})),r=this.evaluateNode(t.callee,{callee:!0});if(t.filter){if(this.scope.$hasFilter(r.prop)){var i=this.scope.$getFilter(r.prop);return i.execute.apply(i,n)}throw new Error('Filter "'+r.prop+'" is not defined')}var o=r.obj[r.prop];if(C(o))return o.apply(r.obj,n);throw new Error(r.prop+" is not a function")}},{key:"evaluateMember",value:function(t,e){var n=this.evaluateNode(t.object);return null==n&&(this.options.allowNull||t.object.allowNull)&&(n=new tt),t.computed?n[this.evaluateNode(t.property)]:this.evaluateNode(t.property,{target:n,targetNode:t.object,callee:e&&e.callee,assignmentLeft:e&&e.assignmentLeft})}},{key:"evaluateIdentifier",value:function(t,e){var n;if(n=null==(e=e||{}).targetNode?this.scope:e.target,e.assignmentLeft||e.callee)return{obj:n,prop:t.name};if(e.propertyKey)return t.name;var r=n[t.name];return null==r&&this.locals&&(r=this.locals[t.name]),r}},{key:"evaluateLiteral",value:function(t){return t.value}},{key:"evaluateProperty",value:function(t){return{key:this.evaluateNode(t.key,{propertyKey:!0}),value:this.evaluateNode(t.value)}}},{key:"evaluateObject",value:function(t){var e=this,n={};return t.properties.forEach((function(t){var r=e.evaluateNode(t);n[r.key]=r.value})),n}},{key:"evaluateArray",value:function(t){var e=this,n=[];return t.childNodes.forEach((function(t){n.push(e.evaluateNode(t))})),n}}])&&_e(e.prototype,n),r&&_e(e,r),t}();function Pe(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Te(t,e,n){return e&&Ne(t.prototype,e),n&&Ne(t,n),t}var Ae=function(){function t(e,n){Pe(this,t),this.callee=e,this.exp=n,this.children={}}return Te(t,[{key:"createChild",value:function(e,n,r){return this.children[e]||(this.children[e]=new t(n,r)),this.children[e]}}]),t}(),Ie=function(){function t(){Pe(this,t),this.program=null,this.accessor={},this.builder=new je,this.buffer={}}return Te(t,[{key:"createAccessor",value:function(t,e,n){return this.accessor[t]||(this.accessor[t]=new Ae(e,n)),this.accessor[t]}},{key:"parse",value:function(t){var e=this.buffer[t];return e||(e=Se(t),this.buffer[t]=e),e}},{key:"analyse",value:function(t){return this.analyseProgram(this.parse(t))}},{key:"analyseProgram",value:function(t){var e=this;return this.accessor={},this.program=t,t.childNodes.forEach((function(t){e.analyseNode(t)})),this.accessor}},{key:"analyseNode",value:function(t,e){var n=null;switch(t.type){case X.ExpressionStatement:this.analyseExpression(t);break;case X.AssignmentExpression:this.analyseAssignment(t);break;case X.ConditionalExpression:this.analyseCondition(t);break;case X.LogicalExpression:this.analyseLogic(t);break;case X.BinaryExpression:this.analyseBinary(t);break;case X.UnaryExpression:this.analyseUnary(t);break;case X.CallExpression:this.analyseCall(t);break;case X.MemberExpression:n=this.analyseMember(t,e);break;case X.Identifier:n=this.analyseIdentifier(t,e);break;case X.Literal:n=this.analyseLiteral(t,e);break;case X.ArrayExpression:this.analyseArray(t);break;case X.Property:this.analyseProperty(t);break;case X.ObjectExpression:this.analyseObject(t)}return n}},{key:"analyseExpression",value:function(t){var e=this;t.childNodes.forEach((function(t){e.analyseNode(t)}))}},{key:"analyseAssignment",value:function(t){this.analyseNode(t.right)}},{key:"analyseCondition",value:function(t){this.analyseNode(t.test),this.analyseNode(t.alternate),this.analyseNode(t.consequent)}},{key:"analyseLogic",value:function(t){this.analyseNode(t.left),this.analyseNode(t.right)}},{key:"analyseBinary",value:function(t){this.analyseNode(t.left),this.analyseNode(t.right)}},{key:"analyseUnary",value:function(t){this.analyseNode(t.arg)}},{key:"analyseCall",value:function(t){var e=this;t.args.forEach((function(t){e.analyseNode(t)})),t.filter||this.analyseNode(t.callee,{callee:!0})}},{key:"analyseMember",value:function(t,e){var n=this.analyseNode(t.object);if(t.computed){if(this.analyseNode(t.property,{callee:e&&e.callee}),t.property.type===X.Literal)return n.createChild(t.property.value,e&&e.callee);var r=this.builder.build(t.property);return n.createChild(r,e&&e.callee,!0)}return this.analyseNode(t.property,{parent:n,callee:e&&e.callee})}},{key:"analyseIdentifier",value:function(t,e){var n=this.builder.build(t),r=e&&e.callee;return e&&e.parent?e.parent.createChild(n,r):this.createAccessor(n,r)}},{key:"analyseLiteral",value:function(t,e){var n=this.builder.build(t);if(e&&e.parent)return e.parent.createChild(n)}},{key:"analyseProperty",value:function(t){this.analyseNode(t.value)}},{key:"analyseObject",value:function(t){var e=this;t.properties.forEach((function(t){e.analyseNode(t)}))}},{key:"analyseArray",value:function(t){var e=this;t.childNodes.forEach((function(t){e.analyse(t)}))}}]),t}(),Le={propChanging:new Y,propChanged:new Y};var Ve=Symbol("__isProxy"),De=Symbol("__target"),Re={get:function(t,e){return e===Ve||(e===De?t:t[e])},set:function(t,e,n){var r=Be(t[e]),i=Be(n);if(r!==i){var o={valid:!0,apply:!0,oldValue:r,newValue:i};Le.propChanging.fire({target:t,key:e,data:o}),o.apply&&(t[e]=n,Le.propChanged.fire({target:t,key:e,data:{oldValue:r,newValue:i}}))}else t[e]!==n&&(t[e]=n);return!0}};function Me(t){return w(t)&&t[Ve]}function Be(t){return Me(t)?t[De]:t}function Ue(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function qe(t,e,n){return e&&Fe(t.prototype,e),n&&Fe(t,n),t}Object.prototype.toProxy=function(){return Me(this)?this:new Proxy(this,Re)};var Ke=function(){function t(e){Ue(this,t),this.target=e,this.keys={}}return qe(t,[{key:"getHandlers",value:function(t){return this.keys[t]||(this.keys[t]=[]),this.keys[t]}},{key:"registerKey",value:function(t,e){this.getHandlers(t).push(e)}},{key:"unregisterKey",value:function(t,e){var n=this.getHandlers(t);if(null==e)n.length=0;else{var r=n.indexOf(e);-1!==r&&n.splice(r,1)}}},{key:"fireKey",value:function(t,e,n){this.getHandlers(t).forEach((function(t){t.call(n,e)}))}}]),t}(),He=function(){function t(){var e=this;Ue(this,t),this.onPropChanging=function(t){e.handlePropChanging(t)},this.onPropChanged=function(t){e.handlePropChanged(t)},this.listeners=[],this.validators=[],this.init()}return qe(t,[{key:"init",value:function(){Le.propChanging.on(this.onPropChanging),Le.propChanged.on(this.onPropChanged)}},{key:"handlePropChanging",value:function(t){var e=this.getListener(this.validators,t.target);null!=e&&e.fireKey(t.key,t)}},{key:"handlePropChanged",value:function(t){var e=this.getListener(this.listeners,t.target);null!=e&&(e.fireKey(t.key,t),e.fireKey("*",t))}},{key:"getListener",value:function(t,e){var n,r=t.filter((function(t){return t.target===e}));return r.length>0&&(n=r[0]),n}},{key:"createListener",value:function(t,e){var n=new Ke(e);return t.push(n),n}},{key:"getOrCreateListener",value:function(t,e){var n=this.getListener(t,e);return null==n&&(n=this.createListener(t,e)),n}},{key:"watch",value:function(t,e,n){var r=this.getOrCreateListener(this.listeners,Be(t));return r.registerKey(e,n),function(){r.unregisterKey(e,n)}}},{key:"validate",value:function(t,e,n){var r=this.getOrCreateListener(this.validators,Be(t));return r.registerKey(e,n),function(){r.unregisterKey(e,n)}}},{key:"destroy",value:function(){this.listeners.length=0,this.validators.length=0,Le.propChanging.off(this.onPropChanging),Le.propChanged.off(this.onPropChanged)}}]),t}();function We(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ze=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.handler=e,this.timeout=n,this.delayId=null}var e,n,r;return e=t,(n=[{key:"execute",value:function(t){var e=this;null==this.delayId&&(this.delayId=setTimeout((function(){e.delayId=null,e.handler.call(t)}),this.timeout))}},{key:"destroy",value:function(){null!=this.delayId&&clearTimeout(this.delayId)}}])&&We(e.prototype,n),r&&We(e,r),t}();function Ye(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ge(t,e,n){return e&&Ze(t.prototype,e),n&&Ze(t,n),t}var Je=function(){function t(e,n,r){Ye(this,t),this.exp=e,this.handler=n,this.value=r,this.newValue=r,this.valueChanged=!1,this.collectionChanged=!1}return Ge(t,[{key:"setNewValue",value:function(t){this.newValue=t,this.valueChanged=!0}},{key:"setCollectionChanged",value:function(t){this.collectionChanged=t}},{key:"hasChange",value:function(){return this.valueChanged||this.collectionChanged}},{key:"notify",value:function(t){var e=this.value,n=this.newValue,r=this.collectionChanged;this.value=this.newValue,this.collectionChanged=!1,this.handler.call(t,{oldValue:e,newValue:n,collectionChanged:r})}}]),t}(),Qe=function(){function t(e){Ye(this,t),this.scope=e,this.accessors={},this.listeners=[],this.watcher=new He,this.analyser=new Ie,this.delayer=new ze(this.notify),this.evaluator=new $e(this.scope,{allowNull:!0})}return Ge(t,[{key:"createListener",value:function(t,e,n){var r=new Je(t,e,n);return this.listeners.push(r),r}},{key:"removeListener",value:function(t){var e=this.listeners.indexOf(t);-1!==e&&this.listeners.splice(e,1)}},{key:"notify",value:function(){var t=this;this.listeners.forEach((function(e){e.hasChange()&&e.notify(t.scope)}))}},{key:"notifyChange",value:function(t,e){e?t.setNewValue(e):t.setCollectionChanged(!0),this.delayer.execute(this)}},{key:"getAccessor",value:function(t){var e=this.accessors[t];return e||(e=this.analyser.analyse(t),this.accessors[t]=e),c(!0,e)}},{key:"watch",value:function(t,e,n){var r=this,i=this.getAccessor(t),o=this.evaluator,u=this.createListener(t,e,o.evaluate(t,n));function s(t){a(t,(function(t){C(t.unwatch)&&(t.unwatch.call(this),t.unwatch=null),s(t.children)}))}return function e(i,c){w(c)&&a(i,(function(i,a){var l=c;i.exp&&(a=o.evaluate(a,n)),l===r.scope&&n&&n[a]&&(l=n),i.unwatch=r.watcher.watch(l,a,(function(a){s(i.children),e(i.children,a.data.newValue),r.notifyChange(u,o.evaluate(t,n))})),e(i.children,l[a])}))}(i,this.scope),function(){s(i),r.removeListener(u)}}},{key:"watchCollection",value:function(t,e,n){var r=arguments,i=this,o=this,u=this.evaluator,a=l(),s=this.watch(t,(function(){null!=a&&a.call(i),a=l(),e.apply(i,r)}),n),c=this.createListener(t,e,u.evaluate(t,n));function l(){var e=u.evaluate(t,n);if(w(e)||k(e))return o.watcher.watch(e,"*",(function(){o.notifyChange(c)}))}return function(){s.call(this),a&&a.call(this),o.removeListener(c)}}},{key:"destroy",value:function(){this.delayer.destroy(),this.watcher.destroy(),this.scope=null,this.listeners.length=0}}]),t}();function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var tn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodeName=e,this.nodeValue=n,this.childNodes=[],this.parentNode=null,this.previousSibling=null,this.nextSibling=null,this.firstChild=null,this.lastChild=null,this.data={}}var e,n,r;return e=t,(n=[{key:"pushChild",value:function(t){t.parentNode=this,this.childNodes.push(t)}},{key:"buildSibling",value:function(){if(0!==this.childNodes.length){var t=this;1===this.childNodes.length?(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[0]):(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1],this.childNodes.forEach((function(e,n){0!==n?n!==t.childNodes.length-1?(e.previousSibling=t.childNodes[n-1],e.nextSibling=t.childNodes[n+1]):e.previousSibling=t.childNodes[n-1]:e.nextSibling=t.childNodes[n+1]}))),this.childNodes.forEach((function(t){t.buildSibling()}))}}},{key:"clearParentAndSibling",value:function(){this.parentNode=null,this.previousSibling=null,this.nextSibling=null}},{key:"remove",value:function(){null!=this.parentNode&&this.parentNode.removeChild(this)}},{key:"hasChildNodes",value:function(){return 0!==this.childNodes.length}},{key:"clearChildNodes",value:function(){this.childNodes.forEach((function(t){t.destroy()})),this.childNodes.length=0}},{key:"appendChild",value:function(t){return null!=t.parentNode&&t.parentNode.removeChild(t),t.parentNode=this,0===this.childNodes.length?this.firstChild=t:(this.lastChild.nextSibling=t,t.previousSibling=this.lastChild),t.compile(this.compileOptions),this.lastChild=t,this.childNodes.push(t),t}},{key:"insertBefore",value:function(t,e){null!=e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);if(-1===n)throw new Error("Ref node is not a child of specified node");return e.parentNode=this,null!=t.previousSibling&&(e.previousSibling=t.previousSibling,t.previousSibling.nextSibling=e),e.nextSibling=t,t.previousSibling=e,0===n&&(this.firstChild=e),e.compile(this.compileOptions),this.childNodes.splice(n,0,e),e}},{key:"insertAfter",value:function(t,e){return null==t.nextSibling?this.appendChild(e):this.insertBefore(t.nextSibling,e)}},{key:"removeChild",value:function(t){var e=this.childNodes.indexOf(t);if(-1===e)throw new Error("Remove node is not a child of specified node");return null!=t.previousSibling&&(t.previousSibling.nextSibling=t.nextSibling),null!=t.nextSibling&&(t.nextSibling.previousSibling=t.previousSibling),0===e&&(this.firstChild=t.nextSibling),e===this.childNodes.length-1&&(this.lastChild=t.previousSibling),t.clearParentAndSibling(),this.childNodes.splice(e,1),t}},{key:"replaceChild",value:function(t,e){null!=e.parentNode&&e.parentNode.removeChild(e);var n=this.childNodes.indexOf(t);if(-1===n)throw new Error("Ref node is not a child of specified node");return e.parentNode=this,e.previousSibling=t.previousSibling,e.nextSibling=t.nextSibling,this.firstChild===t&&(this.firstChild=e),this.lastChild===t&&(this.lastChild=e),t.clearParentAndSibling(),e.compile(this.compileOptions),this.childNodes.splice(n,1,e),e}},{key:"cloneNode",value:function(){throw new Error("not implemented")}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy(),this.childNodes.map((function(t){t.destroy()})),this.remove(),this.clearParentAndSibling(),this.childNodes.length=0,this.firstChild=null,this.lastChild=null,this.ownerDocument=null}}])&&Xe(e.prototype,n),r&&Xe(e,r),t}();function en(t){return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function rn(t,e){return!e||"object"!==en(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function on(t){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function un(t,e){return(un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var an=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=rn(this,on(e).call(this,t,n))).velm=null,r.quote='"',r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&un(t,e)}(e,t),n=e,(r=[{key:"setValue",value:function(t){this.nodeValue=t}},{key:"onDdestroy",value:function(){}}])&&nn(n.prototype,r),i&&nn(n,i),e}(tn);function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cn(t,e){return!e||"object"!==sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fn(t,e){return(fn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var hn=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),cn(this,ln(e).call(this,"#comment",t))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fn(t,e)}(e,t),e}(tn);function pn(t){return(pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function dn(t,e){return!e||"object"!==pn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function vn(t){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function bn(t,e){return(bn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var mn=function(t){function e(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),dn(this,vn(e).call(this,t))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&bn(t,e)}(e,t),n=e,(r=[{key:"isValidIdentifierStart",value:function(t){return"a"<=t&&t<="z"||"A"<=t&&t<="Z"||"_"===t||"$"===t||"@"===t||":"===t||"*"===t}},{key:"isValidIdentifierContinue",value:function(t,e){return this.isValidIdentifierStart(t,e)||this.isNumber(t)||"-"===t||"."===t}},{key:"expectString",value:function(t){var e=t.length;return this.index+e<=this.text.length&&t===this.text.substr(this.index,e)}},{key:"readComment",value:function(t,e){var n=this.index;this.index+=t.length;for(var r="",i=t;this.index<this.text.length;){var o=this.text.charAt(this.index);if(i+=o,this.expectString(e))return i+=e,this.index+=e.length,void this.tokens.push({index:n,text:i,comment:!0,value:r});r+=o,this.index++}this.throwError("Unterminated comment",n)}},{key:"readText",value:function(){for(var t=this.index,e="";this.index<this.text.length;){var n=this.text.charAt(this.index),r=this.peek();if("<"===n&&(this.isIdentifierStart(r)||"/"===r)||this.expectString("\x3c!--"))break;e+=n,this.index++}this.tokens.push({index:t,text:e,textTag:!0})}},{key:"readTag",value:function(t,e,n,r){for(this.tokens.push({index:this.index,text:t,tag:!0,closing:n,begin:!0,doctype:r}),this.index+=t.length,this.readIdent();this.index<this.text.length;){var i=this.text.charAt(this.index);if(!n){var o=i+this.peek();if(o==="/"+e){this.tokens.push({index:this.index,text:o,tag:!0,closing:!0,end:!0}),this.index+=o.length;break}}if(i===e){this.tokens.push({index:this.index,text:e,tag:!0,closing:!!r||n,end:!0}),this.index+=e.length;break}this.isIdentifierStart(this.peekMultichar())?this.readIdent():'"'===i||"'"===i?this.readString(i):this.isWhitespace(i)?this.index++:"="===i?(this.tokens.push({index:this.index,text:"=",equal:!0}),this.index++):this.throwError("Unexpected next character ",this.index,this.index+1)}}},{key:"lex",value:function(t){this.text=t,this.index=0,this.tokens=[];for(var e=!!this.options.allowDocType;this.index<this.text.length;){var n=this.text.charAt(this.index),r=this.peek(),i=this.peek(2);this.expectString("\x3c!--")?this.readComment("\x3c!--","--\x3e"):"<"===n&&this.isIdentifierStart(r)?this.readTag("<",">",!1):this.expectString("</")&&this.isIdentifierStart(i)?this.readTag("</",">",!0):this.expectString("<!DOCTYPE")?e?this.readTag("<!",">",!0,!0):this.throwError("DOCTYPE is not allowed",this.index,this.index+1):this.readText()}return this.tokens}}])&&yn(n.prototype,r),i&&yn(n,i),e}(we);function gn(t){return(gn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function wn(t,e){return!e||"object"!==gn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function xn(t){return(xn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function On(t,e){return(On=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var En=function(t){function e(t,n){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),wn(this,xn(e).call(this,t,n))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&On(t,e)}(e,t),n=e,(r=[{key:"parse",value:function(t){this.index=0,this.text=t,this.tokens=this.lexer.lex(t);for(var e,n=new Tn,r=!!this.options.allowDocType;this.index<this.tokens.length;){var i=this.current();if(i.doctype)r?e?this.throwError("DOCTYPE only allow one",i):(e=this.doctype(),n.childNodes.push(e)):this.throwError("DOCTYPE is not allowed",i);else if(i.comment){var o=new hn(i.text);n.childNodes.push(o),this.next()}else i.textTag?(t=new Dn(i.text),n.childNodes.push(t),this.next()):i.tag&&i.begin?n.childNodes.push(this.element()):this.throwError("impossible",i)}return n.buildSibling(),n.childNodes}},{key:"doctype",value:function(){this.next();var t=new Fn,e=this.current();return e.identifier?t.nodeValue=e.text:this.throwError(" Unexpected ",e),this.attrs(t).forEach((function(e){t.childNodes.push(e)})),(e=this.current()).tag&&e.end&&e.closing?this.next():this.throwError(" Unexpected ",e),t}},{key:"element",value:function(t){this.next();var e=new Tn,n=this.current();if(n.identifier?(e.nodeName=n.text,this.next()):this.throwError(" Unexpected ",n),this.attrs(e).forEach((function(t){e.pushAttr(t)})),(n=this.current()).tag&&n.end){if(this.next(),"input"===e.nodeName)return e.selfClosed=!0,e;n.closing||this.childElements(e).forEach((function(t){e.pushChild(t)}))}else this.throwError(" Unexpected ",n);return(n=this.current()).tag&&n.begin&&n.closing?(this.next(),(n=this.current()).identifier&&e.nodeName===n.text?(this.next(),(n=this.current()).tag&&n.end&&n.closing?this.next():this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n),e}},{key:"childElements",value:function(t){for(var e=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.closing)break;if(n.comment){var r=new hn(n.text);e.push(r),this.next()}else if(n.textTag){var i=new Dn(n.text);e.push(i),this.next()}else n.tag&&n.begin?e.push(this.element(t)):this.throwError(" Unexpected ",n)}return e}},{key:"attrs",value:function(t){for(var e=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.end)break;var r=new an;n.identifier&&(r.nodeName=n.text,r.origin=n.text,this.next(),(n=this.current()).equal&&(this.next(),(n=this.current()).constant?(r.nodeValue=n.value,this.next()):this.throwError(" Unexpected ",n))),e.push(r)}return e}},{key:"current",value:function(){return this.index<this.tokens.length?this.tokens[this.index]:{}}},{key:"next",value:function(){this.index++}}])&&kn(n.prototype,r),i&&kn(n,i),e}(Oe);function Sn(t){return t=K(t),(new mn).lex(t)}function Cn(t){return t=K(t),new En(new mn).parse(t)}function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $n(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Pn(t){return(Pn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$n(this,Pn(e).call(this,t))).vattrs=[],n.selfClosed=!1,n.elm=null,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,t),n=e,(r=[{key:"pushAttr",value:function(t){t.velm=this,this.vattrs.push(t)}},{key:"hasAttr",value:function(){return 0!==this.vattrs.length}},{key:"getAttr",value:function(t){var e=this.vattrs.filter((function(e){return e.belongTo(t)}));return e.length?e[0]:null}},{key:"setAttr",value:function(t,e){var n,r=this.vattrs.filter((function(e){return e.belongTo(t)}));return r.length>0?(n=r[0]).setValue(e):((n=new an(t,e)).velm=this,n.compile(this.compileOptions)),this.vattrs.push(n),n}},{key:"removeAttr",value:function(t){var e=[],n=this;if(t instanceof an){var r=this.vattrs.indexOf(t);-1!==r&&(e=n.vattrs.splice(r,1))}else this.vattrs.filter((function(e){return e.belongTo(t)})).forEach((function(t){var r=n.vattrs.indexOf(t);t.destroy(),e=n.vattrs.splice(r,1)}));return e.length>0?e[0]:null}},{key:"appendAttr",value:function(t){if(null!=t.velm)throw new Error("Current attribute is not new!");return t.velm=this,t.compile(this.compileOptions),this.vattrs.push(t),t}},{key:"setOuterTpl",value:function(t){var e=this;Cn(t).forEach((function(t){t.parentNode=null,e.parentNode.insertBefore(e,t)})),e.parentNode.removeChild(e)}},{key:"setInnerTpl",value:function(t){var e=this;this.clearChildNodes(),Cn(t).forEach((function(t){t.parentNode=null,e.appendChild(t)}))}},{key:"onDestroy",value:function(){this.vattrs.forEach((function(t){t.destroy()})),this.vattrs.length=0}}])&&_n(n.prototype,r),i&&_n(n,i),e}(tn);function An(t){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function In(t,e){return!e||"object"!==An(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Dn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=In(this,Ln(e).call(this,"#text",t))).elm=null,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(e,t),e}(tn);function Rn(t){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mn(t,e){return!e||"object"!==Rn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Bn(t){return(Bn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Un(t,e){return(Un=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fn=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Mn(this,Bn(e).call(this))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Un(t,e)}(e,t),e}(tn);function qn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Kn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"build",value:function(t){return this.isText(t)?this.buildText(t):this.isComment(t)?this.buildComment(t):this.buildElement(t)}},{key:"isText",value:function(t){return"#text"===t.nodeName}},{key:"isComment",value:function(t){return"#comment"===t.nodeName}},{key:"buildElement",value:function(t){var e=this,n=t.vattrs.map((function(t){return e.buildAttribute(t)})).join(" "),r=t.childNodes.map((function(t){return e.build(t)})).join("");n&&(n=" "+n);var i="<"+t.nodeName+n+">"+r;return t.selfClosed||(i+="</"+t.nodeName+">"),i}},{key:"buildAttribute",value:function(t){return t.nodeName+(null==t.nodeValue?"":"="+t.quote+t.nodeValue+t.quote)}},{key:"buildText",value:function(t){return t.nodeValue}},{key:"buildComment",value:function(t){return this.nodeValue}}])&&qn(e.prototype,n),r&&qn(e,r),t}();function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Wn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e}var e,n,r;return e=t,(n=[{key:"compute",value:function(t,e){return t.evaluate(this.text,e)}},{key:"assign",value:function(t,e,n){t.assign(this.text,e,n)}},{key:"watch",value:function(t,e,n){return t.$watch(this.text,e,n)}},{key:"destroy",value:function(){}}])&&Hn(e.prototype,n),r&&Hn(e,r),t}();function zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Yn=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scope=e,this.text=n,this.locals=r,this.expressed=!1,this.messaged=!1,this.assigned=!1,this.automation=null,this.value=null,this.changed=!1,this.segments=[],this.expressions=[],this.evaluator=new $e(this.scope,{assignInterceptor:function(t,e,n){t.toProxy()[e]=n}})}var e,n,r;return e=t,(n=[{key:"createExpression",value:function(t){var e=new Wn(t);return this.expressions.push(e),e}},{key:"compile",value:function(){if((this.messaged||this.assigned)&&(this.expressed=!0),this.expressed)this.createExpression(this.text);else{for(var t,e=/{{([^}]*)}}/g,n=e.lastIndex,r=e.exec(this.text);null!=r;)r.index>n&&(t=this.text.substring(n,r.index),this.segments.push(t)),this.segments.push(this.createExpression(r[1])),n=e.lastIndex,r=e.exec(this.text);this.text.length>n&&(t=this.text.substring(n),this.segments.push(t))}}},{key:"link",value:function(){var t=this;this.assigned||this.messaged||(this.detect(),this.expressions.forEach((function(e){e.watch(t.scope,(function(){t.detect(),t.patch()}),t.locals)})))}},{key:"detect",value:function(){var t=this.compute();this.value!=t&&(this.changed=!0,this.value=t)}},{key:"compute",value:function(t){var e=this;return t=f(this.locals,t),this.expressed?this.expressions[0].compute(this.evaluator,t):this.segments.reduce((function(n,r){return O(r)?n+r:n+r.compute(e.scope,t)}),"")}},{key:"assign",value:function(t,e){if(e=f(this.locals,e),!this.expressed)throw new Error(this.text+" is not valid expression");this.expressions[0].assign(this.evaluator,t,e)}},{key:"registerAutomation",value:function(t){this.automation=t}},{key:"unregisterAutomation",value:function(t){this.automation===t&&(this.automation=null)}},{key:"patch",value:function(){this.changed&&null!=this.automation&&(this.changed=!1,this.automation.call(this,this.value))}},{key:"destroy",value:function(){}}])&&zn(e.prototype,n),r&&zn(e,r),t}();function Zn(t){return Array.prototype.slice.call(t.childNodes,0)}function Gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jn="load unload change submit reset select blur focus abort keydown keypress keyup click dblclick mousedown mousemove mouseout mouseover mouseup".split(" "),Qn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scope=e,this.locals=n,this.vnodes=[],this.directives=[]}var e,n,r;return e=t,(n=[{key:"createBinding",value:function(t){return new Yn(this.scope,t,this.locals)}},{key:"render",value:function(t){var e=document.createDocumentFragment();return this.vnodes=Cn(t),this.compileNodes(this.vnodes),this.linkNodes(this.vnodes).forEach((function(t){e.appendChild(t)})),this.directives.forEach((function(t){t.$postlink()})),e}},{key:"isText",value:function(t){return"#text"===t.nodeName}},{key:"isComment",value:function(t){return"#comment"===t.nodeName}},{key:"compileNodes",value:function(t){var e=this;t.forEach((function(t){e.compileNode(t)}))}},{key:"compileNode",value:function(t){this.isText(t)?this.compileText(t):this.isComment(t)?this.compileComment(t):this.compileElm(t)}},{key:"linkNodes",value:function(t){var e=this;return t.map((function(t){return e.linkNode(t)}))}},{key:"linkNode",value:function(t){return this.isText(t)?this.linkText(t):this.isComment(t)?this.linkComment(t):this.linkElm(t)}},{key:"compileElm",value:function(t){var e=this,n=[],r=t.vattrs.some((function(r){return e.compileAttr(r),null!=r.data.directive&&(n.push(r.data.directive),t.data.linker=r.data.linker,null!=t.data.linker)}));M(n,(function(t){return t.$priority})).forEach((function(t){e.directives.push(t)})),r||(t.data.isComponent=this.scope.$hasComponent(t.nodeName),t.data.isComponent||this.compileNodes(t.childNodes))}},{key:"compileAttr",value:function(t){if(t.data.binding=this.createBinding(t.nodeValue),t.nodeName.startsWith("@")?(t.data.messaged=!0,t.data.binding.messaged=!0,t.data.key=t.nodeName.substr(1),t.data.domMessaged=A(Jn,t.data.key)):t.nodeName.startsWith(":")?(t.data.binding.expressed=!0,t.data.key=t.nodeName.substr(1)):t.nodeName.startsWith("*")?(t.data.isDirective=!0,t.data.binding.expressed=!0,t.data.key=t.nodeName.substr(1)):t.data.key=t.nodeName,t.data.isDirective){if(!this.scope.$hasDirective(t.data.key))throw new Error("directive "+t.data.key+" is not defined");if(t.data.directive=this.scope.$newDirective(t.data.key),t.data.directive.$$vattr=t,t.data.binding.assigned=t.data.directive.$assigned,t.data.directive.$compile())return void(t.data.linker=t.data.directive)}if(t.data.isDirective)t.data.binding.registerAutomation((function(e){t.data.directive.$change(e)}));else if(!t.data.messaged){var e=function(e){var n=t.velm.elm;t.data.key.startsWith("style")?D(n,t.data.key,e):n.setAttribute(t.data.key,e)};t.velm.isComponent?t.data.binding.registerAutomation((function(n){t.velm.component.$hasAttribute(t.data.key)?t.velm.component.$setAttribute(t.data.key,n):e(n)})):t.data.binding.registerAutomation(e)}t.data.binding.compile()}},{key:"compileText",value:function(t){t.data.binding=this.createBinding(t.nodeValue),t.data.binding.registerAutomation((function(e){var n,r,i,o,u=document.createTextNode(e);null==t.parentNode?null!=t.elm&&(n=t.elm.parentNode):n=t.parentNode.elm,null!=n&&(null==t.elm?n.appendChild(u):(r=t.elm,i=u,null!=(o=r.parentNode)&&(o.insertBefore(i,r),o.removeChild(r)))),t.elm=u})),t.data.binding.compile()}},{key:"compileComment",value:function(t){}},{key:"linkElm",value:function(t){var e=this;if(null!=t.data.linker)return t.data.linker.$link();if(t.elm=document.createElement(t.nodeName),t.data.isComponent){var n=this.scope.$newComponent(t.nodeName);t.data.component=n,t.elm.style.display=n.$display,t.vattrs.forEach((function(t){e.linkAttr(t)})),n.$$velm=t,n.$render(),n.$mount(t.elm)}else t.vattrs.forEach((function(t){e.linkAttr(t)})),t.childNodes.forEach((function(n){t.elm.appendChild(e.linkNode(n))}));return t.elm}},{key:"linkAttr",value:function(t){var e=t.velm.elm;t.data.messaged?t.data.domMessaged?e.addEventListener(t.data.key,(function(n){t.data.binding.compute({locals:new W(n,e)})})):t.velm.isComponent&&t.velm.component.$bind(t.data.key,(function(n,r){t.data.binding.compute({locals:new W(n,e,r)})})):(t.data.binding.link(),t.data.binding.patch())}},{key:"linkText",value:function(t){return t.data.binding.link(),t.elm=document.createTextNode(t.data.binding.value),t.elm}},{key:"linkComment",value:function(t){return document.createComment(t.nodeValue)}}])&&Gn(e.prototype,n),r&&Gn(e,r),t}(),Xn=0,tr=1,er=2,nr=3;function rr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ir=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.classContainer={},this.instanceContainer={}}var e,n,r;return e=t,(n=[{key:"getClassContainer",value:function(t){return this.classContainer[t]||(this.classContainer[t]={}),this.classContainer[t]}},{key:"getInstanceContainer",value:function(t){return this.instanceContainer[t]||(this.instanceContainer[t]=[]),this.instanceContainer[t]}},{key:"register",value:function(t,e,n,r){if(-1!==e.indexOf("."))throw new Error('Illegal character "."');r.key=e,n.prototype.$$metadata=r;var i=this.getClassContainer(t);if(null==i[e])i[e]=[];else{var o=i[e].filter((function(t){return t.prototype.$$metadata.namespace===n.prototype.$$metadata.namespace}));if(o.length>0)throw new Error(e+" is exist under namespace "+o[0].prototype.$$metadata.namespace)}i[e].push(n)}},{key:"registerComponent",value:function(t,e,n){this.register(er,t,e,n)}},{key:"registerDirective",value:function(t,e,n){this.register(nr,t,e,n)}},{key:"registerFilter",value:function(t,e,n){this.register(Xn,t,e,n)}},{key:"registerService",value:function(t,e,n){this.register(tr,t,e,n)}},{key:"has",value:function(t,e,n,r){var i,o=this.getClassContainer(t),u=this.convertAlias(e,r).split("."),a="";return u.length>1&&(e=u.pop(),a=u.join(".")),null!=(i=n?V(o,e,!0):o[e])&&!(a&&i.length>0&&0===(i=i.filter((function(t){var e=t.prototype.$$metadata;return e.namespace&&v(e.namespace)===v(a)}))).length)}},{key:"hasComponent",value:function(t,e){return this.has(er,t,!0,e)}},{key:"hasDirective",value:function(t,e){return this.has(nr,t,!0,e)}},{key:"hasFilter",value:function(t,e){return this.has(Xn,t,!0,e)}},{key:"hasService",value:function(t,e){return this.has(tr,t,!0,e)}},{key:"get",value:function(t,e,n,r){var i,o=this.getClassContainer(t),u=this.convertAlias(e,r).split("."),a="";if(u.length>1&&(e=u.pop(),a=u.join(".")),null==(i=n?V(o,e,!0):o[e]))throw new Error(t+" "+e+" is not defined");if(a&&i.length>0&&0===(i=i.filter((function(t){var e=t.prototype.$$metadata;return e.namespace&&v(e.namespace)===v(a)}))).length)throw new Error(e+" is not exist under namespace "+a);if(i.length>1){var s=i.map((function(t){return t.prototype.$$metadata.namespace}));throw new Error("namespace "+s.join("|")+" all have "+e)}return i[0]}},{key:"getComponent",value:function(t,e){return this.get(er,t,e)}},{key:"getDirective",value:function(t,e){return this.get(nr,t,e)}},{key:"getFilter",value:function(t,e){return this.get(Xn,t,e)}},{key:"getService",value:function(t,e){return this.get(tr,t,e)}},{key:"create",value:function(t,e,n){var r;if(O(e)){if(null==(r=this.get(t,e,n)))throw new Error("miss constructor for key "+e)}else{if(!C(e))throw new Error("Invalid parameter");r=e}return new r}},{key:"createComponent",value:function(t,e){return this.create(er,t,e)}},{key:"createDirective",value:function(t,e){return this.create(nr,t,e)}},{key:"createFilter",value:function(t,e){var n,r=this.getInstanceContainer(Xn);O(t)&&(t=this.getFilter(t,e));var i=r.filter((function(e){return e instanceof t}));return i.length?n=i[0]:(n=new t,r.push(n)),n}},{key:"createService",value:function(t,e){var n,r=this.getInstanceContainer(tr);if(O(t)&&(t=this.getService(t,e)),!t.prototype.$$metadata.nonShared){var i=r.filter((function(e){return e instanceof t}));i.length&&(n=i[0])}return n||(n=new t,r.push(n)),n}},{key:"convertAlias",value:function(t,e){if(!w(e))return t;var n=t.split(".");if(1===n.length)return t;var r=n.pop(),i=n.join(".");return s(e,(function(e,n){if(e===i)return t=n+"."+r,!0})),t}},{key:"injectServices",value:function(t,e){var n=this;e&&w(e.inject)&&a(e.inject,(function(r,i){Object.defineProperty(t,i,{enumerable:!1,configurable:!1,get:function(){var o="$$"+i;return null==t[o]&&(t[o]=n.createService(r,e.alias)),t[o]}})}))}}])&&rr(e.prototype,n),r&&rr(e,r),t}());function or(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ur(t){this.$$data=null,this.$$velm=null,this.$$fragment=null,this.$$parent=null,this.$$children=[],this.$$directives=[],this.$$injector=ir,this.$$render=new Qn(this),this.$$observer=new Qe(this),this.$$evaluator=new $e(this),this.$display="inherit",this.$setData(t),ir.injectServices(this,this.$$data)}var ar=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),ur.call(this,e)}var e,n,r;return e=t,(n=[{key:"$setData",value:function(t){this.$$data=f(this.$$metadata,t)}},{key:"$hasComponent",value:function(t){return this.$$injector.hasComponent(t,this.$$data.alias)}},{key:"$newComponent",value:function(t){var e=this.$$injector.createComponent(t,this.$$data.alias);return e.$$parent=this,this.$$children.push(e),e}},{key:"$hasDirective",value:function(t){return this.$$injector.hasDirective(t,this.$$data.alias)}},{key:"$newDirective",value:function(t){var e=this.$$injector.createDirective(t,this.$$data.alias);return e.$$scope=this,this.$$directives.push(e),e}},{key:"$hasFilter",value:function(t){return this.$$injector.hasFilter(t,this.$$data.alias)}},{key:"$getFilter",value:function(t){return this.$$injector.createFilter(t,this.$$data.alias)}},{key:"$hasAttribute",value:function(t){return L(this,t,!0)}},{key:"$setAttribute",value:function(t,e){V(this,t,!0)!==e&&D(this.toProxy(),t,e,!0)}},{key:"$bind",value:function(t,e){if(!Z(t=V(this,t,!0)))throw new Error(t+" is not a message");t.on(e)}},{key:"$unbind",value:function(t,e){var n=V(this,n,!0);if(!Z(n))throw new Error(n+" is not a message");n.off(e)}},{key:"$watch",value:function(t,e,n){return this.$$observer.watch(t,e,n)}},{key:"$watchCollection",value:function(t,e,n){return this.$$observer.watchCollection(t,e,n)}},{key:"$eval",value:function(t){return this.$$evaluator.evaluate(t)}},{key:"$getTemplate",value:function(){var t=this.$$data;if(O(t.template))return t.template;if(O(t.templateId)){var e=document.getElementById(t.templateId);if(null!=e)return e.innerHTML}return""}},{key:"$render",value:function(){var t=this.$getTemplate();return this.$$fragment=this.$$render.render(t),this.$$fragment}},{key:"$mount",value:function(t){(O(t)?document.querySelector(t):t).appendChild(this.$$fragment)}},{key:"$unmount",value:function(){}},{key:"$destroy",value:function(){this.$$observer.destroy(),this.$$children.forEach((function(t){t.$destroy()})),this.$$directives.forEach((function(t){t.$destroy()})),this.onDestroy&&this.onDestroy(),this.$$parent=null,this.$$children.length=0,this.$$directives.length=0}}])&&or(e.prototype,n),r&&or(e,r),t}();function sr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function cr(t,e,n){return e&&sr(t.prototype,e),n&&sr(t,n),t}function lr(){this.$$scope=null,this.$$vattr=null,this.$assigned=!1,this.$priority=9}var fr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),lr.call(this,e)}return cr(t,[{key:"$scope",get:function(){return this.$$scope}},{key:"$elm",get:function(){return this.$$vattr.velm.elm}},{key:"$component",get:function(){return this.$$vattr.velm.data.component}},{key:"$binding",get:function(){return this.$$vattr.data.binding}}]),cr(t,[{key:"$compile",value:function(){return this.onCompile&&this.onCompile(this.$$vattr.velm,this.$$vattr)}},{key:"$change",value:function(t){this.onChange&&this.onChange(t)}},{key:"$link",value:function(){return this.onLink&&this.onLink(this.$scope)}},{key:"$postlink",value:function(){this.afterLink&&this.afterLink()}},{key:"$destroy",value:function(){this.onDestroy&&this.onDestroy()}}]),t}();function hr(t){}var pr=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),hr.call(this,e)};function yr(t){}var dr=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),yr.call(this,e)};function vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var br=/^[a-z_\$][\w\$-]*/i,mr=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,n,r;return e=t,(n=[{key:"rename",value:function(t,e){if(br.test(e)){var n="";switch(e.split("-").forEach((function(t){n+=b(t[0])+t.substring(1)})),t){case er:n+="Component";break;case nr:n+="Directive";break;case Xn:n+="Filter";break;case tr:n+="Service"}return n}throw new Error(e+"is not a valid name")}},{key:"make",value:function(t,e,n){var r,i=this.rename(t,e);for(var o in r=new Function("onConstruct",'"use strict";return function '+i+"(){onConstruct.call(this);};")((function(){C(r.super)&&r.super.call(this),C(n.construct)&&n.construct.call(this,Y)})),C(n.extends)&&d(r,n.extends),n)n.hasOwnProperty(o)&&"extends"!==o&&"construct"!==o&&(r.prototype[o]=n[o]);return r}},{key:"makeComponent",value:function(t,e){return this.make(er,t,e)}},{key:"makeDirective",value:function(t,e){return this.make(nr,t,e)}},{key:"makeFilter",value:function(t,e){return this.make(Xn,t,e)}},{key:"makeService",value:function(t,e){return this.make(tr,t,e)}}])&&vr(e.prototype,n),r&&vr(e,r),t}()),gr=function(t){ur.call(this,t)};gr.prototype=ar.prototype;var kr=function(t){lr.call(this,t)};kr.prototype=fr.prototype;var wr=function(t){hr.call(this,t)};wr.prototype=pr.prototype;var xr,Or=function(t){yr.call(this,t)};function Er(t){return{component:function(e,n,r){return r.namespace=t,function(t,e,n){e.extends=gr;var r=mr.makeComponent(t,e);return ir.registerComponent(t,r,n),r}(e,n,r)},directive:function(e,n,r){return r.namespace=t,function(t,e,n){e.extends=kr;var r=mr.makeDirective(t,e);return ir.registerDirective(t,r,n),r}(e,n,r)},service:function(e,n,r){return r.namespace=t,function(t,e,n){e.extends=Or;var r=mr.makeService(t,e);return ir.registerService(t,r,n),r}(e,n,r)},filter:function(e,n,r){return r.namespace=t,function(t,e,n){e.extends=wr;var r=mr.makeFilter(t,e);return ir.registerFilter(t,r,n),r}(e,n,r)}}}function Sr(t){return t instanceof ar}function Cr(t){return t instanceof fr}function jr(t){return t instanceof pr}function _r(t){return t instanceof dr}function $r(t,e){e.extends=gr;var n,r=document.querySelector(t),i=new(mr.makeComponent("root",e));i.$setData({template:r.innerHTML}),Zn(n=r).forEach((function(t){n.removeChild(t)})),i.$render(),i.$mount(r)}function Pr(t){return function(e){var n=t.key||e.name;ir.registerComponent(n,e,t)}}function Nr(t){return function(e){var n=t.key||e.name;ir.registerDirective(n,e,t)}}function Tr(t){return function(e){var n=t.key||e.name;ir.registerFilter(n,e,t)}}function Ar(t){return function(e){var n=t.key||e.name;ir.registerService(n,e,t)}}function Ir(t){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Vr(t,e){return!e||"object"!==Ir(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Dr(t){return(Dr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Rr(t,e){return(Rr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Or.prototype=dr.prototype;var Mr;Nr({namespace:"automate",key:"m-bind"})(xr=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Vr(this,Dr(e).call(this))}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Rr(t,e)}(e,t),n=e,(r=[{key:"onChange",value:function(t){this.$elm.innerText=t}}])&&Lr(n.prototype,r),i&&Lr(n,i),e}(fr));function Br(t){return(Br="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fr(t,e){return!e||"object"!==Br(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Kr(t,e){return(Kr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Hr;Nr({namespace:"automate",key:"m-repeat"})(Mr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Fr(this,qr(e).call(this))).itemExp="",t.itemsExp="",t.itemTemplate="",t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Kr(t,e)}(e,t),n=e,(r=[{key:"onCompile",value:function(t,e){var n=e.nodeValue,r=/^([a-z_]+\w+)\s+in\s+(.+)$/i.exec(n);if(null==r)throw new Error("m-repeat: parameter is not valid");this.itemExp=r[1],this.itemsExp=r[2];var i=new Kn;return t.removeAttr(e),this.itemTemplate=i.build(t),!0}},{key:"onLink",value:function(t){var e=this,n=document.createDocumentFragment(),r=document.createComment("start: m-repeat"),i=document.createComment("end: m-repeat");return n.appendChild(r),n.appendChild(this.render(t)),n.appendChild(i),t.$watchCollection(this.itemsExp,(function(){var n,o,u,a=e.render(t);o=i,Zn(u=(n=r).parentNode).forEach((function(t){t.previousSibling===n&&t!==o&&u.removeChild(t),t.nextSibling===o&&t!==n&&u.removeChild(t)})),i.parentNode.insertBefore(a,i)})),n}},{key:"render",value:function(t){var e=this,n=t.$eval(this.itemsExp),r=document.createDocumentFragment();return a(n,(function(n,i){var o={};o.$key=i,o.$index=i,o[e.itemExp]=n;var u=new Qn(t,o).render(e.itemTemplate);r.appendChild(u)})),r}},{key:"onDestroy",value:function(){}}])&&Ur(n.prototype,r),i&&Ur(n,i),e}(fr));function Wr(t){return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yr(t,e){return!e||"object"!==Wr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Gr(t,e){return(Gr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jr;Nr({namespace:"automate",key:"m-model"})(Hr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=Yr(this,Zr(e).call(this))).viewValue=null,t.modelValue=null,t.parsers=[],t.formatters=[],t.viewChangeListeners=[],t.validators=[],t.status={feedback:"",pristine:!0,dirty:!1,valid:!0,invalid:!1},t.options={css:{pristine:"n-pristine",dirty:"n-dirty",valid:"n-valid",invalid:"n-invalid"}},t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Gr(t,e)}(e,t),n=e,(r=[{key:"onChange",value:function(t){this.commitModelValue(t)}},{key:"afterLink",value:function(){var t=this,e=this.$elm.name;if(e&&(this.$scope[e]=this.status),null!=this.$component){if(!Z(this.$component.valueChange))throw new Error("Component "+this.$component.$$meta.key+"must define [change] event");this.$component.valueChange.on((function(t,e){return self.commitViewValue(e.newvalue)}))}else this.$elm.addEventListener("input",(function(e){return t.commitViewValue(e.target.value)}))}},{key:"onDestroy",value:function(){}},{key:"commitModelValue",value:function(t){if(this.modelValue!==t){var e=this;this.validators.forEach((function(n){n.call(e,t,this.modelValue)})),this.modelValue=t,this.formatters.forEach((function(n){t=n.call(e,t)})),this.viewValue!==t&&(this.viewValue=t,null!=this.$component?this.$component.$setAttribute("value",t):this.$elm.value=t,this.updateElmCssClass())}}},{key:"commitViewValue",value:function(t){if(this.viewValue!==t){var e=this;this.markDirtyStatus(!0),this.viewChangeListeners.forEach((function(n){n.call(e,t,e.viewValue)})),this.viewValue=t,this.parsers.forEach((function(n){t=n.call(e,t)})),this.modelValue!==t&&(this.validators.forEach((function(n){n.call(e,t,e.modelValue)})),this.modelValue=t,this.$binding.assign(t))}}},{key:"updateElmCssClass",value:function(){var t=this.$elm,e=this.options.css;this.status.dirty?(t.classList.add(e.dirty),t.classList.remove(e.pristine)):(t.classList.add(e.pristine),t.classList.remove(e.dirty)),this.status.valid?(t.classList.add(e.valid),t.classList.remove(e.invalid)):(t.classList.add(e.invalid),t.classList.remove(e.valid))}},{key:"markDirtyStatus",value:function(t){this.status.dirty=t,this.status.pristine=!t,this.updateElmCssClass()}},{key:"markValidStatus",value:function(t,e){this.status.valid=t,this.status.invalid=!t,this.status.feedback=e,this.updateElmCssClass()}}])&&zr(n.prototype,r),i&&zr(n,i),e}(fr));function Qr(t){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ti(t,e){return!e||"object"!==Qr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ei(t){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ni(t,e){return(ni=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ri;Nr({namespace:"automate",key:"m-hide"})(Jr=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ti(this,ei(e).call(this))).initial="initial",t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ni(t,e)}(e,t),n=e,(r=[{key:"onChange",value:function(t){t?(this.initial=this.$elm.style.display,this.$elm.style.display="none"):"none"===this.$elm.style.display&&(this.$elm.style.display=this.initial)}}])&&Xr(n.prototype,r),i&&Xr(n,i),e}(fr));function ii(t){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ui(t,e){return!e||"object"!==ii(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function si(t,e){return(si=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Nr({namespace:"automate",key:"m-show"})(ri=function(t){function e(){var t;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(t=ui(this,ai(e).call(this))).initial="initial",t}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&si(t,e)}(e,t),n=e,(r=[{key:"onChange",value:function(t){t?"none"===this.$elm.style.display&&(this.$elm.style.display=this.initial):(this.initial=this.$elm.style.display,this.$elm.style.display="none")}}])&&oi(n.prototype,r),i&&oi(n,i),e}(fr));function ci(t){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function li(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function fi(t,e){return!e||"object"!==ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pi(t,e){return(pi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yi,di=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=fi(this,hi(e).call(this))).key=t,n}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pi(t,e)}(e,t),n=e,(r=[{key:"onChange",value:function(t){t?this.$elm.hasAttribute(this.key)||this.$elm.setAttribute(this.key,""):this.$elm.hasAttribute(this.key)&&this.$elm.removeAttribute(this.key)}}])&&li(n.prototype,r),i&&li(n,i),e}(fr);function vi(t){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bi(t,e){return!e||"object"!==vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gi(t,e){return(gi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ki;Nr({namespace:"automate",key:"m-checked"})(yi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),bi(this,mi(e).call(this,"checked"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gi(t,e)}(e,t),e}(di));function wi(t){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e){return!e||"object"!==wi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oi(t){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ei(t,e){return(Ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Si;Nr({namespace:"automate",key:"m-disabled"})(ki=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),xi(this,Oi(e).call(this,"disabled"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ei(t,e)}(e,t),e}(di));function Ci(t){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){return!e||"object"!==Ci(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _i(t){return(_i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function $i(t,e){return($i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Pi;Nr({namespace:"automate",key:"m-readonly"})(Si=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),ji(this,_i(e).call(this,"readonly"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&$i(t,e)}(e,t),e}(di));function Ni(t){return(Ni="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ti(t,e){return!e||"object"!==Ni(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ii(t,e){return(Ii=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Nr({namespace:"automate",selector:"m-selected"})(Pi=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),Ti(this,Ai(e).call(this,"selected"))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ii(t,e)}(e,t),e}(di));n.d(e,"forEach",(function(){return a})),n.d(e,"some",(function(){return s})),n.d(e,"copy",(function(){return c})),n.d(e,"extend",(function(){return l})),n.d(e,"merge",(function(){return f})),n.d(e,"object",(function(){return y})),n.d(e,"inherit",(function(){return d})),n.d(e,"lowercase",(function(){return v})),n.d(e,"uppercase",(function(){return b})),n.d(e,"isUndefined",(function(){return m})),n.d(e,"isDefined",(function(){return g})),n.d(e,"isObject",(function(){return w})),n.d(e,"isBlankObject",(function(){return x})),n.d(e,"isNumber",(function(){return E})),n.d(e,"isDate",(function(){return S})),n.d(e,"isFunction",(function(){return C})),n.d(e,"isRegExp",(function(){return j})),n.d(e,"isBoolean",(function(){return _})),n.d(e,"isArray",(function(){return k})),n.d(e,"isString",(function(){return O})),n.d(e,"isSame",(function(){return P})),n.d(e,"isEmpty",(function(){return N})),n.d(e,"isFormData",(function(){return $})),n.d(e,"debug",(function(){return T})),n.d(e,"contains",(function(){return A})),n.d(e,"containsStr",(function(){return I})),n.d(e,"hasProperty",(function(){return L})),n.d(e,"getProperty",(function(){return V})),n.d(e,"setProperty",(function(){return D})),n.d(e,"concat",(function(){return R})),n.d(e,"orderBy",(function(){return M})),n.d(e,"orderByDescending",(function(){return B})),n.d(e,"toNumber",(function(){return U})),n.d(e,"remove",(function(){return F})),n.d(e,"format",(function(){return q})),n.d(e,"escapeHtml",(function(){return K})),n.d(e,"join",(function(){return H})),n.d(e,"Local",(function(){return W})),n.d(e,"Message",(function(){return Y})),n.d(e,"isMessage",(function(){return Z})),n.d(e,"MessageBus",(function(){return J})),n.d(e,"Observer",(function(){return Qe})),n.d(e,"parseOptions",(function(){return Q})),n.d(e,"ExpLexer",(function(){return we})),n.d(e,"ExpParser",(function(){return Oe})),n.d(e,"lexExp",(function(){return Ee})),n.d(e,"parseExp",(function(){return Se})),n.d(e,"ExpBuilder",(function(){return je})),n.d(e,"Evaluator",(function(){return $e})),n.d(e,"Analyser",(function(){return Ie})),n.d(e,"AST",(function(){return X})),n.d(e,"NullExpressionNode",(function(){return tt})),n.d(e,"AstNode",(function(){return nt})),n.d(e,"AssignmentExpressionNode",(function(){return at})),n.d(e,"BinaryExpressionNode",(function(){return ht})),n.d(e,"CallExpressionNode",(function(){return bt})),n.d(e,"ConditionalExpressionNode",(function(){return xt})),n.d(e,"ExpressionStatementNode",(function(){return jt})),n.d(e,"IdentifierNode",(function(){return Tt})),n.d(e,"LiteralNode",(function(){return Dt})),n.d(e,"LogicalExpressionNode",(function(){return Ft})),n.d(e,"MemberExpressionNode",(function(){return zt})),n.d(e,"ObjectExpressionNode",(function(){return Qt})),n.d(e,"ProgramNode",(function(){return re})),n.d(e,"PropertyNode",(function(){return se})),n.d(e,"UnaryExpressionNode",(function(){return pe})),n.d(e,"ArrayExpressionNode",(function(){return me})),n.d(e,"lexTpl",(function(){return Sn})),n.d(e,"parseTpl",(function(){return Cn})),n.d(e,"TplBuilder",(function(){return Kn})),n.d(e,"VNode",(function(){return tn})),n.d(e,"VAttr",(function(){return an})),n.d(e,"VCmnt",(function(){return hn})),n.d(e,"VElm",(function(){return Tn})),n.d(e,"VText",(function(){return Dn})),n.d(e,"VType",(function(){return Fn})),n.d(e,"Binding",(function(){return Yn})),n.d(e,"Expression",(function(){return Wn})),n.d(e,"Render",(function(){return Qn})),n.d(e,"Component",(function(){return ar})),n.d(e,"Directive",(function(){return fr})),n.d(e,"Filter",(function(){return pr})),n.d(e,"Service",(function(){return dr})),n.d(e,"isComponent",(function(){return Sr})),n.d(e,"isDirective",(function(){return Cr})),n.d(e,"isFilter",(function(){return jr})),n.d(e,"isService",(function(){return _r})),n.d(e,"namespace",(function(){return Er})),n.d(e,"bootstrap",(function(){return $r})),n.d(e,"injector",(function(){return ir})),n.d(e,"component",(function(){return Pr})),n.d(e,"directive",(function(){return Nr})),n.d(e,"filter",(function(){return Tr})),n.d(e,"service",(function(){return Ar}))}])}));