!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.automate=t():e.automate=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var o=Object.prototype.toString,i=Object.getPrototypeOf;function u(e){return void 0===e}function a(e){return void 0!==e}function s(e){return e instanceof Array}function c(e){return null!==e&&"object"===r(e)}function l(e){return null!==e&&"object"===r(e)&&!i(e)}function f(e){return"string"==typeof e}function h(e){return"number"==typeof e}function p(e){return"[object Date]"===o.call(e)}function y(e){return"function"==typeof e}function d(e){return"[object RegExp]"===o.call(e)}function b(e){return"boolean"==typeof e}function v(e){return"undefined"!=typeof FormData&&e instanceof FormData}function m(e){var t=parseFloat(e);return isNaN(t)?e:t}function g(e){return f(e)?e.toLowerCase():e}function w(e){return f(e)?e.toUpperCase():e}function k(e,t,n){return e.split(t).map((function(e,t){return 0!==t||n?1===e.length?e.toUpperCase():e.charAt(0).toUpperCase()+e.substring(1):e})).join("")}function x(e,t,n){for(var r,o=0,i="";o<e.length;)r=e[o],(0!==o||n)&&/[A-Z]/.test(r)?(i+=t,i+=r.toLowerCase()):i+=r,o++;return i}function O(){var e,t=!1,n=0,r=arguments[n];if(b(r)&&(t=r,n++,r=arguments[n]),arguments.length>n+1&&(e=arguments[n+1]),s(r)){var o=[];return r.forEach((function(n,i){(null==e||e(r,i,n))&&o.push(t?O(t,n):n)})),o}if(c(r)){var i=D(r);return C(r,(function(n,o){(null==e||e(r,o,n))&&(i[o]=t?O(t,n):n)})),i}return r}function E(){var e=!1,t=0,n=arguments[t];b(n)&&(e=n,n=arguments[++t]),e?Array.prototype.slice.call(arguments,t+1).forEach((function(e){_(n,e)})):Array.prototype.slice.call(arguments,t+1).forEach((function(e){j(n,e)}))}function S(){var e=!1,t=0,n={};return b(arguments[t])&&(e=arguments[t],t++),e?Array.prototype.slice.call(arguments,t).forEach((function(e){_(n,e)})):Array.prototype.slice.call(arguments,t).forEach((function(e){j(n,e)})),n}function j(e,t){C(t,(function(t,n){e[n]=t}))}function _(e,t){C(t,(function(t,n){null==e[n]?e[n]=t:c(e[n])&&c(t)?_(e[n],t):e[n]=t}))}function C(e,t){if(s(e))e.forEach(t);else if(c(e))for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)}function P(e,t){if(s(e))return e.some(t);if(c(e))for(var n in e)if(e.hasOwnProperty(n)&&t(e[n],n))return!0}function $(e,t){var n=function(e){return null==t?e:t(e)};return e.sort((function(e,t){return n(e)<n(t)?-1:n(e)>n(t)?1:0}))}function N(e,t){var n=function(e){return null==t?e:t(e)};return e.sort((function(e,t){return n(e)<n(t)?1:n(e)>n(t)?-1:0}))}function T(){return Array.prototype.concat.apply([],arguments)}function A(e,t){var n=e.indexOf(t);if(-1!==n)return e.splice(n,1)}function D(e){function t(){}return t.prototype=e,new t}function V(e,t){!function(e,t){var n=D(t.prototype);n.constructor=e,e.prototype=n}(e,t),e.super=function(){t.apply(this,arguments)}}function L(e,t){for(var n=t.split(".");n.length>1;){if(!c(e))return!1;e=e[n.shift()]}return c(e)&&e.hasOwnProperty(n.shift())}function I(e,t){for(var n=t.split(".");n.length>0;){if(!c(e))return;e=e[n.shift()]}return e}function R(e,t,n){for(var r=t.split(".");r.length>1;){if(!c(e))return;e=e[r.shift()]}c(e)&&(e[r.shift()]=n)}function M(){if(0!==arguments.length){for(var e,t,n="",r=arguments[0],o=/\{(\d+)\}/g,i=o.lastIndex;e=o.exec(r);){if(e[0],t=Number.parseInt(e[1])+1,arguments.length<=t)throw new Error("format item "+t+"is not defined");n+=r.substring(i,e.index)+arguments[t],i=o.lastIndex}return n+=r.substring(i)}}function F(e){return e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quote;/g,"")}var B=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$event=t,this.$element=n};function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={},this.handlers=[]}var t,n,r;return t=e,(n=[{key:"on",value:function(e){var t=this;if(-1!==this.handlers.indexOf(e))throw new Error("can not register same event handler more than once");return this.handlers.push(e),function(){return t.off(e)}}},{key:"off",value:function(e){var t=this.handlers.indexOf(e);-1!==t&&this.handlers.splice(t,1)}},{key:"fire",value:function(e,t){var n=this;t=t||this,this.data=e||{},this.handlers.forEach((function(e){return e.call(t,n)}))}}])&&U(t.prototype,n),r&&U(t,r),e}(),K={propertyChanged:new q,translateChanged:new q};function z(e){return e instanceof q}var H=Symbol("__isProxy"),W=Symbol("__target"),Z={get:function(e,t){if(t===H)return!0;if(t===W)return e;return e[t]},set:function(e,t,n){var r=G(e[t]),o=G(n);r!==o?(e[t]=function e(t){if(c(t)&&!Y(t))return C(t,(function(n,r){t[r]=e(n)})),new Proxy(t,Z);return t}(n),K.propertyChanged.fire({target:e,key:t,data:{oldValue:r,newValue:o}})):e[t]!==n&&(e[t]=n);return!0}};function Y(e){return c(e)&&e[H]}function G(e){return Y(e)?e[W]:e}var J={isIdentifierContinue:!1,isIdentifierStart:!1,literals:{false:!1,null:null,true:!0,undefined:void 0}};var Q={Program:"Program",ExpressionStatement:"ExpressionStatement",AssignmentExpression:"AssignmentExpression",ConditionalExpression:"ConditionalExpression",LogicalExpression:"LogicalExpression",BinaryExpression:"BinaryExpression",UnaryExpression:"UnaryExpression",CallExpression:"CallExpression",MemberExpression:"MemberExpression",Identifier:"Identifier",Literal:"Literal",ArrayExpression:"ArrayExpression",Property:"Property",ObjectExpression:"ObjectExpression"},X=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$null=!0};function ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var te=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.childNodes=[]}var t,n,r;return t=e,(n=[{key:"appendChild",value:function(e){this.childNodes.push(e)}}])&&ee(t.prototype,n),r&&ee(t,r),e}();function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){return!t||"object"!==ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ue=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=re(this,oe(t).call(this,Q.AssignmentExpression))).left=e,o.right=n,o.operator=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),t}(te);function ae(e){return(ae="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function se(e,t){return!t||"object"!==ae(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var fe=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=se(this,ce(t).call(this,Q.BinaryExpression))).operator=e,o.left=n,o.right=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(t,e),t}(te);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){return(de=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var be=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=pe(this,ye(t).call(this,Q.CallExpression))).callee=e,r.args=n,r.filter=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&de(e,t)}(t,e),t}(te);function ve(e){return(ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){return!t||"object"!==ve(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ge(e){return(ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function we(e,t){return(we=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ke=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=me(this,ge(t).call(this,Q.ConditionalExpression))).test=e,o.alternate=n,o.consequent=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&we(e,t)}(t,e),t}(te);function xe(e){return(xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){return!t||"object"!==xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t){return(Se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var je=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oe(this,Ee(t).call(this,Q.ExpressionStatement))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Se(e,t)}(t,e),t}(te);function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ce(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $e(e,t){return($e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ne=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ce(this,Pe(t).call(this,Q.Identifier))).name=e,n.allowNull=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$e(e,t)}(t,e),t}(te);function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ae(this,De(t).call(this,Q.Literal))).value=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,e),t}(te);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fe(e,t){return(Fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Re(this,Me(t).call(this,Q.LogicalExpression))).operator=e,o.left=n,o.right=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fe(e,t)}(t,e),t}(te);function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qe(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var He=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=qe(this,Ke(t).call(this,Q.MemberExpression))).object=e,o.property=n,o.computed=r,o.allowNull=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,e),t}(te);function We(e){return(We="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){return!t||"object"!==We(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Je=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ze(this,Ye(t).call(this,Q.ObjectExpression))).properties=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,e),t}(te);function Qe(e){return(Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xe(e,t){return!t||"object"!==Qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e){return(et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tt(e,t){return(tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Xe(this,et(t).call(this,Q.Program))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tt(e,t)}(t,e),t}(te);function rt(e){return(rt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){return!t||"object"!==rt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function it(e){return(it=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var at=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ot(this,it(t).call(this,Q.Property))).kind="init",e.key=null,e.value=null,e.computed=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,e),t}(te);function st(e){return(st="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ct(e,t){return!t||"object"!==st(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ft(e,t){return(ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ht=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ct(this,lt(t).call(this,Q.UnaryExpression))).prefix=!0,r.operator=e,r.arg=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ft(e,t)}(t,e),t}(te);function pt(e){return(pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yt(e,t){return!t||"object"!==pt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bt(e,t){return(bt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),yt(this,dt(t).call(this,Q.ArrayExpression))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bt(e,t)}(t,e),t}(te),mt={};function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}"+ - * / % === !== == != < > <= >= && || ! = |".split(" ").forEach((function(e){mt[e]=!0}));var wt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=S(J,t)}var t,n,r;return t=e,(n=[{key:"lex",value:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),o=mt[t],i=mt[n],u=mt[r];if(o||i||u){var a=u?r:i?n:t;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens}},{key:"is",value:function(e,t){return-1!==t.indexOf(e)}},{key:"peek",value:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)}},{key:"isNumber",value:function(e){return"0"<=e&&e<="9"&&"string"==typeof e}},{key:"isWhitespace",value:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e}},{key:"isIdentifierStart",value:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)}},{key:"isValidIdentifierStart",value:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e}},{key:"isIdentifierContinue",value:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)}},{key:"isValidIdentifierContinue",value:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)}},{key:"codePointAt",value:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888}},{key:"peekMultichar",value:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e}},{key:"isExpOperator",value:function(e){return"-"===e||"+"===e||this.isNumber(e)}},{key:"throwError",value:function(e,t,n){n=n||this.index;var r=a(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw new Error("Lexer Error: "+e+" at column"+r+" in expression ["+this.text+"].")}},{key:"readNumber",value:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=g(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})}},{key:"readIdent",value:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})}},{key:"readString",value:function(e){var t=this.index;this.index++;for(var n="",r=e,o=!1;this.index<this.text.length;){var i=this.text.charAt(this.index);if(r+=i,o){if("u"===i){var u=this.text.substring(this.index+1,this.index+5);u.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+u+"]"),this.index+=4,n+=String.fromCharCode(parseInt(u,16))}else n+=ESCAPE[i]||i;o=!1}else if("\\"===i)o=!0;else{if(i===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=i}this.index++}this.throwError("Unterminated quote",t)}}])&&gt(t.prototype,n),r&&gt(t,r),e}();function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var xt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lexer=t,this.options=S(J,n)}var t,n,r;return t=e,(n=[{key:"throwError",value:function(e,t){throw new Error("Syntax Error: Token '"+t.text+"'"+e+" at column "+(t.index+1)+" of the expression ["+this.text+"] starting at ["+this.text.substring(t.index)+"].")}},{key:"parse",value:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t}},{key:"program",value:function(){for(var e=new nt;;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.appendChild(this.expressionStatement()),!this.expect(";"))return e}},{key:"expressionStatement",value:function(){var e=new je;return e.appendChild(this.filterChain()),e}},{key:"filterChain",value:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e}},{key:"expression",value:function(){return this.assignment()}},{key:"isAssignable",value:function(e){return e.type===Q.Identifier||e.type===Q.MemberExpression}},{key:"assignment",value:function(){var e=this.ternary();if(this.expect("=")){if(!this.isAssignable(e))throw new Error("Trying to assign a value to a non l-value");e=new ue(e,this.assignment(),"=")}return e}},{key:"ternary",value:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),new ke(n,e,t)):n}},{key:"logicalOR",value:function(){for(var e=this.logicalAND();this.expect("||");)e=new Be("||",e,this.logicalAND());return e}},{key:"logicalAND",value:function(){for(var e=this.equality();this.expect("&&");)e=new Be("&&",e,this.equality());return e}},{key:"equality",value:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=new fe(e.text,t,this.relational());return t}},{key:"relational",value:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=new fe(e.text,t,this.additive());return t}},{key:"additive",value:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=new fe(e.text,t,this.multiplicative());return t}},{key:"multiplicative",value:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=new fe(e.text,t,this.unary());return t}},{key:"unary",value:function(){var e;return(e=this.expect("+","-","!"))?new ht(e.text,this.unary()):this.primary()}},{key:"primary",value:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.options.literals.hasOwnProperty(this.peek().text)?e=new Le(this.options.literals[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());this.peek("(","[",".")||this.peek("?")&&this.peekAhead(1,".");)this.expect("?")&&(e.allowNull=!0),"("===(t=this.expect("(","[",".")).text?(e=new be(e,this.parseArguments()),this.consume(")")):"["===t.text?(e=new He(e,this.expression(),!0),this.consume("]")):"."===t.text?e=new He(e,this.identifier(),!1):this.throwError("IMPOSSIBLE");return e}},{key:"filter",value:function(e){for(var t=[e],n=[this.identifier()];this.expect(".");)n.push(this.identifier());var r=n.map((function(e){return e.name})).join("."),o=new be(new Ne(r),t);for(o.filter=!0;this.expect(":");)t.push(this.expression());return o}},{key:"parseArguments",value:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e}},{key:"identifier",value:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),new Ne(e.text)}},{key:"constant",value:function(){return new Le(this.consume().value)}},{key:"arrayDeclaration",value:function(){var e=new vt;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.appendChild(this.expression())}while(this.expect(","));return this.consume("]"),e}},{key:"object",value:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e=new at,this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),new Je(t)}},{key:"consume",value:function(e){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t}},{key:"peekToken",value:function(){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);return this.tokens[0]}},{key:"peek",value:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)}},{key:"peekAhead",value:function(e,t,n,r,o){if(this.tokens.length>e){var i=this.tokens[e],u=i.text;if(u===t||u===n||u===r||u===o||!t&&!n&&!r&&!o)return i}return!1}},{key:"expect",value:function(e,t,n,r){var o=this.peek(e,t,n,r);return!!o&&(this.tokens.shift(),o)}}])&&kt(t.prototype,n),r&&kt(t,r),e}();function Ot(e){return(new wt).lex(e)}function Et(e){return new xt(new wt).parse(e)}function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var jt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"build",value:function(e){var t;switch(e.type){case Q.ExpressionStatement:t=this.buildExpression(e);break;case Q.AssignmentExpression:t=this.buildAssignment(e);break;case Q.ConditionalExpression:t=this.buildCondition(e);break;case Q.LogicalExpression:t=this.buildLogic(e);break;case Q.BinaryExpression:t=this.buildBinary(e);break;case Q.UnaryExpression:t=this.buildUnary(e);break;case Q.CallExpression:t=this.buildCall(e);break;case Q.MemberExpression:t=this.buildMember(e);break;case Q.Identifier:t=this.buildIdentifier(e);break;case Q.Literal:t=this.buildLiteral(e);break;case Q.ArrayExpression:t=this.buildArray(e);break;case Q.Property:t=this.buildProperty(e);break;case Q.ObjectExpression:t=this.buildObject(e)}return t}},{key:"buildExpression",value:function(e){var t,n=this;return e.childNodes.forEach((function(e){t=n.build(e)})),t}},{key:"buildAssignment",value:function(e){return M("{0}={1}",this.build(e.left),this.build(e.right))}},{key:"buildCondition",value:function(e){return M("{0}?{1}:{2}",this.build(e.test),this.build(e.alternate),this.build(e.consequent))}},{key:"buildLogic",value:function(e){var t=this.build(e.left),n=this.build(e.right);return M("{0}{1}{2}",t,e.operator,n)}},{key:"buildBinary",value:function(e){var t=this.build(e.left),n=this.build(e.right);return M("{0}{1}{2}",t,e.operator,n)}},{key:"buildUnary",value:function(e){var t=this.build(e.arg);return M("{0}{1}",e.operator,t)}},{key:"buildCall",value:function(e){var t=this,n="",r=e.args.map((function(e){return t.build(e)})),o=this.build(e.callee);return e.filter?(r.length>0&&(n=r.shift()),n+=" | "+o,r.length>0&&(n+=":"+r.join(":"))):n=M("{0}({1})",o,r.join(", ")),n}},{key:"buildMember",value:function(e){var t=this.build(e.object),n=this.build(e.property);return e.computed?M("{0}[{1}]",t,n):M("{0}.{1}",t,n)}},{key:"buildIdentifier",value:function(e){return e.name}},{key:"buildLiteral",value:function(e){return f(e.value)?M('"{0}"',e.value):e.value}},{key:"buildProperty",value:function(e){return M("{0}:{1}",this.build(e.key,{propertyKey:!0}),this.build(e.value))}},{key:"buildObject",value:function(e){var t=this;return M("{{0}}",e.properties.map((function(e){return t.build(e)})).join(", "))}},{key:"buildArray",value:function(e){var t=this;return M("[{0}]",e.childNodes.map((function(e){return t.build(e)})).join(","))}}])&&St(t.prototype,n),r&&St(t,r),e}();function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ct={allowNull:!1,assignInterceptor:null,locals:null},Pt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.options=S(Ct,n),this.program=null,this.builder=new jt,this.parser=t.$parser||{parseExpression:Et}}var t,n,r;return t=e,(n=[{key:"evaluate",value:function(e){var t=this.parser.parseExpression(e);return this.evaluateProgram(t)}},{key:"evaluateProgram",value:function(e){var t,n=this;return this.program=e,this.program.childNodes.forEach((function(e){return t=n.evaluateNode(e)})),t&&t.$null&&(t=null),t}},{key:"assign",value:function(e,t){var n=this.parser.parseExpression(e);return this.assignProgram(n,t)}},{key:"assignProgram",value:function(e,t){if(this.program=e,1!==this.program.childNodes.length)throw new Error(M("{0} is not a valid assignment",exp));var n=this.program.childNodes[0];if(n.childNodes.length>1)throw new Error(M("{0} is not a valid assignment",exp));var r=n.childNodes[0];if(r.type===Q.MemberExpression){var o=this.evaluateNode(r.object);if(null==o)throw new Error(M("{0} is null or undefined",this.builder.build(r.object)));if(null==(i=this.evaluateNode(r.property,{propertyKey:!r.computed})))throw new Error(M("{0} is null or undefined",this.builder.build(r.property)));null==this.options.assignInterceptor?o[i]=t:this.options.assignInterceptor.call(this,o,i,t)}else{if(r.type!==Q.Identifier)throw new Error(M("{0} is not a valid assignment",exp));var i=this.builder.build(r);null==this.options.assignInterceptor?this.scope[i]=t:this.options.assignInterceptor.call(this,this.scope,i,t)}}},{key:"evaluateNode",value:function(e,t){var n;switch(e.type){case Q.ExpressionStatement:n=this.evaluateExpression(e);break;case Q.AssignmentExpression:n=this.evaluateAssignment(e);break;case Q.ConditionalExpression:n=this.evaluateCondition(e);break;case Q.LogicalExpression:n=this.evaluateLogic(e);break;case Q.BinaryExpression:n=this.evaluateBinary(e);break;case Q.UnaryExpression:n=this.evaluateUnary(e);break;case Q.CallExpression:n=this.evaluateCall(e);break;case Q.MemberExpression:n=this.evaluateMember(e,t);break;case Q.Identifier:n=this.evaluateIdentifier(e,t);break;case Q.Literal:n=this.evaluateLiteral(e);break;case Q.ArrayExpression:n=this.evaluateArray(e);break;case Q.Property:n=this.evaluateProperty(e);break;case Q.ObjectExpression:n=this.evaluateObject(e)}return n}},{key:"evaluateExpression",value:function(e){var t,n=this;return e.childNodes.forEach((function(e){return t=n.evaluateNode(e)})),t}},{key:"evaluateAssignment",value:function(e){var t=this.evaluateNode(e.left,{assignmentLeft:!0}),n=this.evaluateNode(e.right);null==this.options.assignInterceptor?t.obj[t.prop]=n:this.options.assignInterceptor.call(this,t.obj,t.prop,n)}},{key:"evaluateCondition",value:function(e){return this.evaluateNode(e.test)?this.evaluateNode(e.alternate):this.evaluateNode(e.consequent)}},{key:"evaluateLogic",value:function(e){var t,n=this.evaluateNode(e.left),r=this.evaluateNode(e.right);switch(e.operator){case"&&":case"||":t=n&&r}return t}},{key:"evaluateBinary",value:function(e){var t,n=this.evaluateNode(e.left),r=this.evaluateNode(e.right);switch(e.operator){case"+":t=n+r;break;case"-":t=n-r;break;case"*":t=n*r;break;case"/":t=n/r;break;case"%":t=n%r;break;case"<":t=n<r;break;case">":t=n>r;break;case"<=":t=n<=r;break;case">=":t=n>=r;break;case"==":t=n==r;break;case"!=":t=n!=r;break;case"===":t=n===r;break;case"!==":t=n!==r}return t}},{key:"evaluateUnary",value:function(e){var t,n=this.evaluateNode(e.arg);switch(e.operator){case"+":t=n;break;case"-":t=-n;break;case"!":t=!n}return t}},{key:"evaluateCall",value:function(e){var t=this,n=e.args.map((function(e){return t.evaluateNode(e)})),r=this.evaluateNode(e.callee,{callee:!0});if(e.filter){var o=this.parser.resolveFilter(r.prop);if(null==o)throw new Error('Filter "'+r.prop+'" is not defined');return o.transform.apply(o,n)}var i=r.obj[r.prop];if(y(i))return i.apply(r.obj,n);throw new Error(r.prop+" is not a function")}},{key:"evaluateMember",value:function(e,t){var n=this.evaluateNode(e.object);return null==n&&(this.options.allowNull||e.object.allowNull)&&(n=new X),e.computed?n[this.evaluateNode(e.property)]:this.evaluateNode(e.property,{target:n,targetNode:e.object,callee:t&&t.callee,assignmentLeft:t&&t.assignmentLeft})}},{key:"evaluateIdentifier",value:function(e,t){var n;if(n=null==(t=t||{}).targetNode?this.scope:t.target,t.assignmentLeft||t.callee)return{obj:n,prop:e.name};if(t.propertyKey)return e.name;var r=n[e.name];return null==r&&this.options.locals&&(r=this.options.locals[e.name]),r}},{key:"evaluateLiteral",value:function(e){return e.value}},{key:"evaluateProperty",value:function(e){return{key:this.evaluateNode(e.key,{propertyKey:!0}),value:this.evaluateNode(e.value)}}},{key:"evaluateObject",value:function(e){var t=this,n={};return e.properties.forEach((function(e){var r=t.evaluateNode(e);n[r.key]=r.value})),n}},{key:"evaluateArray",value:function(e){var t=this,n=[];return e.childNodes.forEach((function(e){n.push(t.evaluateNode(e))})),n}}])&&_t(t.prototype,n),r&&_t(t,r),e}();function $t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tt(e,t,n){return t&&Nt(e.prototype,t),n&&Nt(e,n),e}var At=function(){function e(t,n){$t(this,e),this.callee=t,this.exp=n,this.children={}}return Tt(e,[{key:"createChild",value:function(t,n,r){return this.children[t]||(this.children[t]=new e(n,r)),this.children[t]}}]),e}(),Dt=function(){function e(t){$t(this,e),this.parser=t||{parseExpression:Et},this.program=null,this.accessor={},this.builder=new jt}return Tt(e,[{key:"createAccessor",value:function(e,t,n){return this.accessor[e]||(this.accessor[e]=new At(t,n)),this.accessor[e]}},{key:"analyse",value:function(e){var t=this.parser.parseExpression(e);return this.analyseProgram(t)}},{key:"analyseProgram",value:function(e){var t=this;return this.accessor={},this.program=e,e.childNodes.forEach((function(e){return t.analyseNode(e)})),this.accessor}},{key:"analyseNode",value:function(e,t){var n=null;switch(e.type){case Q.ExpressionStatement:this.analyseExpression(e);break;case Q.AssignmentExpression:this.analyseAssignment(e);break;case Q.ConditionalExpression:this.analyseCondition(e);break;case Q.LogicalExpression:this.analyseLogic(e);break;case Q.BinaryExpression:this.analyseBinary(e);break;case Q.UnaryExpression:this.analyseUnary(e);break;case Q.CallExpression:this.analyseCall(e);break;case Q.MemberExpression:n=this.analyseMember(e,t);break;case Q.Identifier:n=this.analyseIdentifier(e,t);break;case Q.Literal:n=this.analyseLiteral(e,t);break;case Q.ArrayExpression:this.analyseArray(e);break;case Q.Property:this.analyseProperty(e);break;case Q.ObjectExpression:this.analyseObject(e)}return n}},{key:"analyseExpression",value:function(e){var t=this;e.childNodes.forEach((function(e){return t.analyseNode(e)}))}},{key:"analyseAssignment",value:function(e){this.analyseNode(e.right)}},{key:"analyseCondition",value:function(e){this.analyseNode(e.test),this.analyseNode(e.alternate),this.analyseNode(e.consequent)}},{key:"analyseLogic",value:function(e){this.analyseNode(e.left),this.analyseNode(e.right)}},{key:"analyseBinary",value:function(e){this.analyseNode(e.left),this.analyseNode(e.right)}},{key:"analyseUnary",value:function(e){this.analyseNode(e.arg)}},{key:"analyseCall",value:function(e){var t=this;e.args.forEach((function(e){return t.analyseNode(e)})),e.filter||this.analyseNode(e.callee,{callee:!0})}},{key:"analyseMember",value:function(e,t){var n=this.analyseNode(e.object);if(e.computed){if(this.analyseNode(e.property,{callee:t&&t.callee}),e.property.type===Q.Literal)return n.createChild(e.property.value,t&&t.callee);var r=this.builder.build(e.property);return n.createChild(r,t&&t.callee,!0)}return this.analyseNode(e.property,{parent:n,callee:t&&t.callee})}},{key:"analyseIdentifier",value:function(e,t){var n=this.builder.build(e),r=t&&t.callee;return t&&t.parent?t.parent.createChild(n,r):this.createAccessor(n,r)}},{key:"analyseLiteral",value:function(e,t){var n=this.builder.build(e);if(t&&t.parent)return t.parent.createChild(n)}},{key:"analyseProperty",value:function(e){this.analyseNode(e.value)}},{key:"analyseObject",value:function(e){var t=this;e.properties.forEach((function(e){return t.analyseNode(e)}))}},{key:"analyseArray",value:function(e){var t=this;e.childNodes.forEach((function(e){return t.analyse(e)}))}}]),e}();function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t,n){return t&&Lt(e.prototype,t),n&&Lt(e,n),e}var Rt=function(){function e(t){Vt(this,e),this.target=t,this.keys={}}return It(e,[{key:"getHandlers",value:function(e){return this.keys[e]||(this.keys[e]=[]),this.keys[e]}},{key:"registerKey",value:function(e,t){this.getHandlers(e).push(t)}},{key:"unregisterKey",value:function(e,t){var n=this.getHandlers(e);if(null==t)n.length=0;else{var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"fireKey",value:function(e,t,n){this.getHandlers(e).forEach((function(e){e.call(n,t)}))}}]),e}(),Mt=function(){function e(){var t=this;Vt(this,e),this.listeners=[],this.offPropertyChanged=K.propertyChanged.on((function(e){return t.handlePropertyChanged(e.data)}))}return It(e,[{key:"handlePropertyChanged",value:function(e){var t=this.getListener(this.listeners,e.target);null!=t&&(t.fireKey(e.key,e),t.fireKey("*",e))}},{key:"getListener",value:function(e,t){var n,r=e.filter((function(e){return e.target===t}));return r.length>0&&(n=r[0]),n}},{key:"createListener",value:function(e,t){var n=new Rt(t);return e.push(n),n}},{key:"getOrCreateListener",value:function(e,t){var n=this.getListener(e,t);return null==n&&(n=this.createListener(e,t)),n}},{key:"watch",value:function(e,t,n){var r=this.getOrCreateListener(this.listeners,G(e));return r.registerKey(t,n),function(){r.unregisterKey(t,n)}}},{key:"destroy",value:function(){this.listeners.length=0,this.offPropertyChanged()}}]),e}();function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Bt=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handler=t,this.timeout=n,this.delayId=null}var t,n,r;return t=e,(n=[{key:"execute",value:function(e){var t=this;null==this.delayId&&(this.delayId=setTimeout((function(){t.delayId=null,t.handler.call(e)}),this.timeout))}},{key:"destroy",value:function(){null!=this.delayId&&clearTimeout(this.delayId)}}])&&Ft(t.prototype,n),r&&Ft(t,r),e}();function Ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kt(e,t,n){return t&&qt(e.prototype,t),n&&qt(e,n),e}var zt=function(){function e(t,n,r){Ut(this,e),this.exp=t,this.handler=n,this.value=r,this.newValue=r,this.valueChanged=!1,this.collectionChanged=!1}return Kt(e,[{key:"setNewValue",value:function(e){this.newValue=e,this.valueChanged=!0}},{key:"setCollectionChanged",value:function(e){this.collectionChanged=e}},{key:"hasChange",value:function(){return this.valueChanged||this.collectionChanged}},{key:"notify",value:function(e){var t=this.value,n=this.newValue,r=this.collectionChanged;this.value=this.newValue,this.collectionChanged=!1,this.handler.call(e,{oldValue:t,newValue:n,collectionChanged:r})}}]),e}(),Ht=function(){function e(t){Ut(this,e),this.scope=t,this.accessors={},this.listeners=[],this.watcher=new Mt,this.analyser=new Dt(t.$parser),this.delayer=new Bt(this.notify,16)}return Kt(e,[{key:"createListener",value:function(e,t,n){var r=new zt(e,t,n);return this.listeners.push(r),r}},{key:"removeListener",value:function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}},{key:"notify",value:function(){var e=this;this.listeners.forEach((function(t){t.hasChange()&&t.notify(e.scope)}))}},{key:"notifyChange",value:function(e,t){t?e.setNewValue(t):e.setCollectionChanged(!0),this.delayer.execute(this)}},{key:"getAccessor",value:function(e){var t=this.accessors[e];return t||(t=this.analyser.analyse(e),this.accessors[e]=t),O(!0,t)}},{key:"watch",value:function(e,t,n){var r=this,o=this.getAccessor(e),i=new Pt(this.scope,{allowNull:!0,locals:n}),u=this.createListener(e,t,i.evaluate(e));function a(e){C(e,(function(e){y(e.unwatch)&&(e.unwatch.call(this),e.unwatch=null),a(e.children)}))}return function t(o,s){c(s)&&C(o,(function(o,c){var l=s;o.exp&&(c=i.evaluate(c)),l===r.scope&&n&&n[c]&&(l=n),o.unwatch=r.watcher.watch(l,c,(function(n){a(o.children),t(o.children,n.data.newValue),r.notifyChange(u,i.evaluate(e))})),t(o.children,l[c])}))}(o,this.scope),function(){a(o),r.removeListener(u)}}},{key:"watchCollection",value:function(e,t,n){var r=arguments,o=this,i=this,u=new Pt(this.scope,{allowNull:!0,locals:n}),a=h(),l=this.watch(e,(function(){null!=a&&a.call(o),a=h(),t.apply(o,r)}),n),f=this.createListener(e,t,u.evaluate(e));function h(){var t=u.evaluate(e);if(c(t)||s(t))return i.watcher.watch(t,"*",(function(){i.notifyChange(f)}))}return function(){l.call(this),a&&a.call(this),i.removeListener(f)}}},{key:"destroy",value:function(){this.delayer.destroy(),this.watcher.destroy(),this.scope=null,this.listeners.length=0}}]),e}();function Wt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Zt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entity:6,processingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},Yt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeType=t,this.nodeName=n,this.nodeValue=r,this.childNodes=[],this.firstChild=null,this.lastChild=null,this.parentNode=null,this.previousSibling=null,this.nextSibling=null,this.nodeData={}}var t,n,r;return t=e,(n=[{key:"pushChild",value:function(e){e.parentNode=this,this.childNodes.push(e)}},{key:"buildSibling",value:function(){if(0!==this.childNodes.length){var e=this;1===this.childNodes.length?(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[0]):(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1],this.childNodes.forEach((function(t,n){0!==n?n!==e.childNodes.length-1?(t.previousSibling=e.childNodes[n-1],t.nextSibling=e.childNodes[n+1]):t.previousSibling=e.childNodes[n-1]:t.nextSibling=e.childNodes[n+1]}))),this.childNodes.forEach((function(e){e.buildSibling()}))}}},{key:"clearParentAndSibling",value:function(){this.parentNode=null,this.previousSibling=null,this.nextSibling=null}},{key:"remove",value:function(){null!=this.parentNode&&this.parentNode.removeChild(this)}},{key:"hasChildNodes",value:function(){return 0!==this.childNodes.length}},{key:"clearChildNodes",value:function(){this.childNodes.forEach((function(e){e.destroy()})),this.childNodes.length=0}},{key:"appendChild",value:function(e){return null!=e.parentNode&&e.parentNode.removeChild(e),e.parentNode=this,0===this.childNodes.length?this.firstChild=e:(this.lastChild.nextSibling=e,e.previousSibling=this.lastChild),e.compile(this.compileOptions),this.lastChild=e,this.childNodes.push(e),e}},{key:"insertBefore",value:function(e,t){null!=t.parentNode&&t.parentNode.removeChild(t);var n=this.childNodes.indexOf(e);if(-1===n)throw new Error("Ref node is not a child of specified node");return t.parentNode=this,null!=e.previousSibling&&(t.previousSibling=e.previousSibling,e.previousSibling.nextSibling=t),t.nextSibling=e,e.previousSibling=t,0===n&&(this.firstChild=t),t.compile(this.compileOptions),this.childNodes.splice(n,0,t),t}},{key:"insertAfter",value:function(e,t){return null==e.nextSibling?this.appendChild(t):this.insertBefore(e.nextSibling,t)}},{key:"removeChild",value:function(e){var t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Remove node is not a child of specified node");return null!=e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),null!=e.nextSibling&&(e.nextSibling.previousSibling=e.previousSibling),0===t&&(this.firstChild=e.nextSibling),t===this.childNodes.length-1&&(this.lastChild=e.previousSibling),e.clearParentAndSibling(),this.childNodes.splice(t,1),e}},{key:"replaceChild",value:function(e,t){null!=t.parentNode&&t.parentNode.removeChild(t);var n=this.childNodes.indexOf(e);if(-1===n)throw new Error("Ref node is not a child of specified node");return t.parentNode=this,t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,this.firstChild===e&&(this.firstChild=t),this.lastChild===e&&(this.lastChild=t),e.clearParentAndSibling(),t.compile(this.compileOptions),this.childNodes.splice(n,1,t),t}},{key:"cloneNode",value:function(e){var t=this.onCloneNode(e);return e&&(t.childNodes=this.childNodes.map((function(t){return t.cloneNode(e)})),t.buildSibling()),t}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy(),this.childNodes.map((function(e){e.destroy()})),this.remove(),this.clearParentAndSibling(),this.childNodes.length=0,this.firstChild=null,this.lastChild=null,this.ownerDocument=null}}])&&Wt(t.prototype,n),r&&Wt(t,r),e}();function Gt(e){return(Gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qt(e,t){return!t||"object"!==Gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xt(e){return(Xt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tn=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qt(this,Xt(t).call(this,Zt.attribute,e,n))).velm=null,r.quote='"',r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,e),n=t,(r=[{key:"setValue",value:function(e){this.nodeValue=e}},{key:"onCloneNode",value:function(){return new t(this.nodeName,this.nodeValue)}},{key:"onDestroy",value:function(){}}])&&Jt(n.prototype,r),o&&Jt(n,o),t}(Yt);function nn(e){return(nn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function on(e,t){return!t||"object"!==nn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function un(e){return(un=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function an(e,t){return(an=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var sn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),on(this,un(t).call(this,Zt.comment,"#comment",e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&an(e,t)}(t,e),n=t,(r=[{key:"onCloneNode",value:function(){return new t(this.nodeName,this.nodeValue)}}])&&rn(n.prototype,r),o&&rn(n,o),t}(Yt);function cn(e){return(cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fn(e,t){return!t||"object"!==cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hn(e){return(hn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pn(e,t){return(pn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var yn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fn(this,hn(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pn(e,t)}(t,e),n=t,(r=[{key:"isValidIdentifierStart",value:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e||"@"===e||":"===e||"*"===e}},{key:"isValidIdentifierContinue",value:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)||"-"===e||"."===e}},{key:"expectString",value:function(e){var t=e.length;return this.index+t<=this.text.length&&e===this.text.substr(this.index,t)}},{key:"readComment",value:function(e,t){var n=this.index;this.index+=e.length;for(var r="",o=e;this.index<this.text.length;){var i=this.text.charAt(this.index);if(o+=i,this.expectString(t))return o+=t,this.index+=t.length,void this.tokens.push({index:n,text:o,comment:!0,value:r});r+=i,this.index++}this.throwError("Unterminated comment",n)}},{key:"readText",value:function(){for(var e=this.index,t="";this.index<this.text.length;){var n=this.text.charAt(this.index),r=this.peek();if("<"===n&&(this.isIdentifierStart(r)||"/"===r)||this.expectString("\x3c!--"))break;t+=n,this.index++}this.tokens.push({index:e,text:t,textTag:!0})}},{key:"readTag",value:function(e,t,n,r){for(this.tokens.push({index:this.index,text:e,tag:!0,closing:n,begin:!0,doctype:r}),this.index+=e.length,this.readIdent();this.index<this.text.length;){var o=this.text.charAt(this.index);if(!n){var i=o+this.peek();if(i==="/"+t){this.tokens.push({index:this.index,text:i,tag:!0,closing:!0,end:!0}),this.index+=i.length;break}}if(o===t){this.tokens.push({index:this.index,text:t,tag:!0,closing:!!r||n,end:!0}),this.index+=t.length;break}this.isIdentifierStart(this.peekMultichar())?this.readIdent():'"'===o||"'"===o?this.readString(o):this.isWhitespace(o)?this.index++:"="===o?(this.tokens.push({index:this.index,text:"=",equal:!0}),this.index++):this.throwError("Unexpected next character ",this.index,this.index+1)}}},{key:"lex",value:function(e){this.text=e,this.index=0,this.tokens=[];for(var t=!!this.options.allowDocType;this.index<this.text.length;){var n=this.text.charAt(this.index),r=this.peek(),o=this.peek(2);this.expectString("\x3c!--")?this.readComment("\x3c!--","--\x3e"):"<"===n&&this.isIdentifierStart(r)?this.readTag("<",">",!1):this.expectString("</")&&this.isIdentifierStart(o)?this.readTag("</",">",!0):this.expectString("<!DOCTYPE")?t?this.readTag("<!",">",!0,!0):this.throwError("DOCTYPE is not allowed",this.index,this.index+1):this.readText()}return this.tokens}}])&&ln(n.prototype,r),o&&ln(n,o),t}(wt);function dn(e){return(dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vn(e,t){return!t||"object"!==dn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var wn=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),vn(this,mn(t).call(this,e,n))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,e),n=t,(r=[{key:"parse",value:function(e){this.index=0,this.text=e,this.tokens=this.lexer.lex(e);for(var t,n=new Dn,r=!!this.options.allowDocType;this.index<this.tokens.length;){var o=this.current();if(o.doctype)r?t?this.throwError("DOCTYPE only allow one",o):(t=this.doctype(),n.childNodes.push(t)):this.throwError("DOCTYPE is not allowed",o);else if(o.comment){var i=new sn(o.text);n.childNodes.push(i),this.next()}else o.textTag?(e=new Fn(o.text),n.childNodes.push(e),this.next()):o.tag&&o.begin?n.childNodes.push(this.element()):this.throwError("impossible",o)}return n.buildSibling(),n.childNodes}},{key:"doctype",value:function(){this.next();var e=new zn,t=this.current();return t.identifier?e.nodeValue=t.text:this.throwError(" Unexpected ",t),this.attrs(e).forEach((function(t){e.childNodes.push(t)})),(t=this.current()).tag&&t.end&&t.closing?this.next():this.throwError(" Unexpected ",t),e}},{key:"element",value:function(e){this.next();var t=new Dn,n=this.current();if(n.identifier?(t.nodeName=n.text,this.next()):this.throwError(" Unexpected ",n),this.attrs(t).forEach((function(e){t.pushAttr(e)})),(n=this.current()).tag&&n.end){if(this.next(),"input"===t.nodeName)return t.selfClosed=!0,t;n.closing||this.childElements(t).forEach((function(e){t.pushChild(e)}))}else this.throwError(" Unexpected ",n);return(n=this.current()).tag&&n.begin&&n.closing?(this.next(),(n=this.current()).identifier&&t.nodeName===n.text?(this.next(),(n=this.current()).tag&&n.end&&n.closing?this.next():this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n),t}},{key:"childElements",value:function(e){for(var t=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.closing)break;if(n.comment){var r=new sn(n.text);t.push(r),this.next()}else if(n.textTag){var o=new Fn(n.text);t.push(o),this.next()}else n.tag&&n.begin?t.push(this.element(e)):this.throwError(" Unexpected ",n)}return t}},{key:"attrs",value:function(e){for(var t=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.end)break;var r=new tn;n.identifier&&(r.nodeName=n.text,r.origin=n.text,this.next(),(n=this.current()).equal&&(this.next(),(n=this.current()).constant?(r.nodeValue=n.value,this.next()):this.throwError(" Unexpected ",n))),t.push(r)}return t}},{key:"current",value:function(){return this.index<this.tokens.length?this.tokens[this.index]:{}}},{key:"next",value:function(){this.index++}}])&&bn(n.prototype,r),o&&bn(n,o),t}(xt);function kn(e){return e=F(e),(new yn).lex(e)}function xn(e){return e=F(e),new wn(new yn).parse(e)}function On(e){return e.nodeType===Zt.element}function En(e){return e.nodeType===Zt.attribute}function Sn(e){return e.nodeType===Zt.text}function jn(e){return e.nodeType===Zt.comment}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Cn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"build",value:function(e){return Sn(e)?this.buildText(e):jn(e)?this.buildComment(e):this.buildElement(e)}},{key:"buildElement",value:function(e){var t=this,n=e.vattrs.map((function(e){return t.buildAttribute(e)})).join(" "),r=e.childNodes.map((function(e){return t.build(e)})).join("");n&&(n=" "+n);var o="<"+e.nodeName+n+">"+r;return e.selfClosed||(o+="</"+e.nodeName+">"),o}},{key:"buildAttribute",value:function(e){return e.nodeName+(null==e.nodeValue?"":"="+e.quote+e.nodeValue+e.quote)}},{key:"buildText",value:function(e){return e.nodeValue}},{key:"buildComment",value:function(e){return e.nodeValue}}])&&_n(t.prototype,n),r&&_n(t,r),e}();function Pn(e){return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nn(e,t){return!t||"object"!==Pn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tn(e){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function An(e,t){return(An=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Dn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Nn(this,Tn(t).call(this,Zt.element,e))).elm=null,n.vattrs=[],n.selfClosed=!1,n.builder=new Cn,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&An(e,t)}(t,e),n=t,(r=[{key:"pushAttr",value:function(e){e.velm=this,this.vattrs.push(e)}},{key:"hasAttr",value:function(){return 0!==this.vattrs.length}},{key:"getAttr",value:function(e){var t=this.vattrs.filter((function(t){return t.nodeName===e}));return t.length?t[0]:null}},{key:"setAttr",value:function(e,t){var n,r=this.vattrs.filter((function(t){return t.belongTo(e)}));return r.length>0?(n=r[0]).setValue(t):((n=new tn(e,t)).velm=this,n.compile(this.compileOptions)),this.vattrs.push(n),n}},{key:"removeAttr",value:function(e){var t=[],n=this;if(e instanceof tn){var r=this.vattrs.indexOf(e);-1!==r&&(t=n.vattrs.splice(r,1))}else this.vattrs.filter((function(t){return t.belongTo(e)})).forEach((function(e){var r=n.vattrs.indexOf(e);e.destroy(),t=n.vattrs.splice(r,1)}));return t.length>0?t[0]:null}},{key:"appendAttr",value:function(e){if(null!=e.velm)throw new Error("Current attribute is not new!");return e.velm=this,e.compile(this.compileOptions),this.vattrs.push(e),e}},{key:"getOuterTpl",value:function(){return this.builder.build(this)}},{key:"getInnerTpl",value:function(){var e=this;return this.childNodes.map((function(t){return e.builder.build(t)})).join("")}},{key:"setOuterTpl",value:function(e){var t=this;xn(e).forEach((function(e){e.parentNode=null,t.parentNode.insertBefore(t,e)})),t.parentNode.removeChild(t)}},{key:"setInnerTpl",value:function(e){var t=this;this.clearChildNodes(),xn(e).forEach((function(e){e.parentNode=null,t.appendChild(e)}))}},{key:"onCloneNode",value:function(){var e=new t(this.nodeName,this.nodeValue);return e.vattrs=this.vattrs.map((function(t){var n=t.cloneNode();return n.velm=e,n})),e}},{key:"onDestroy",value:function(){this.vattrs.forEach((function(e){e.destroy()})),this.vattrs.length=0}}])&&$n(n.prototype,r),o&&$n(n,o),t}(Yt);function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function In(e,t){return!t||"object"!==Vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Rn(e){return(Rn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=In(this,Rn(t).call(this,Zt.text,"#text",e))).elm=null,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(t,e),n=t,(r=[{key:"onCloneNode",value:function(){return new t(this.nodeName,this.nodeValue)}}])&&Ln(n.prototype,r),o&&Ln(n,o),t}(Yt);function Bn(e){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){return!t||"object"!==Bn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Un(this,qn(t).call(this,Zt.documentType))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,e),t}(Yt);function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Wn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t,this.program=null,this.unwatch=null,this.hasTranslation=!1}var t,n,r;return t=e,(n=[{key:"compute",value:function(e,t){return e.$eval(this.text,t)}},{key:"assign",value:function(e,t,n){e.$assign(this.text,t,n)}},{key:"watch",value:function(e,t,n){this.unwatch=e.$watch(this.text,t,n)}},{key:"destroy",value:function(){null!=this.unwatch&&this.unwatch()}}])&&Hn(t.prototype,n),r&&Hn(t,r),e}();function Zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Yn,Gn,Jn=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.text=n,this.locals=r,this.isExp=!1,this.logical=!1,this.assignment=!1,this.automation=null,this.value=null,this.oldValue=null,this.changed=!1,this.segments=[],this.expressions=[]}var t,n,r;return t=e,(n=[{key:"createExpression",value:function(e){var t=new Wn(e);return this.expressions.push(t),t}},{key:"compile",value:function(){if((this.logical||this.assignment)&&(this.isExp=!0),this.isExp)this.createExpression(this.text);else{for(var e,t=/{{([^}]*)}}/g,n=t.lastIndex,r=t.exec(this.text);null!=r;)r.index>n&&(e=this.text.substring(n,r.index),this.segments.push(e)),this.segments.push(this.createExpression(r[1])),n=t.lastIndex,r=t.exec(this.text);this.text.length>n&&(e=this.text.substring(n),this.segments.push(e))}}},{key:"link",value:function(){var e=this;this.assignment||this.logical||(this.detect(),this.expressions.forEach((function(t){t.watch(e.scope,(function(){e.detect(),e.patch()}),e.locals)})))}},{key:"detect",value:function(){var e=this.compute();this.value!=e&&(this.changed=!0,this.oldValue=this.value,this.value=e)}},{key:"compute",value:function(e){var t=this;return e=S(this.locals,e),this.isExp?this.expressions[0].compute(this.scope,e):this.segments.reduce((function(n,r){return f(r)?n+r:n+(r.compute(t.scope,e)||"")}),"")}},{key:"assign",value:function(e,t){if(t=S(this.locals,t),!this.isExp)throw new Error(this.text+" is not valid expression");this.expressions[0].assign(this.scope,e,t)}},{key:"registerAutomation",value:function(e){this.automation=e}},{key:"unregisterAutomation",value:function(e){this.automation===e&&(this.automation=null)}},{key:"patch",value:function(){this.changed&&null!=this.automation&&(this.changed=!1,this.automation.call(this,this.value,this.oldValue))}},{key:"destroy",value:function(){this.expressions.forEach((function(e){e.destroy()}))}}])&&Zn(t.prototype,n),r&&Zn(t,r),e}();function Qn(e){return Array.prototype.slice.call(e.childNodes,0)}function Xn(e,t){var n=e.parentNode;null!=n&&(n.insertBefore(t,e),n.removeChild(e))}function er(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function tr(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}Yn=".m-component{display:inherit;} .m-hide{display:none !important;}",(Gn=document.createElement("style")).appendChild(document.createTextNode(Yn)),document.getElementsByTagName("head")[0].appendChild(Gn);function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rr(e,t){return!t||"object"!==nr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function or(e){return(or=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ir(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ur(e,t)}function ur(e,t){return(ur=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ar(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t,n){return t&&sr(e.prototype,t),n&&sr(e,n),e}var lr=function(){function e(){ar(this,e),this.vnodes=[],this.bindings=[],this.directives=[],this.components=[]}return cr(e,[{key:"mount",value:function(e){(f(e)?document.querySelector(e):e).appendChild(this.content)}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy(),this.components.forEach((function(e){return e.$destroy()})),this.directives.forEach((function(e){return e.$destroy()})),this.bindings.forEach((function(e){return e.destroy()})),this.vnodes.forEach((function(e){return e.destroy()})),this.components.length=0,this.directives.length=0,this.bindings.length=0,this.vnodes.length=0}}]),e}(),fr=function(e){function t(){var e;return ar(this,t),(e=rr(this,or(t).call(this))).node=null,e}return ir(t,e),cr(t,[{key:"content",get:function(){return this.node}}]),t}(lr),hr=function(e){function t(){var e;return ar(this,t),(e=rr(this,or(t).call(this))).nodes=[],e}return ir(t,e),cr(t,[{key:"content",get:function(){var e=document.createDocumentFragment();return this.nodes.forEach((function(t){return e.appendChild(t)})),e}}]),cr(t,[{key:"onDestroy",value:function(){this.nodes.length=0}}]),t}(lr);function pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yr(e,t,n){return t&&pr(e.prototype,t),n&&pr(e,n),e}var dr="load unload change submit reset select blur focus abort keydown keypress keyup click dblclick mousedown mousemove mouseout mouseover mouseup".split(" "),br=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.locals=n,this.parser=t.$parser,this.view=null}return yr(e,[{key:"injector",get:function(){return this.scope.$injector}}]),yr(e,[{key:"newBinding",value:function(e){var t=new Jn(this.scope,e,this.locals);return this.view.bindings.push(t),t}},{key:"newComponent",value:function(e){var t=this.injector.createComponent(e);return this.scope.$appendChild(t),this.view.components.push(t),t}},{key:"newDirective",value:function(e){var t=this.injector.createDirective(e);return t.$$scope=this.scope,t}},{key:"recognizeComponent",value:function(e){return this.parser.resolveComponent(e.nodeName)}},{key:"recognizeDirective",value:function(e){return this.parser.resolveDirective(e.nodeData.name)}},{key:"render",value:function(e,t){var n=this,r=null!=t;return r?this.view=new fr:(t=document.createDocumentFragment(),this.view=new hr),this.view.vnodes=this.parser.parseTemplate(e),this.compileNodes(this.view.vnodes),this.linkNodes(this.view.vnodes).forEach((function(e){return t.appendChild(e)})),this.view.directives.forEach((function(e){return e.$postlink()})),r?this.view.node=t:Qn(t).forEach((function(e){return n.view.nodes.push(e)})),this.view}},{key:"compileNodes",value:function(e){var t=this;e.forEach((function(e){return t.compileNode(e)}))}},{key:"compileNode",value:function(e){Sn(e)?this.compileText(e):jn(e)?this.compileComment(e):this.compileElm(e)}},{key:"linkNodes",value:function(e){var t=this;return e.map((function(e){return t.linkNode(e)}))}},{key:"linkNode",value:function(e){return Sn(e)?this.linkText(e):jn(e)?this.linkComment(e):this.linkElm(e)}},{key:"compileElm",value:function(e){var t=this,n=e.nodeData;n.component=this.recognizeComponent(e);var r=[],o=e.vattrs.some((function(e){var o=e.nodeData;return t.compileAttr(e),null!=o.directive&&(r.push(o.directive),n.linker=o.linker,null!=n.linker)}));$(r,(function(e){return e.$priority})).forEach((function(e){return t.view.directives.push(e)})),n.directives=r,o||(n.component?n.slots=this.seekSlot(e):this.compileNodes(e.childNodes))}},{key:"compileAttr",value:function(e){var t,n=e.nodeName,r=e.nodeValue,o=e.nodeData;if(null!=r&&(t=this.newBinding(r),o.binding=t),n.startsWith("@")?(o.isEvent=!0,o.name=n.substr(1),o.isDomEvent=P(dr,(function(e){return e===o.name})),t&&(t.logical=!0)):n.startsWith(":")?(o.name=n.substr(1),t&&(t.isExp=!0)):n.startsWith("*")?(o.directive=!0,o.name=n.substr(1),t&&(t.isExp=!0)):o.name=n,o.directive){var i=this.recognizeDirective(e);if(!i)throw new Error("directive "+o.name+" is not defined");if(o.directive=this.newDirective(i),o.directive.$$vattr=e,null!=t&&(t.assignment=o.directive.$assignment),o.directive.$compile())return void(o.linker=o.directive)}if(null!=t){if(!o.isEvent&&!o.directive){var u=function(t){var n=e.velm.elm;o.name.startsWith("style")?R(n,o.name,t):n.setAttribute(o.name,t)};e.velm.nodeData.component?t.registerAutomation((function(t){var n=e.velm.nodeData.component,r=k(o.name,"-");n.$hasProperty(r)?n.$setProperty(r,t):u(t)})):t.registerAutomation(u)}t.compile()}}},{key:"compileText",value:function(e){e.nodeData.binding=this.newBinding(e.nodeValue),e.nodeData.binding.registerAutomation((function(t){var n,r=document.createTextNode(t);null==e.parentNode?null!=e.elm&&(n=e.elm.parentNode):n=e.parentNode.elm,null!=n&&(null==e.elm?n.appendChild(r):Xn(e.elm,r)),e.elm=r})),e.nodeData.binding.compile()}},{key:"compileComment",value:function(e){}},{key:"linkElm",value:function(e){var t=this,n=e.nodeData;if(null!=n.linker)return n.linker.$link();if(e.elm=document.createElement(e.nodeName),n.component){var r=this.newComponent(n.component);n.component=r,er(e.elm,"m-component"),e.vattrs.forEach((function(e){return t.linkAttr(e)})),r.$$velm=e,r.$serContainer(e.elm),r.$setSlot(n.slots),r.$render()}else e.vattrs.forEach((function(e){return t.linkAttr(e)})),e.childNodes.forEach((function(n){return e.elm.appendChild(t.linkNode(n))}));return e.elm}},{key:"linkAttr",value:function(e){var t=e.velm,n=t.elm,r=e.nodeData,o=r.binding;if(null!=o){if(r.isEvent){if(r.isDomEvent)n.addEventListener(r.name,(function(e){return o.compute(new B(e,n))}));else if(t.nodeData.component){var i=k(r.name,"-");t.nodeData.component.$bind(i,(function(e){return o.compute(new B(e,n))}))}}else o.link(),o.patch();r.directive&&o.registerAutomation((function(e,t){return r.directive.$change(e,t)}))}}},{key:"linkText",value:function(e){return e.nodeData.binding.link(),e.elm=document.createTextNode(e.nodeData.binding.value),e.elm}},{key:"linkComment",value:function(e){return document.createComment(e.nodeValue)}},{key:"seekSlot",value:function(e){var t={};return e.childNodes.forEach((function(e){if(On(e)){var n=e.getAttr("slot");n&&(t[n.nodeValue]=e.getInnerTpl())}})),t}}]),e}(),vr=0,mr=1,gr=2,wr=3;function kr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xr(e,t,n){return t&&kr(e.prototype,t),n&&kr(e,n),e}var Or=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.programs={},this.type={components:{},directives:{},filters:{}},this.filters={}}return xr(e,[{key:"injector",get:function(){return this.scope.$injector}},{key:"using",get:function(){return this.scope.$data.using}}]),xr(e,[{key:"parseExpression",value:function(e){var t=this.programs[e];return t||(t=Et(e),this.programs[e]=t),t}},{key:"parseTemplate",value:function(e){return xn(e)}},{key:"resolve",value:function(e,t,n){var r,o,i,u=this.scope.$data.namespace;return void 0!==t[e]?o=t[e]:(i=k(e,"-"),(r=this.injector.parseFullName(i,this.using)).cls?t[e]=r.cls:(o=this.injector[n](r.key,r.ns||u),t[e]=o)),o}},{key:"resolveComponent",value:function(e){return this.resolve(e,this.type.components,"getComponent")}},{key:"resolveDirective",value:function(e){return this.resolve(e,this.type.directives,"getDirective")}},{key:"resolveFilter",value:function(e){var t,n,r=this.filters;return void 0!==r[e]?t=r[e]:(n=this.resolve(e,this.type.filters,"getFilter"),t=this.injector.createFilter(n),r[e]=t),t}},{key:"destroy",value:function(){this.scope=null}}]),e}();function Er(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jr(e,t,n){return t&&Sr(e.prototype,t),n&&Sr(e,n),e}var _r=/^[a-z][a-zA-Z0-9]*$/,Cr=function(){function e(){Er(this,e),this.classContainer={},this.instanceContainer={}}return jr(e,[{key:"getClassContainer",value:function(e){return this.classContainer[e]||(this.classContainer[e]={}),this.classContainer[e]}},{key:"getInstanceContainer",value:function(e){return this.instanceContainer[e]||(this.instanceContainer[e]=[]),this.instanceContainer[e]}}]),e}(),Pr=new(function(){function e(){Er(this,e),this.nsContainer={},this.serviceStack=[]}return jr(e,[{key:"getNamespaceContainer",value:function(e){if(f(e))return e=g(e),this.nsContainer[e]||(this.nsContainer[e]=new Cr),this.nsContainer[e];throw new Error("namespace is required")}},{key:"checkKeyName",value:function(e){if(!_r.test(e))throw new Error(e+" is not a valid name")}},{key:"register",value:function(e,t,n){this.checkKeyName(t);var r=n.prototype.$$metadata.namespace,o=this.getNamespaceContainer(r).getClassContainer(e);if("automate"===r&&e===wr&&(t=M("m{0}",w(t[0])+(t.length>1?t.substr(1):""))),o[t])throw new Error(t+" is exist under namespace "+r);o[t]=n}},{key:"registerComponent",value:function(e,t){this.register(gr,e,t)}},{key:"registerDirective",value:function(e,t){this.register(wr,e,t)}},{key:"registerFilter",value:function(e,t){this.register(vr,e,t)}},{key:"registerService",value:function(e,t){this.register(mr,e,t)}},{key:"has",value:function(e,t,n){return null!=this.get(e,t,n)}},{key:"hasComponent",value:function(e,t){return this.has(gr,e,t)}},{key:"hasDirective",value:function(e,t){return this.has(wr,e,t)}},{key:"hasFilter",value:function(e,t){return this.has(vr,e,t)}},{key:"hasService",value:function(e,t){return this.has(mr,e,t)}},{key:"getFromGlobalNamespace",value:function(e,t){return this.getNamespaceContainer("automate").getClassContainer(e)[t]}},{key:"get",value:function(e,t,n){return this.getNamespaceContainer(n).getClassContainer(e)[t]||this.getFromGlobalNamespace(e,t)}},{key:"getComponent",value:function(e,t){return this.get(gr,e,t)}},{key:"getDirective",value:function(e,t){return this.get(wr,e,t)}},{key:"getFilter",value:function(e,t){return this.get(vr,e,t)}},{key:"getService",value:function(e,t){return this.get(mr,e,t)}},{key:"checkInstance",value:function(e,t){var n,r;switch(e){case gr:r="Component",n=Jr;break;case wr:r="Directive",n=Qr;break;case mr:r="Service",n=eo;break;case vr:r="Filter",n=Xr}if(n&&!n(t))throw new Error(M("object is a instance of {0}",r))}},{key:"resolveConstructor",value:function(e,t,n){var r;if(f(t)){if(null==(r=this.get(e,t,n)))throw new Error(M('can not find "{0}" in namespace "{1}"',t,n))}else{if(!y(t))throw new Error("Invalid parameter");r=t}return r}},{key:"create",value:function(e,t,n){var r=new(this.resolveConstructor(e,t,n));return this.checkInstance(e,r),r}},{key:"createSingleton",value:function(e,t,n){var r,o=this.resolveConstructor(e,t,n);n||(n=o.prototype.$$metadata.namespace);var i=this.getNamespaceContainer(n).getInstanceContainer(e),u=i.filter((function(e){return e instanceof o}));return u.length?r=u[0]:(r=new o,this.checkInstance(e,r),i.push(r)),r}},{key:"createComponent",value:function(e,t){return this.create(gr,e,t)}},{key:"createDirective",value:function(e,t){return this.create(wr,e,t)}},{key:"createFilter",value:function(e,t){return this.createSingleton(vr,e,t)}},{key:"createService",value:function(e,t){var n=this.resolveConstructor(mr,e,t);return n.prototype.$$metadata.nonShared?this.create(mr,n,t):this.createSingleton(mr,n,t)}},{key:"extractNsAndKey",value:function(e){var t=e.split(".");return{key:t.pop(),ns:t.length>0?t.join("."):"",cls:null}}},{key:"parseFullName",value:function(e,t){var n=this.extractNsAndKey(e);if(t)if(n.ns)t.hasOwnProperty(n.ns)&&(n.ns=t[n.ns]);else if(t.hasOwnProperty(e)){var r=t[e];f(r)?n=this.extractNsAndKey(r):n.cls=r}return n}},{key:"injectServices",value:function(e,t,n){var r,o=this,i=!1;if(n&&(r=M("{0}.{1}",g(t.namespace),t.key),i=-1!==this.serviceStack.indexOf(r),this.serviceStack.push(r),i)){var u=M("Loop dependency: {0}",this.serviceStack.join(" -> "));throw this.serviceStack.length=0,new Error(u)}t&&c(t.inject)&&C(t.inject,(function(n,r){if(f(n)){var i=o.parseFullName(n,t.using);e[r]=o.createService(i.key,i.ns||t.namespace)}else e[r]=o.createService(n)})),n&&this.serviceStack.pop()}}]),e}());function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,t,n){return t&&$r(e.prototype,t),n&&$r(e,n),e}function Tr(e){this.$$velm=null,this.$$parent=null,this.$$children=[],this.$$mainView=null,this.$parser=new Or(this),this.$observer=new Ht(this),this.$data=S(this.$$metadata,e),this.$container=document.createElement(x(this.$data.key,"-")),this.slots={},this.events={},this.props=this.$delegate({}),this.state=this.$delegate({}),Pr.injectServices(this,this.$data)}var Ar=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Tr.call(this,t)}return Nr(e,[{key:"$delegate",value:function(e){return new Proxy(e,Z)}},{key:"$setSlot",value:function(e){this.slots=e||{}}},{key:"$serContainer",value:function(e){this.$container=e}},{key:"$setState",value:function(e){this.state=this.$delegate(e)}},{key:"$setProps",value:function(e){this.props=this.$delegate(e)}},{key:"$injector",get:function(){return Pr}}]),Nr(e,[{key:"$hasProperty",value:function(e){return L(this.props,e)}},{key:"$getProperty",value:function(e){return I(this.props,e)}},{key:"$setProperty",value:function(e,t){var n=I(this.props,e);n!==t&&(R(this.props,e,t),this.onPropertyChanged&&this.onPropertyChanged(e,t,n))}},{key:"$hasMessage",value:function(e){return L(this.events,e)}},{key:"$bind",value:function(e,t){var n=I(this.events,e);if(!z(n))throw new Error(M('"{0}" is not a valid event',e));n.on(t)}},{key:"$unbind",value:function(e,t){var n=I(this.events,e);z(n)&&n.off(t)}},{key:"$watch",value:function(e,t,n){return this.$observer.watch(e,t,n)}},{key:"$watchCollection",value:function(e,t,n){return this.$observer.watchCollection(e,t,n)}},{key:"$eval",value:function(e,t){return new Pt(this,{locals:t}).evaluate(e)}},{key:"$assign",value:function(e,t,n){return new Pt(this,{locals:n}).assign(e,t)}},{key:"$getTemplate",value:function(){var e=this.$data;if(f(e.template))return e.template;if(f(e.templateId)){var t=document.getElementById(e.templateId);if(null!=t)return t.innerHTML}return""}},{key:"$render",value:function(){var e=this.$getTemplate();return this.$$mainView=new br(this).render(e,this.$container),this.$$mainView}},{key:"$mount",value:function(e){(f(e)?document.querySelector(e):e).appendChild(this.$container)}},{key:"$unmount",value:function(){var e,t;e=this.$container,null!=(t=e.parentNode)&&t.removeChild(e)}},{key:"$appendChild",value:function(e){this.$$children.push(e),e.$$parent=this}},{key:"$removeChild",value:function(e){var t=this.$$children.indexOf(e);-1!==t&&(this.$$children.splice(t,1),e.$$parent=null)}},{key:"$destroy",value:function(){this.$unmount(),this.$observer.destroy(),null!=this.$$mainView&&this.$$mainView.destroy(),this.onDestroy&&this.onDestroy(),null!=this.$$parent&&this.$$parent.$removeChild(this)}}]),e}();function Dr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vr(e,t,n){return t&&Dr(e.prototype,t),n&&Dr(e,n),e}function Lr(e){this.$$scope=null,this.$$vattr=null,this.$priority=9,this.$assignment=!1,this.$placeholder=null,this.$data=S(this.$$metadata,e),Pr.injectServices(this,this.$data)}var Ir=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Lr.call(this,t)}return Vr(e,[{key:"$key",get:function(){return this.$$metadata.key}},{key:"$namespace",get:function(){return this.$$metadata.namespace}},{key:"$scope",get:function(){return this.$$scope}},{key:"$renderer",get:function(){return this.$$scope.$renderer}},{key:"$element",get:function(){return this.$$vattr.velm.elm}},{key:"$binding",get:function(){return this.$$vattr.nodeData.binding}},{key:"$component",get:function(){return this.$$vattr.velm.nodeData.component}}]),Vr(e,[{key:"$compile",value:function(){return this.onCompile&&this.onCompile(this.$$vattr.velm,this.$$vattr)}},{key:"$link",value:function(){return this.onLink&&this.onLink(this.$scope)}},{key:"$postlink",value:function(){this.afterLink&&this.afterLink(),null!=this.$binding&&this.$change(this.$binding.value,this.$binding.oldValue)}},{key:"$change",value:function(e,t){this.onChange&&this.onChange(e,t)}},{key:"$destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"$$searchDirective",value:function(e,t,n){n||(n=this.$namespace);var r=e.nodeData.directives.filter((function(e){return e.$key===t&&e.$namespace===n}));return r.length?r[0]:null}},{key:"$seekDirective",value:function(e,t){var n=this.$$vattr.velm;return this.$$searchDirective(n,e,t)}},{key:"$seekUpDirective",value:function(e,t){var n=this.$$vattr.velm.parentNode;return this.$$searchDirective(n,e,t)}},{key:"$removeElement",value:function(){if(null!=this.$element.parentNode){if(null==this.$placeholder)throw new Error("you must define element placeholder!");Xn(this.$element,this.$placeholder)}}},{key:"$appendElement",value:function(){if(null==this.$element.parentNode){if(null==this.$placeholder)throw new Error("you must define element placeholder!");Xn(this.$placeholder,this.$element)}}},{key:"$hideElement",value:function(){er(this.$element,"m-hide")}},{key:"$showElement",value:function(){tr(this.$element,"m-hide")}},{key:"$eval",value:function(e,t){return t=S(this.$binding.locals,t),this.$scope.$eval(e,t)}},{key:"$assign",value:function(e,t,n){return n=S(this.$binding.locals,n),this.$scope.$assign(e,t)}},{key:"$render",value:function(e,t){return new br(this.$scope,t).render(e)}}]),e}();function Rr(e){this.$data=S(this.$$metadata,e),Pr.injectServices(this,this.$data)}var Mr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Rr.call(this,t)};function Fr(e){this.$data=S(this.$$metadata,e),Pr.injectServices(this,this.$data,!0)}var Br=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fr.call(this,t)};function Ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var qr=/^[a-z][a-zA-Z0-9]*$/,Kr=function(e){Tr.call(this,e)};Kr.prototype=Ar.prototype;var zr=function(e){Lr.call(this,e)};zr.prototype=Ir.prototype;var Hr=function(e){Rr.call(this,e)};Hr.prototype=Mr.prototype;var Wr=function(e){Fr.call(this,e)};Wr.prototype=Br.prototype;var Zr,Yr=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"rename",value:function(e,t){if(qr.test(t)){var n=w(t[0]);switch(t.length>0&&(n+=t.substr(1)),e){case gr:n+="Component";break;case wr:n+="Directive";break;case vr:n+="Filter";break;case mr:n+="Service"}return n}throw new Error(t+"is not a valid name")}},{key:"make",value:function(e,t,n,r){var o,i=this.rename(e,t);for(var u in o=new Function("onConstruct",'"use strict";return function '+i+"(){onConstruct.call(this);};")((function(){y(o.super)&&o.super.call(this),y(n.construct)&&n.construct.call(this,q)})),y(n.extends)&&V(o,n.extends),n)n.hasOwnProperty(u)&&"extends"!==u&&"construct"!==u&&(o.prototype[u]=n[u]);return r.key=t,o.prototype.$$metadata=r,o}},{key:"makeComponent",value:function(e,t,n){return t=S({extends:Kr},t),this.make(gr,e,t,n)}},{key:"makeDirective",value:function(e,t,n){return t=S({extends:zr},t),this.make(wr,e,t,n)}},{key:"makeFilter",value:function(e,t,n){return t=S({extends:Hr},t),this.make(vr,e,t,n)}},{key:"makeService",value:function(e,t,n){return t=S({extends:Wr},t),this.make(mr,e,t,n)}}])&&Ur(t.prototype,n),r&&Ur(t,r),e}());function Gr(e){function t(t){return S({namespace:e},t)}return{component:function(e,n,r){return function(e,t,n){var r=Yr.makeComponent(e,t,n);return Pr.registerComponent(e,r),r}(e,n,t(r))},directive:function(e,n,r){return function(e,t,n){var r=Yr.makeDirective(e,t,n);return Pr.registerDirective(e,r),r}(e,n,t(r))},service:function(e,n,r){return function(e,t,n){var r=Yr.makeService(e,t,n);return Pr.registerService(e,r),r}(e,n,t(r))},filter:function(e,n,r){return function(e,t,n){var r=Yr.makeFilter(e,t,n);return Pr.registerFilter(e,r),r}(e,n,t(r))},render:function(t,n,r){var o,i=document.querySelector(t),u=new(Yr.makeComponent("automateApp",n,S({namespace:e,template:i.innerHTML},r)));Qn(o=i).forEach((function(e){o.removeChild(e)})),u.$render().mount(i)}}}function Jr(e){return e instanceof Ar}function Qr(e){return e instanceof Ir}function Xr(e){return e instanceof Mr}function eo(e){return e instanceof Br}function to(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,Pr.registerComponent(n,t)}}function no(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,Pr.registerDirective(n,t)}}function ro(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,Pr.registerFilter(n,t)}}function oo(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,Pr.registerService(n,t)}}function io(e){return(io="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ao(e,t){return!t||"object"!==io(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function so(e){return(so=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var lo;no({namespace:"automate",key:"bind"})(Zr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ao(this,so(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$element.innerText=e}}])&&uo(n.prototype,r),o&&uo(n,o),t}(Ir));function fo(e){return(fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function po(e,t){return!t||"object"!==fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yo(e){return(yo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bo(e,t){return(bo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vo;no({namespace:"automate",key:"bindHtml"})(lo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),po(this,yo(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bo(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$element.innerHTML=e}}])&&ho(n.prototype,r),o&&ho(n,o),t}(Ir));function mo(e){return(mo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function go(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wo(e,t){return!t||"object"!==mo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ko(e){return(ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Oo;no({namespace:"automate",key:"repeat"})(vo=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=wo(this,ko(t).call(this))).itemExp="",e.itemsExp="",e.itemTemplate="",e.itemViews=new Map,e.unwatchCollection=null,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(t,e),n=t,(r=[{key:"onCompile",value:function(e,t){var n=t.nodeValue,r=/^([a-z_]+\w+)\s+in\s+(.+)$/i.exec(n);if(null==r)throw new Error("m-repeat: parameter is not valid");return this.itemExp=r[1],this.itemsExp=r[2],e.removeAttr(t),this.itemTemplate=e.getOuterTpl(),!0}},{key:"onLink",value:function(e){var t=this,n=document.createDocumentFragment(),r=document.createComment("start: m-repeat"),o=document.createComment("end: m-repeat");return n.appendChild(r),n.appendChild(this.render(e)),n.appendChild(o),this.unwatchCollection=e.$watchCollection(this.itemsExp,(function(){var n,i,u,a=t.render(e);i=o,Qn(u=(n=r).parentNode).forEach((function(e){e.previousSibling===n&&e!==i&&u.removeChild(e),e.nextSibling===i&&e!==n&&u.removeChild(e)})),o.parentNode.insertBefore(a,o)})),n}},{key:"render",value:function(e){var t=this,n=e.$eval(this.itemsExp),r=document.createDocumentFragment(),o=new Map;return C(n,(function(e,n){var i=t.getViewFromBuffer(t.itemViews,e);if(!i){var u={};u.$key=n,u.$index=n,u[t.itemExp]=e,i=t.$render(t.itemTemplate,u)}t.setViewToBuffer(o,e,i),r.appendChild(i.content)})),this.itemViews.forEach((function(e){e.forEach((function(e){e.destroy()}))})),this.itemViews=o,r}},{key:"getViewFromBuffer",value:function(e,t){var n;if(e.has(t)){var r=e.get(t);r.length?n=r.shift():e.delete(t)}return n}},{key:"setViewToBuffer",value:function(e,t,n){var r;e.has(t)?r=e.get(t):(r=[],e.set(t,r)),r.push(n)}},{key:"onDestroy",value:function(){this.itemViews.forEach((function(e){return e.forEach((function(e){return e.destroy()}))})),this.unwatchCollection&&this.unwatchCollection()}}])&&go(n.prototype,r),o&&go(n,o),t}(Ir));function Eo(e){return(Eo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function So(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jo(e,t){return!t||"object"!==Eo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _o(e){return(_o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Co(e,t){return(Co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Po;no({namespace:"automate",key:"model"})(Oo=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=jo(this,_o(t).call(this))).viewValue=null,e.modelValue=null,e.parsers=[],e.formatters=[],e.viewChangeListeners=[],e.validators=[],e.status={feedback:"",pristine:!0,dirty:!1,valid:!0,invalid:!1},e.options={css:{pristine:"n-pristine",dirty:"n-dirty",valid:"n-valid",invalid:"n-invalid"}},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Co(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.commitModelValue(e)}},{key:"afterLink",value:function(){var e=this,t=this.$element.name;t&&(this.$scope.state[t]=this.status),null!=this.$component?this.$component.$bind("change",(function(t){return e.commitViewValue(t.data.newvalue)})):this.$element.addEventListener("input",(function(t){return e.commitViewValue(t.target.value)}))}},{key:"onDestroy",value:function(){}},{key:"commitModelValue",value:function(e){if(this.modelValue!==e){var t=this;this.validators.forEach((function(n){n.call(t,e,this.modelValue)})),this.modelValue=e,this.formatters.forEach((function(n){e=n.call(t,e)})),this.viewValue!==e&&(this.viewValue=e,null!=this.$component?this.$component.$setProperty("value",e):this.$element.value=e,this.updateElmCssClass())}}},{key:"commitViewValue",value:function(e){if(this.viewValue!==e){var t=this;this.markDirtyStatus(!0),this.viewChangeListeners.forEach((function(n){n.call(t,e,t.viewValue)})),this.viewValue=e,this.parsers.forEach((function(n){e=n.call(t,e)})),this.modelValue!==e&&(this.validators.forEach((function(n){n.call(t,e,t.modelValue)})),this.modelValue=e,this.$binding.assign(e))}}},{key:"updateElmCssClass",value:function(){var e=this.$element,t=this.options.css;this.status.dirty?(e.classList.add(t.dirty),e.classList.remove(t.pristine)):(e.classList.add(t.pristine),e.classList.remove(t.dirty)),this.status.valid?(e.classList.add(t.valid),e.classList.remove(t.invalid)):(e.classList.add(t.invalid),e.classList.remove(t.valid))}},{key:"markDirtyStatus",value:function(e){this.status.dirty=e,this.status.pristine=!e,this.updateElmCssClass()}},{key:"markValidStatus",value:function(e,t){this.status.valid=e,this.status.invalid=!e,this.status.feedback=t,this.updateElmCssClass()}}])&&So(n.prototype,r),o&&So(n,o),t}(Ir));function $o(e){return($o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function No(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function To(e,t){return!t||"object"!==$o(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ao(e){return(Ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Do(e,t){return(Do=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Vo;no({namespace:"automate",key:"hide"})(Po=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),To(this,Ao(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Do(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this[e?"$hideElement":"$showElement"]()}}])&&No(n.prototype,r),o&&No(n,o),t}(Ir));function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ro(e,t){return!t||"object"!==Lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mo(e){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fo(e,t){return(Fo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}no({namespace:"automate",key:"show"})(Vo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ro(this,Mo(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fo(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this[e?"$showElement":"$hideElement"]()}}])&&Io(n.prototype,r),o&&Io(n,o),t}(Ir));function Bo(e){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qo(e,t){return!t||"object"!==Bo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ko(e){return(Ko=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zo(e,t){return(zo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ho,Wo=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=qo(this,Ko(t).call(this))).key=e,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zo(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){e?this.$element.hasAttribute(this.key)||this.$element.setAttribute(this.key,""):this.$element.hasAttribute(this.key)&&this.$element.removeAttribute(this.key)}}])&&Uo(n.prototype,r),o&&Uo(n,o),t}(Ir);function Zo(e){return(Zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yo(e,t){return!t||"object"!==Zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Go(e){return(Go=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jo(e,t){return(Jo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qo;no({namespace:"automate",key:"checked"})(Ho=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yo(this,Go(t).call(this,"checked"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jo(e,t)}(t,e),t}(Wo));function Xo(e){return(Xo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){return!t||"object"!==Xo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ni(e,t){return(ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ri;no({namespace:"automate",key:"disabled"})(Qo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ei(this,ti(t).call(this,"disabled"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ni(e,t)}(t,e),t}(Wo));function oi(e){return(oi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ii(e,t){return!t||"object"!==oi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var si;no({namespace:"automate",key:"readonly"})(ri=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ii(this,ui(t).call(this,"readonly"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(t,e),t}(Wo));function ci(e){return(ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function li(e,t){return!t||"object"!==ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fi(e){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pi;no({namespace:"automate",key:"selected"})(si=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),li(this,fi(t).call(this,"selected"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(t,e),t}(Wo));function yi(e){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(e,t){return!t||"object"!==yi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gi,wi=no({namespace:"automate",key:"class"})(pi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bi(this,vi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e,t){this.skipCurrentElm()||(t&&tr(this.$element,t.join(" ")),e&&er(this.$element,e.join(" ")))}},{key:"skipCurrentElm",value:function(){return!1}}])&&di(n.prototype,r),o&&di(n,o),t}(Ir))||pi;function ki(e){return(ki="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oi(e,t){return!t||"object"!==ki(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Si(e,t){return(Si=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ji;no({namespace:"automate",key:"classEven"})(gi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Oi(this,Ei(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Si(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!0&this.$eval("$index")}}])&&xi(n.prototype,r),o&&xi(n,o),t}(wi));function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $i(e){return($i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ti;no({namespace:"automate",key:"classOdd"})(ji=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Pi(this,$i(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!1&this.$eval("$index")}}])&&Ci(n.prototype,r),o&&Ci(n,o),t}(wi));function Ai(e){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vi(e,t){return!t||"object"!==Ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ri,Mi=no({namespace:"automate",key:"style"})(Ti=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vi(this,Li(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e,t){if(!this.skipCurrentElm()){var n=this;t&&C(t,(function(e,t){n.$element.style[t]=""})),c(e)&&C(e,(function(e,t){n.$element.style[t]=e}))}}},{key:"skipCurrentElm",value:function(){return!1}}])&&Di(n.prototype,r),o&&Di(n,o),t}(Ir))||Ti;function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qi(e){return(qi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ki(e,t){return(Ki=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zi;no({namespace:"automate",key:"styleEven"})(Ri=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ui(this,qi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ki(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!0&this.$eval("$index")}}])&&Bi(n.prototype,r),o&&Bi(n,o),t}(Mi));function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zi(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gi(e,t){return(Gi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ji;no({namespace:"automate",key:"styleOdd"})(zi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Zi(this,Yi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gi(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!1&this.$eval("$index")}}])&&Wi(n.prototype,r),o&&Wi(n,o),t}(Mi));function Qi(e){return(Qi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eu(e,t){return!t||"object"!==Qi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tu(e){return(tu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nu(e,t){return(nu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ru;no({namespace:"automate",key:"if"})(Ji=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=eu(this,tu(t).call(this))).$placeholder=document.createComment("n-if"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nu(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this[e?"$appendElement":"$removeElement"]()}}])&&Xi(n.prototype,r),o&&Xi(n,o),t}(Ir));function ou(e){return(ou="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uu(e,t){return!t||"object"!==ou(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function au(e){return(au=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function su(e,t){return(su=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var cu;no({namespace:"automate",key:"switch"})(ru=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=uu(this,au(t).call(this))).value=null,e.matchCount=0,e.changed=new q,e.defaultMatched=!0,e.matchDefault=new q,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&su(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.value=e,this.changed.fire()}},{key:"plusMatch",value:function(){this.matchCount++,this.checkDefault()}},{key:"minusMatch",value:function(){this.matchCount--,this.checkDefault()}},{key:"checkDefault",value:function(){var e=this.matchCount<=0;this.defaultMatched!==e&&(this.defaultMatched=e,this.matchDefault.fire())}}])&&iu(n.prototype,r),o&&iu(n,o),t}(Ir));function lu(e){return(lu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hu(e,t){return!t||"object"!==lu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pu(e){return(pu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yu(e,t){return(yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var du;no({namespace:"automate",key:"switchDefault"})(cu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=hu(this,pu(t).call(this))).switchCtrl=null,e.$placeholder=document.createComment("switch-default"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yu(e,t)}(t,e),n=t,(r=[{key:"afterLink",value:function(){var e=this;if(this.switchCtrl=this.$seekUpDirective("switch"),null==this.switchCtrl)throw new Error("Require m-switch directive");this.switchCtrl.matchDefault.on((function(){e[e.switchCtrl.defaultMatched?"$appendElement":"$removeElement"]()})),this.switchCtrl.defaultMatched||this.$removeElement()}}])&&fu(n.prototype,r),o&&fu(n,o),t}(Ir));function bu(e){return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mu(e,t){return!t||"object"!==bu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gu(e){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wu(e,t){return(wu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ku;no({namespace:"automate",key:"switchWhen"})(du=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=mu(this,gu(t).call(this))).value=null,e.matched=!1,e.switchCtrl=null,e.changed=new q,e.$placeholder=document.createComment("switch-when"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wu(e,t)}(t,e),n=t,(r=[{key:"afterLink",value:function(){var e=this;if(this.switchCtrl=this.$seekUpDirective("switch"),null==this.switchCtrl)throw new Error("Require m-switch directive");this.switchCtrl.changed.on((function(){e.render()}))}},{key:"onChange",value:function(e){this.value=e,this.render()}},{key:"render",value:function(){var e=this.switchCtrl.value===this.value;this.matched!=e&&(this.matched=e,e?this.switchCtrl.plusMatch():this.switchCtrl.minusMatch()),this[e?"$appendElement":"$removeElement"]()}}])&&vu(n.prototype,r),o&&vu(n,o),t}(Ir));function xu(e){return(xu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eu(e,t){return!t||"object"!==xu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Su(e){return(Su=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ju(e,t){return(ju=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}to({namespace:"automate",key:"slot"})(ku=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Eu(this,Su(t).call(this))).props.name="",e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ju(e,t)}(t,e),n=t,(r=[{key:"$render",value:function(){var e=this.$$parent.slots[this.props.name];e&&(this.$$mainView=new br(this.$$parent).render(e,this.$container))}},{key:"onDestroy",value:function(){this.$$mainView&&this.$$mainView.destroy()}}])&&Ou(n.prototype,r),o&&Ou(n,o),t}(Ar));n.d(t,"isUndefined",(function(){return u})),n.d(t,"isDefined",(function(){return a})),n.d(t,"isObject",(function(){return c})),n.d(t,"isBlankObject",(function(){return l})),n.d(t,"isNumber",(function(){return h})),n.d(t,"isDate",(function(){return p})),n.d(t,"isFunction",(function(){return y})),n.d(t,"isRegExp",(function(){return d})),n.d(t,"isBoolean",(function(){return b})),n.d(t,"isArray",(function(){return s})),n.d(t,"isString",(function(){return f})),n.d(t,"isFormData",(function(){return v})),n.d(t,"toNumber",(function(){return m})),n.d(t,"lowercase",(function(){return g})),n.d(t,"uppercase",(function(){return w})),n.d(t,"convertToHumpName",(function(){return k})),n.d(t,"convertFromHumpName",(function(){return x})),n.d(t,"copy",(function(){return O})),n.d(t,"extend",(function(){return E})),n.d(t,"merge",(function(){return S})),n.d(t,"forEach",(function(){return C})),n.d(t,"some",(function(){return P})),n.d(t,"remove",(function(){return A})),n.d(t,"concat",(function(){return T})),n.d(t,"orderBy",(function(){return $})),n.d(t,"orderByDescending",(function(){return N})),n.d(t,"object",(function(){return D})),n.d(t,"inherit",(function(){return V})),n.d(t,"hasProperty",(function(){return L})),n.d(t,"getProperty",(function(){return I})),n.d(t,"setProperty",(function(){return R})),n.d(t,"format",(function(){return M})),n.d(t,"escapeHtml",(function(){return F})),n.d(t,"Local",(function(){return B})),n.d(t,"Message",(function(){return q})),n.d(t,"events",(function(){return K})),n.d(t,"isMessage",(function(){return z})),n.d(t,"isProxy",(function(){return Y})),n.d(t,"getTarget",(function(){return G})),n.d(t,"handler",(function(){return Z})),n.d(t,"Observer",(function(){return Ht})),n.d(t,"parseOptions",(function(){return J})),n.d(t,"AST",(function(){return Q})),n.d(t,"NullExpressionNode",(function(){return X})),n.d(t,"AstNode",(function(){return te})),n.d(t,"AssignmentExpressionNode",(function(){return ue})),n.d(t,"BinaryExpressionNode",(function(){return fe})),n.d(t,"CallExpressionNode",(function(){return be})),n.d(t,"ConditionalExpressionNode",(function(){return ke})),n.d(t,"ExpressionStatementNode",(function(){return je})),n.d(t,"IdentifierNode",(function(){return Ne})),n.d(t,"LiteralNode",(function(){return Le})),n.d(t,"LogicalExpressionNode",(function(){return Be})),n.d(t,"MemberExpressionNode",(function(){return He})),n.d(t,"ObjectExpressionNode",(function(){return Je})),n.d(t,"ProgramNode",(function(){return nt})),n.d(t,"PropertyNode",(function(){return at})),n.d(t,"UnaryExpressionNode",(function(){return ht})),n.d(t,"ArrayExpressionNode",(function(){return vt})),n.d(t,"ExpLexer",(function(){return wt})),n.d(t,"ExpParser",(function(){return xt})),n.d(t,"lexExp",(function(){return Ot})),n.d(t,"parseExp",(function(){return Et})),n.d(t,"ExpBuilder",(function(){return jt})),n.d(t,"Evaluator",(function(){return Pt})),n.d(t,"Analyser",(function(){return Dt})),n.d(t,"nodeType",(function(){return Zt})),n.d(t,"VNode",(function(){return Yt})),n.d(t,"VAttr",(function(){return tn})),n.d(t,"VCmnt",(function(){return sn})),n.d(t,"VElm",(function(){return Dn})),n.d(t,"VText",(function(){return Fn})),n.d(t,"VType",(function(){return zn})),n.d(t,"lexTpl",(function(){return kn})),n.d(t,"parseTpl",(function(){return xn})),n.d(t,"isVElm",(function(){return On})),n.d(t,"isVAttr",(function(){return En})),n.d(t,"isVText",(function(){return Sn})),n.d(t,"isVComment",(function(){return jn})),n.d(t,"TplBuilder",(function(){return Cn})),n.d(t,"Binding",(function(){return Jn})),n.d(t,"Expression",(function(){return Wn})),n.d(t,"Renderer",(function(){return br})),n.d(t,"Component",(function(){return Ar})),n.d(t,"Directive",(function(){return Ir})),n.d(t,"Filter",(function(){return Mr})),n.d(t,"Service",(function(){return Br})),n.d(t,"isComponent",(function(){return Jr})),n.d(t,"isDirective",(function(){return Qr})),n.d(t,"isFilter",(function(){return Xr})),n.d(t,"isService",(function(){return eo})),n.d(t,"namespace",(function(){return Gr})),n.d(t,"injector",(function(){return Pr})),n.d(t,"component",(function(){return to})),n.d(t,"directive",(function(){return no})),n.d(t,"filter",(function(){return ro})),n.d(t,"service",(function(){return oo})),n.d(t,"ClassDirective",(function(){return wi})),n.d(t,"StyleDirective",(function(){return Mi}))}])}));