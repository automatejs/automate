!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.automate=t():e.automate=t()}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t);var o=Object.prototype.toString,i=Object.getPrototypeOf;function u(e,t,n){if(g(e)){for(var r=0;r<e.length;r++)if(t(e[r],r))return}else if(w(e))for(var o in e)if((n||e.hasOwnProperty(o))&&t(e[o],o))return}function a(e,t){if(g(e)){for(var n=0;n<e.length;n++)if(t(n,e[n]))return!0}else{if(!w(e))return!1;for(var r in e)if(e.hasOwnProperty(r)&&t(r,e[r]))return!0}}function s(){var e,t=!1,n=0,r=arguments[n];if(_(r)&&(t=r,n++,r=arguments[n]),arguments.length>n+1&&(e=arguments[n+1]),g(r)){var o=[];return r.forEach((function(n,i){(null==e||e(r,i,n))&&o.push(t?s(t,n):n)})),o}if(w(r)){var i=p(r);return u(r,(function(n,o){(null==e||e(r,o,n))&&(i[o]=t?s(t,n):n)})),i}return r}function c(){var e=!1,t=0,n=arguments[t];_(n)&&(e=n,n=arguments[++t]),e?Array.prototype.slice.call(arguments,t+1).forEach((function(e){h(n,e)})):Array.prototype.slice.call(arguments,t+1).forEach((function(e){f(n,e)}))}function l(){var e=!1,t=0,n={};return _(arguments[t])&&(e=arguments[t],t++),e?Array.prototype.slice.call(arguments,t).forEach((function(e){h(n,e)})):Array.prototype.slice.call(arguments,t).forEach((function(e){f(n,e)})),n}function f(e,t){u(t,(function(t,n){e[n]=t}))}function h(e,t){u(t,(function(t,n){null==e[n]?e[n]=t:w(e[n])&&w(t)?h(e[n],t):e[n]=t}))}function p(e){function t(){}return t.prototype=e,new t}function y(e,t){!function(e,t){var n=p(t.prototype);n.constructor=e,e.prototype=n}(e,t),e.super=function(){t.apply(this,arguments)}}function d(e){return x(e)?e.toLowerCase():e}function b(e){return x(e)?e.toUpperCase():e}function v(e){return void 0===e}function m(e){return void 0!==e}function g(e){return e instanceof Array}function w(e){return null!==e&&"object"===r(e)}function k(e){return null!==e&&"object"===r(e)&&!i(e)}function x(e){return"string"==typeof e}function O(e){return"number"==typeof e}function E(e){return"[object Date]"===o.call(e)}function S(e){return"function"==typeof e}function j(e){return"[object RegExp]"===o.call(e)}function _(e){return"boolean"==typeof e}function C(e){return"undefined"!=typeof FormData&&e instanceof FormData}function $(e,t){var n=e===t;return n||(g(e)&&g(t)?e.length===t.length&&(n=!a(e,(function(e,n){return!$(n,t[e])}))):w(e)&&w(t)&&i(e)===i(t)&&(n=!a(e,(function(e,n){return!$(n,t[e])})))),n}function P(e){return!w(e)||!a(e,(function(){return!0}))}function N(e){console.log(e)}function T(e,t){return e.some((function(e){return e===t}))}function D(e,t,n){return e.some((function(e){return e===t||n&&d(e)===d(t)}))}function A(e,t,n){if(!e)return!1;for(var r,o=!0,i=t.split("."),a=e;o&&i.length>0;)r=i.shift(),o=!1,u(a,(function(e,t){return(o=t===r||n&&d(t)===d(r))&&(a=e),o}),!0);return o}function L(e,t,n){if(!e)return null;for(var r,o=!0,i=t.split("."),a=e;o&&i.length>0;)r=i.shift(),o=!1,u(a,(function(e,t){return(o=t===r||n&&d(t)===d(r))&&(a=e),o}),!0);return o?a:null}function V(e,t,n,r){if(e){for(var o,i=!0,a=t.split("."),s=e;i&&a.length>0;)o=a.shift(),0===a.length?s[o]=n:(i=!1,u(s,(function(e,t){return(i=t===o||r&&d(t)===d(o))&&(s=e),i}),!0));if(!i)throw new Error(t+": Can not set property of undefined")}}function I(){return Array.prototype.concat.apply([],arguments)}function R(e,t){var n=function(e){return null==t?e:t(e)};return e.sort((function(e,t){return n(e)<n(t)?-1:n(e)>n(t)?1:0}))}function M(e,t){var n=function(e){return null==t?e:t(e)};return e.sort((function(e,t){return n(e)<n(t)?1:n(e)>n(t)?-1:0}))}function F(e){var t=parseFloat(e);return isNaN(t)?e:t}function U(e,t){if(e.length){var n=e.indexOf(t);if(n>-1)return e.splice(n,1)}}function B(){if(0!==arguments.length){for(var e,t,n="",r=arguments[0],o=/\{(\d+)\}/g,i=o.lastIndex;e=o.exec(r);){if(e[0],t=Number.parseInt(e[1])+1,arguments.length<=t)throw new Error("format item "+t+"is not defined");n+=r.substring(i,e.index)+arguments[t],i=o.lastIndex}return n+=r.substring(i)}}function q(e){return e.replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&quote;/g,"")}function K(e,t){var n="",r=t.length;return t.forEach((function(t,o){n+=t,o+1<r&&(n+=e)})),n}var z=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$event=t,this.$element=n};function H(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data={},this.handlers=[]}var t,n,r;return t=e,(n=[{key:"on",value:function(e){this.handlers.push(e)}},{key:"off",value:function(e){for(var t=0;t<this.handlers.length;t++)this.handlers[t]===e&&this.handlers.splice(t,1)}},{key:"fire",value:function(e,t){var n;t=t||this,this.data=e||{};for(var r=0;r<this.handlers.length;r++)S(this.handlers[r])&&(n=this.handlers[r].call(t,this));return n}}])&&H(t.prototype,n),r&&H(t,r),e}();function Y(e){return e instanceof W}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var G=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.messages={}}var t,n,r;return t=e,(n=[{key:"get",value:function(e){return this.messages[e]||(this.messages[e]=new W),this.messages[e]}},{key:"on",value:function(e,t){this.get(e).on(t)}},{key:"off",value:function(e,t){this.get(e).off(t)}},{key:"fire",value:function(e,t,n){return this.get(e).fire(t,n)}}])&&Z(t.prototype,n),r&&Z(t,r),e}(),J={propChanging:new W,propChanged:new W};var Q=Symbol("__isProxy"),X=Symbol("__target"),ee={get:function(e,t){if(t===Q)return!0;if(t===X)return e;return e[t]},set:function(e,t,n){var r=ne(e[t]),o=ne(n);if(r!==o){var i={valid:!0,apply:!0,oldValue:r,newValue:o};J.propChanging.fire({target:e,key:t,data:i}),i.apply&&(e[t]=function e(t){if(w(t)&&!te(t))return u(t,(function(n,r){t[r]=e(n)})),new Proxy(t,ee);return t}(n),J.propChanged.fire({target:e,key:t,data:{oldValue:r,newValue:o}}))}else e[t]!==n&&(e[t]=n);return!0}};Object.prototype.toProxy=function(){return te(this)?this:new Proxy(this,ee)};function te(e){return w(e)&&e[Q]}function ne(e){return te(e)?e[X]:e}var re={isIdentifierContinue:!1,isIdentifierStart:!1,literals:{false:!1,null:null,true:!0,undefined:void 0}};var oe={Program:"Program",ExpressionStatement:"ExpressionStatement",AssignmentExpression:"AssignmentExpression",ConditionalExpression:"ConditionalExpression",LogicalExpression:"LogicalExpression",BinaryExpression:"BinaryExpression",UnaryExpression:"UnaryExpression",CallExpression:"CallExpression",MemberExpression:"MemberExpression",Identifier:"Identifier",Literal:"Literal",ArrayExpression:"ArrayExpression",Property:"Property",ObjectExpression:"ObjectExpression"},ie=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$null=!0};function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var ae=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.childNodes=[]}var t,n,r;return t=e,(n=[{key:"appendChild",value:function(e){this.childNodes.push(e)}}])&&ue(t.prototype,n),r&&ue(t,r),e}();function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var he=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ce(this,le(t).call(this,oe.AssignmentExpression))).left=e,o.right=n,o.operator=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),t}(ae);function pe(e){return(pe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ye(e,t){return!t||"object"!==pe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function be(e,t){return(be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ve=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=ye(this,de(t).call(this,oe.BinaryExpression))).operator=e,o.left=n,o.right=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&be(e,t)}(t,e),t}(ae);function me(e){return(me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){return!t||"object"!==me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function we(e){return(we=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xe=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ge(this,we(t).call(this,oe.CallExpression))).callee=e,r.args=n,r.filter=!1,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(t,e),t}(ae);function Oe(e){return(Oe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ee(e,t){return!t||"object"!==Oe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function je(e,t){return(je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _e=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Ee(this,Se(t).call(this,oe.ConditionalExpression))).test=e,o.alternate=n,o.consequent=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&je(e,t)}(t,e),t}(ae);function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pe(e){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ne(e,t){return(Ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Te=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$e(this,Pe(t).call(this,oe.ExpressionStatement))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ne(e,t)}(t,e),t}(ae);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){return!t||"object"!==De(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ae(this,Le(t).call(this,oe.Identifier))).name=e,n.allowNull=!1,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(t,e),t}(ae);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Me(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fe(e){return(Fe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Me(this,Fe(t).call(this,oe.Literal))).value=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,e),t}(ae);function qe(e){return(qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ke(e,t){return!t||"object"!==qe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var We=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Ke(this,ze(t).call(this,oe.LogicalExpression))).operator=e,o.left=n,o.right=r,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,e),t}(ae);function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Je(e,t){return(Je=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Qe=function(e){function t(e,n,r){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Ze(this,Ge(t).call(this,oe.MemberExpression))).object=e,o.property=n,o.computed=r,o.allowNull=!1,o}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Je(e,t)}(t,e),t}(ae);function Xe(e){return(Xe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){return!t||"object"!==Xe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=et(this,tt(t).call(this,oe.ObjectExpression))).properties=e,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,e),t}(ae);function ot(e){return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){return!t||"object"!==ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ut(e){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var st=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),it(this,ut(t).call(this,oe.Program))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),t}(ae);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lt(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pt=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=lt(this,ft(t).call(this,oe.Property))).kind="init",e.key=null,e.value=null,e.computed=!1,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,e),t}(ae);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dt(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bt(e){return(bt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vt(e,t){return(vt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var mt=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=dt(this,bt(t).call(this,oe.UnaryExpression))).prefix=!0,r.operator=e,r.arg=n,r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vt(e,t)}(t,e),t}(ae);function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kt(e){return(kt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xt(e,t){return(xt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ot=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wt(this,kt(t).call(this,oe.ArrayExpression))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xt(e,t)}(t,e),t}(ae),Et={};function St(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}"+ - * / % === !== == != < > <= >= && || ! = |".split(" ").forEach((function(e){Et[e]=!0}));var jt=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.options=l(re,t)}var t,n,r;return t=e,(n=[{key:"lex",value:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),o=Et[t],i=Et[n],u=Et[r];if(o||i||u){var a=u?r:i?n:t;this.tokens.push({index:this.index,text:a,operator:!0}),this.index+=a.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens}},{key:"is",value:function(e,t){return-1!==t.indexOf(e)}},{key:"peek",value:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)}},{key:"isNumber",value:function(e){return"0"<=e&&e<="9"&&"string"==typeof e}},{key:"isWhitespace",value:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||"Â "===e}},{key:"isIdentifierStart",value:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)}},{key:"isValidIdentifierStart",value:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e}},{key:"isIdentifierContinue",value:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)}},{key:"isValidIdentifierContinue",value:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)}},{key:"codePointAt",value:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888}},{key:"peekMultichar",value:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e}},{key:"isExpOperator",value:function(e){return"-"===e||"+"===e||this.isNumber(e)}},{key:"throwError",value:function(e,t,n){n=n||this.index;var r=m(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw new Error("Lexer Error: "+e+" at column"+r+" in expression ["+this.text+"].")}},{key:"readNumber",value:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=d(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})}},{key:"readIdent",value:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})}},{key:"readString",value:function(e){var t=this.index;this.index++;for(var n="",r=e,o=!1;this.index<this.text.length;){var i=this.text.charAt(this.index);if(r+=i,o){if("u"===i){var u=this.text.substring(this.index+1,this.index+5);u.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+u+"]"),this.index+=4,n+=String.fromCharCode(parseInt(u,16))}else n+=ESCAPE[i]||i;o=!1}else if("\\"===i)o=!0;else{if(i===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=i}this.index++}this.throwError("Unterminated quote",t)}}])&&St(t.prototype,n),r&&St(t,r),e}();function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ct=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.lexer=t,this.options=l(re,n)}var t,n,r;return t=e,(n=[{key:"throwError",value:function(e,t){throw new Error("Syntax Error: Token '"+t.text+"'"+e+" at column "+(t.index+1)+" of the expression ["+this.text+"] starting at ["+this.text.substring(t.index)+"].")}},{key:"parse",value:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t}},{key:"program",value:function(){for(var e=new st;;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.appendChild(this.expressionStatement()),!this.expect(";"))return e}},{key:"expressionStatement",value:function(){var e=new Te;return e.appendChild(this.filterChain()),e}},{key:"filterChain",value:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e}},{key:"expression",value:function(){return this.assignment()}},{key:"isAssignable",value:function(e){return e.type===oe.Identifier||e.type===oe.MemberExpression}},{key:"assignment",value:function(){var e=this.ternary();if(this.expect("=")){if(!this.isAssignable(e))throw new Error("Trying to assign a value to a non l-value");e=new he(e,this.assignment(),"=")}return e}},{key:"ternary",value:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),new _e(n,e,t)):n}},{key:"logicalOR",value:function(){for(var e=this.logicalAND();this.expect("||");)e=new We("||",e,this.logicalAND());return e}},{key:"logicalAND",value:function(){for(var e=this.equality();this.expect("&&");)e=new We("&&",e,this.equality());return e}},{key:"equality",value:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t=new ve(e.text,t,this.relational());return t}},{key:"relational",value:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t=new ve(e.text,t,this.additive());return t}},{key:"additive",value:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t=new ve(e.text,t,this.multiplicative());return t}},{key:"multiplicative",value:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t=new ve(e.text,t,this.unary());return t}},{key:"unary",value:function(){var e;return(e=this.expect("+","-","!"))?new mt(e.text,this.unary()):this.primary()}},{key:"primary",value:function(){var e,t;for(this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.options.literals.hasOwnProperty(this.peek().text)?e=new Be(this.options.literals[this.consume().text]):this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());this.peek("(","[",".")||this.peek("?")&&this.peekAhead(1,".");)this.expect("?")&&(e.allowNull=!0),"("===(t=this.expect("(","[",".")).text?(e=new xe(e,this.parseArguments()),this.consume(")")):"["===t.text?(e=new Qe(e,this.expression(),!0),this.consume("]")):"."===t.text?e=new Qe(e,this.identifier(),!1):this.throwError("IMPOSSIBLE");return e}},{key:"filter",value:function(e){for(var t=[e],n=[this.identifier()];this.expect(".");)n.push(this.identifier());var r=n.map((function(e){return e.name})).join("."),o=new xe(new Ie(r),t);for(o.filter=!0;this.expect(":");)t.push(this.expression());return o}},{key:"parseArguments",value:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e}},{key:"identifier",value:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),new Ie(e.text)}},{key:"constant",value:function(){return new Be(this.consume().value)}},{key:"arrayDeclaration",value:function(){var e=new Ot;if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.appendChild(this.expression())}while(this.expect(","));return this.consume("]"),e}},{key:"object",value:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e=new pt,this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),new rt(t)}},{key:"consume",value:function(e){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t}},{key:"peekToken",value:function(){if(0===this.tokens.length)throw new Error("Unexpected end of expression: "+this.text);return this.tokens[0]}},{key:"peek",value:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)}},{key:"peekAhead",value:function(e,t,n,r,o){if(this.tokens.length>e){var i=this.tokens[e],u=i.text;if(u===t||u===n||u===r||u===o||!t&&!n&&!r&&!o)return i}return!1}},{key:"expect",value:function(e,t,n,r){var o=this.peek(e,t,n,r);return!!o&&(this.tokens.shift(),o)}}])&&_t(t.prototype,n),r&&_t(t,r),e}();function $t(e){return(new jt).lex(e)}function Pt(e){return new Ct(new jt).parse(e)}function Nt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"build",value:function(e){var t;switch(e.type){case oe.ExpressionStatement:t=this.buildExpression(e);break;case oe.AssignmentExpression:t=this.buildAssignment(e);break;case oe.ConditionalExpression:t=this.buildCondition(e);break;case oe.LogicalExpression:t=this.buildLogic(e);break;case oe.BinaryExpression:t=this.buildBinary(e);break;case oe.UnaryExpression:t=this.buildUnary(e);break;case oe.CallExpression:t=this.buildCall(e);break;case oe.MemberExpression:t=this.buildMember(e);break;case oe.Identifier:t=this.buildIdentifier(e);break;case oe.Literal:t=this.buildLiteral(e);break;case oe.ArrayExpression:t=this.buildArray(e);break;case oe.Property:t=this.buildProperty(e);break;case oe.ObjectExpression:t=this.buildObject(e)}return t}},{key:"buildExpression",value:function(e){var t,n=this;return e.childNodes.forEach((function(e){t=n.build(e)})),t}},{key:"buildAssignment",value:function(e){return B("{0}={1}",this.build(e.left),this.build(e.right))}},{key:"buildCondition",value:function(e){return B("{0}?{1}:{2}",this.build(e.test),this.build(e.alternate),this.build(e.consequent))}},{key:"buildLogic",value:function(e){var t=this.build(e.left),n=this.build(e.right);return B("{0}{1}{2}",t,e.operator,n)}},{key:"buildBinary",value:function(e){var t=this.build(e.left),n=this.build(e.right);return B("{0}{1}{2}",t,e.operator,n)}},{key:"buildUnary",value:function(e){var t=this.build(e.arg);return B("{0}{1}",e.operator,t)}},{key:"buildCall",value:function(e){var t=this,n="",r=e.args.map((function(e){return t.build(e)})),o=this.build(e.callee);return e.filter?(r.length>0&&(n=r.shift()),n+=" | "+o,r.length>0&&(n+=":"+K(":",r))):n=B("{0}({1})",o,K(", ",r)),n}},{key:"buildMember",value:function(e){var t=this.build(e.object),n=this.build(e.property);return e.computed?B("{0}[{1}]",t,n):B("{0}.{1}",t,n)}},{key:"buildIdentifier",value:function(e){return e.name}},{key:"buildLiteral",value:function(e){return x(e.value)?B('"{0}"',e.value):e.value}},{key:"buildProperty",value:function(e){return B("{0}:{1}",this.build(e.key,{propertyKey:!0}),this.build(e.value))}},{key:"buildObject",value:function(e){var t=this;return B("{{0}}",K(", ",e.properties.map((function(e){return t.build(e)}))))}},{key:"buildArray",value:function(e){var t=this;return B("[{0}]",K(",",e.childNodes.map((function(e){return t.build(e)}))))}}])&&Nt(t.prototype,n),r&&Nt(t,r),e}();function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var At=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.options=l({allowNull:!1,assignInterceptor:null},n),this.program=null,this.locals=null,this.buffer={},this.builder=new Tt}var t,n,r;return t=e,(n=[{key:"parse",value:function(e){var t=this.buffer[e];return t||(t=Pt(e),this.buffer[e]=t),t}},{key:"evaluate",value:function(e,t){return this.evaluateProgram(this.parse(e),t)}},{key:"evaluateProgram",value:function(e,t){var n,r=this;return this.program=e,this.locals=t,this.program.childNodes.forEach((function(e){n=r.evaluateNode(e)})),n&&n.$null&&(n=null),n}},{key:"assign",value:function(e,t,n){return this.assignProgram(this.parse(e),t,n)}},{key:"assignProgram",value:function(e,t,n){if(this.program=e,this.locals=n,1!==this.program.childNodes.length)throw new Error(B("{0} is not a valid assignment",exp));var r=this.program.childNodes[0];if(r.childNodes.length>1)throw new Error(B("{0} is not a valid assignment",exp));var o=r.childNodes[0];if(o.type===oe.MemberExpression){var i=this.evaluateNode(o.object);if(null==i)throw new Error(B("{0} is null or undefined",this.builder.build(o.object)));if(null==(u=this.evaluateNode(o.property,{propertyKey:!o.computed})))throw new Error(B("{0} is null or undefined",this.builder.build(o.property)));null==this.options.assignInterceptor?i[u]=t:this.options.assignInterceptor.call(this,i,u,t)}else{if(o.type!==oe.Identifier)throw new Error(B("{0} is not a valid assignment",exp));var u=this.builder.build(o);null==this.options.assignInterceptor?this.scope[u]=t:this.options.assignInterceptor.call(this,this.scope,u,t)}}},{key:"evaluateNode",value:function(e,t){var n;switch(e.type){case oe.ExpressionStatement:n=this.evaluateExpression(e);break;case oe.AssignmentExpression:n=this.evaluateAssignment(e);break;case oe.ConditionalExpression:n=this.evaluateCondition(e);break;case oe.LogicalExpression:n=this.evaluateLogic(e);break;case oe.BinaryExpression:n=this.evaluateBinary(e);break;case oe.UnaryExpression:n=this.evaluateUnary(e);break;case oe.CallExpression:n=this.evaluateCall(e);break;case oe.MemberExpression:n=this.evaluateMember(e,t);break;case oe.Identifier:n=this.evaluateIdentifier(e,t);break;case oe.Literal:n=this.evaluateLiteral(e);break;case oe.ArrayExpression:n=this.evaluateArray(e);break;case oe.Property:n=this.evaluateProperty(e);break;case oe.ObjectExpression:n=this.evaluateObject(e)}return n}},{key:"evaluateExpression",value:function(e){var t,n=this;return e.childNodes.forEach((function(e){t=n.evaluateNode(e)})),t}},{key:"evaluateAssignment",value:function(e){var t=this.evaluateNode(e.left,{assignmentLeft:!0}),n=this.evaluateNode(e.right);null==this.options.assignInterceptor?t.obj[t.prop]=n:this.options.assignInterceptor.call(this,t.obj,t.prop,n)}},{key:"evaluateCondition",value:function(e){return this.evaluateNode(e.test)?this.evaluateNode(e.alternate):this.evaluateNode(e.consequent)}},{key:"evaluateLogic",value:function(e){var t,n=this.evaluateNode(e.left),r=this.evaluateNode(e.right);switch(e.operator){case"&&":case"||":t=n&&r}return t}},{key:"evaluateBinary",value:function(e){var t,n=this.evaluateNode(e.left),r=this.evaluateNode(e.right);switch(e.operator){case"+":t=n+r;break;case"-":t=n-r;break;case"*":t=n*r;break;case"/":t=n/r;break;case"%":t=n%r;break;case"<":t=n<r;break;case">":t=n>r;break;case"<=":t=n<=r;break;case">=":t=n>=r;break;case"==":t=n==r;break;case"!=":t=n!=r;break;case"===":t=n===r;break;case"!==":t=n!==r}return t}},{key:"evaluateUnary",value:function(e){var t,n=this.evaluateNode(e.arg);switch(e.operator){case"+":t=n;break;case"-":t=-n;break;case"!":t=!n}return t}},{key:"evaluateCall",value:function(e){var t=this,n=e.args.map((function(e){return t.evaluateNode(e)})),r=this.evaluateNode(e.callee,{callee:!0});if(e.filter){var o=this.scope.$getFilter(r.prop);if(null==o)throw new Error('Filter "'+r.prop+'" is not defined');return o.execute.apply(o,n)}var i=r.obj[r.prop];if(S(i))return i.apply(r.obj,n);throw new Error(r.prop+" is not a function")}},{key:"evaluateMember",value:function(e,t){var n=this.evaluateNode(e.object);return null==n&&(this.options.allowNull||e.object.allowNull)&&(n=new ie),e.computed?n[this.evaluateNode(e.property)]:this.evaluateNode(e.property,{target:n,targetNode:e.object,callee:t&&t.callee,assignmentLeft:t&&t.assignmentLeft})}},{key:"evaluateIdentifier",value:function(e,t){var n;if(n=null==(t=t||{}).targetNode?this.scope:t.target,t.assignmentLeft||t.callee)return{obj:n,prop:e.name};if(t.propertyKey)return e.name;var r=n[e.name];return null==r&&this.locals&&(r=this.locals[e.name]),r}},{key:"evaluateLiteral",value:function(e){return e.value}},{key:"evaluateProperty",value:function(e){return{key:this.evaluateNode(e.key,{propertyKey:!0}),value:this.evaluateNode(e.value)}}},{key:"evaluateObject",value:function(e){var t=this,n={};return e.properties.forEach((function(e){var r=t.evaluateNode(e);n[r.key]=r.value})),n}},{key:"evaluateArray",value:function(e){var t=this,n=[];return e.childNodes.forEach((function(e){n.push(t.evaluateNode(e))})),n}}])&&Dt(t.prototype,n),r&&Dt(t,r),e}();function Lt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t,n){return t&&Vt(e.prototype,t),n&&Vt(e,n),e}var Rt=function(){function e(t,n){Lt(this,e),this.callee=t,this.exp=n,this.children={}}return It(e,[{key:"createChild",value:function(t,n,r){return this.children[t]||(this.children[t]=new e(n,r)),this.children[t]}}]),e}(),Mt=function(){function e(){Lt(this,e),this.program=null,this.accessor={},this.builder=new Tt,this.buffer={}}return It(e,[{key:"createAccessor",value:function(e,t,n){return this.accessor[e]||(this.accessor[e]=new Rt(t,n)),this.accessor[e]}},{key:"parse",value:function(e){var t=this.buffer[e];return t||(t=Pt(e),this.buffer[e]=t),t}},{key:"analyse",value:function(e){return this.analyseProgram(this.parse(e))}},{key:"analyseProgram",value:function(e){var t=this;return this.accessor={},this.program=e,e.childNodes.forEach((function(e){t.analyseNode(e)})),this.accessor}},{key:"analyseNode",value:function(e,t){var n=null;switch(e.type){case oe.ExpressionStatement:this.analyseExpression(e);break;case oe.AssignmentExpression:this.analyseAssignment(e);break;case oe.ConditionalExpression:this.analyseCondition(e);break;case oe.LogicalExpression:this.analyseLogic(e);break;case oe.BinaryExpression:this.analyseBinary(e);break;case oe.UnaryExpression:this.analyseUnary(e);break;case oe.CallExpression:this.analyseCall(e);break;case oe.MemberExpression:n=this.analyseMember(e,t);break;case oe.Identifier:n=this.analyseIdentifier(e,t);break;case oe.Literal:n=this.analyseLiteral(e,t);break;case oe.ArrayExpression:this.analyseArray(e);break;case oe.Property:this.analyseProperty(e);break;case oe.ObjectExpression:this.analyseObject(e)}return n}},{key:"analyseExpression",value:function(e){var t=this;e.childNodes.forEach((function(e){t.analyseNode(e)}))}},{key:"analyseAssignment",value:function(e){this.analyseNode(e.right)}},{key:"analyseCondition",value:function(e){this.analyseNode(e.test),this.analyseNode(e.alternate),this.analyseNode(e.consequent)}},{key:"analyseLogic",value:function(e){this.analyseNode(e.left),this.analyseNode(e.right)}},{key:"analyseBinary",value:function(e){this.analyseNode(e.left),this.analyseNode(e.right)}},{key:"analyseUnary",value:function(e){this.analyseNode(e.arg)}},{key:"analyseCall",value:function(e){var t=this;e.args.forEach((function(e){t.analyseNode(e)})),e.filter||this.analyseNode(e.callee,{callee:!0})}},{key:"analyseMember",value:function(e,t){var n=this.analyseNode(e.object);if(e.computed){if(this.analyseNode(e.property,{callee:t&&t.callee}),e.property.type===oe.Literal)return n.createChild(e.property.value,t&&t.callee);var r=this.builder.build(e.property);return n.createChild(r,t&&t.callee,!0)}return this.analyseNode(e.property,{parent:n,callee:t&&t.callee})}},{key:"analyseIdentifier",value:function(e,t){var n=this.builder.build(e),r=t&&t.callee;return t&&t.parent?t.parent.createChild(n,r):this.createAccessor(n,r)}},{key:"analyseLiteral",value:function(e,t){var n=this.builder.build(e);if(t&&t.parent)return t.parent.createChild(n)}},{key:"analyseProperty",value:function(e){this.analyseNode(e.value)}},{key:"analyseObject",value:function(e){var t=this;e.properties.forEach((function(e){t.analyseNode(e)}))}},{key:"analyseArray",value:function(e){var t=this;e.childNodes.forEach((function(e){t.analyse(e)}))}}]),e}();function Ft(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bt(e,t,n){return t&&Ut(e.prototype,t),n&&Ut(e,n),e}var qt=function(){function e(t){Ft(this,e),this.target=t,this.keys={}}return Bt(e,[{key:"getHandlers",value:function(e){return this.keys[e]||(this.keys[e]=[]),this.keys[e]}},{key:"registerKey",value:function(e,t){this.getHandlers(e).push(t)}},{key:"unregisterKey",value:function(e,t){var n=this.getHandlers(e);if(null==t)n.length=0;else{var r=n.indexOf(t);-1!==r&&n.splice(r,1)}}},{key:"fireKey",value:function(e,t,n){this.getHandlers(e).forEach((function(e){e.call(n,t)}))}}]),e}(),Kt=function(){function e(){var t=this;Ft(this,e),this.onPropChanging=function(e){t.handlePropChanging(e.data)},this.onPropChanged=function(e){t.handlePropChanged(e.data)},this.listeners=[],this.validators=[],this.init()}return Bt(e,[{key:"init",value:function(){J.propChanging.on(this.onPropChanging),J.propChanged.on(this.onPropChanged)}},{key:"handlePropChanging",value:function(e){var t=this.getListener(this.validators,e.target);null!=t&&t.fireKey(e.key,e)}},{key:"handlePropChanged",value:function(e){var t=this.getListener(this.listeners,e.target);null!=t&&(t.fireKey(e.key,e),t.fireKey("*",e))}},{key:"getListener",value:function(e,t){var n,r=e.filter((function(e){return e.target===t}));return r.length>0&&(n=r[0]),n}},{key:"createListener",value:function(e,t){var n=new qt(t);return e.push(n),n}},{key:"getOrCreateListener",value:function(e,t){var n=this.getListener(e,t);return null==n&&(n=this.createListener(e,t)),n}},{key:"watch",value:function(e,t,n){var r=this.getOrCreateListener(this.listeners,ne(e));return r.registerKey(t,n),function(){r.unregisterKey(t,n)}}},{key:"validate",value:function(e,t,n){var r=this.getOrCreateListener(this.validators,ne(e));return r.registerKey(t,n),function(){r.unregisterKey(t,n)}}},{key:"destroy",value:function(){this.listeners.length=0,this.validators.length=0,J.propChanging.off(this.onPropChanging),J.propChanged.off(this.onPropChanged)}}]),e}();function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Ht=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.handler=t,this.timeout=n,this.delayId=null}var t,n,r;return t=e,(n=[{key:"execute",value:function(e){var t=this;null==this.delayId&&(this.delayId=setTimeout((function(){t.delayId=null,t.handler.call(e)}),this.timeout))}},{key:"destroy",value:function(){null!=this.delayId&&clearTimeout(this.delayId)}}])&&zt(t.prototype,n),r&&zt(t,r),e}();function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t,n){return t&&Yt(e.prototype,t),n&&Yt(e,n),e}var Gt=function(){function e(t,n,r){Wt(this,e),this.exp=t,this.handler=n,this.value=r,this.newValue=r,this.valueChanged=!1,this.collectionChanged=!1}return Zt(e,[{key:"setNewValue",value:function(e){this.newValue=e,this.valueChanged=!0}},{key:"setCollectionChanged",value:function(e){this.collectionChanged=e}},{key:"hasChange",value:function(){return this.valueChanged||this.collectionChanged}},{key:"notify",value:function(e){var t=this.value,n=this.newValue,r=this.collectionChanged;this.value=this.newValue,this.collectionChanged=!1,this.handler.call(e,{oldValue:t,newValue:n,collectionChanged:r})}}]),e}(),Jt=function(){function e(t){Wt(this,e),this.scope=t,this.accessors={},this.listeners=[],this.watcher=new Kt,this.analyser=new Mt,this.delayer=new Ht(this.notify),this.evaluator=new At(this.scope,{allowNull:!0})}return Zt(e,[{key:"createListener",value:function(e,t,n){var r=new Gt(e,t,n);return this.listeners.push(r),r}},{key:"removeListener",value:function(e){var t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}},{key:"notify",value:function(){var e=this;this.listeners.forEach((function(t){t.hasChange()&&t.notify(e.scope)}))}},{key:"notifyChange",value:function(e,t){t?e.setNewValue(t):e.setCollectionChanged(!0),this.delayer.execute(this)}},{key:"getAccessor",value:function(e){var t=this.accessors[e];return t||(t=this.analyser.analyse(e),this.accessors[e]=t),s(!0,t)}},{key:"watch",value:function(e,t,n){var r=this,o=this.getAccessor(e),i=this.evaluator,a=this.createListener(e,t,i.evaluate(e,n));function s(e){u(e,(function(e){S(e.unwatch)&&(e.unwatch.call(this),e.unwatch=null),s(e.children)}))}return function t(o,c){w(c)&&u(o,(function(o,u){var l=c;o.exp&&(u=i.evaluate(u,n)),l===r.scope&&n&&n[u]&&(l=n),o.unwatch=r.watcher.watch(l,u,(function(u){s(o.children),t(o.children,u.data.newValue),r.notifyChange(a,i.evaluate(e,n))})),t(o.children,l[u])}))}(o,this.scope),function(){s(o),r.removeListener(a)}}},{key:"watchCollection",value:function(e,t,n){var r=arguments,o=this,i=this,u=this.evaluator,a=l(),s=this.watch(e,(function(){null!=a&&a.call(o),a=l(),t.apply(o,r)}),n),c=this.createListener(e,t,u.evaluate(e,n));function l(){var t=u.evaluate(e,n);if(w(t)||g(t))return i.watcher.watch(t,"*",(function(){i.notifyChange(c)}))}return function(){s.call(this),a&&a.call(this),i.removeListener(c)}}},{key:"destroy",value:function(){this.delayer.destroy(),this.watcher.destroy(),this.scope=null,this.listeners.length=0}}]),e}();function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Xt={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entity:6,processingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},en=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nodeType=t,this.nodeName=n,this.nodeValue=r,this.childNodes=[],this.firstChild=null,this.lastChild=null,this.parentNode=null,this.previousSibling=null,this.nextSibling=null,this.nodeData={}}var t,n,r;return t=e,(n=[{key:"pushChild",value:function(e){e.parentNode=this,this.childNodes.push(e)}},{key:"buildSibling",value:function(){if(0!==this.childNodes.length){var e=this;1===this.childNodes.length?(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[0]):(this.firstChild=this.childNodes[0],this.lastChild=this.childNodes[this.childNodes.length-1],this.childNodes.forEach((function(t,n){0!==n?n!==e.childNodes.length-1?(t.previousSibling=e.childNodes[n-1],t.nextSibling=e.childNodes[n+1]):t.previousSibling=e.childNodes[n-1]:t.nextSibling=e.childNodes[n+1]}))),this.childNodes.forEach((function(e){e.buildSibling()}))}}},{key:"clearParentAndSibling",value:function(){this.parentNode=null,this.previousSibling=null,this.nextSibling=null}},{key:"remove",value:function(){null!=this.parentNode&&this.parentNode.removeChild(this)}},{key:"hasChildNodes",value:function(){return 0!==this.childNodes.length}},{key:"clearChildNodes",value:function(){this.childNodes.forEach((function(e){e.destroy()})),this.childNodes.length=0}},{key:"appendChild",value:function(e){return null!=e.parentNode&&e.parentNode.removeChild(e),e.parentNode=this,0===this.childNodes.length?this.firstChild=e:(this.lastChild.nextSibling=e,e.previousSibling=this.lastChild),e.compile(this.compileOptions),this.lastChild=e,this.childNodes.push(e),e}},{key:"insertBefore",value:function(e,t){null!=t.parentNode&&t.parentNode.removeChild(t);var n=this.childNodes.indexOf(e);if(-1===n)throw new Error("Ref node is not a child of specified node");return t.parentNode=this,null!=e.previousSibling&&(t.previousSibling=e.previousSibling,e.previousSibling.nextSibling=t),t.nextSibling=e,e.previousSibling=t,0===n&&(this.firstChild=t),t.compile(this.compileOptions),this.childNodes.splice(n,0,t),t}},{key:"insertAfter",value:function(e,t){return null==e.nextSibling?this.appendChild(t):this.insertBefore(e.nextSibling,t)}},{key:"removeChild",value:function(e){var t=this.childNodes.indexOf(e);if(-1===t)throw new Error("Remove node is not a child of specified node");return null!=e.previousSibling&&(e.previousSibling.nextSibling=e.nextSibling),null!=e.nextSibling&&(e.nextSibling.previousSibling=e.previousSibling),0===t&&(this.firstChild=e.nextSibling),t===this.childNodes.length-1&&(this.lastChild=e.previousSibling),e.clearParentAndSibling(),this.childNodes.splice(t,1),e}},{key:"replaceChild",value:function(e,t){null!=t.parentNode&&t.parentNode.removeChild(t);var n=this.childNodes.indexOf(e);if(-1===n)throw new Error("Ref node is not a child of specified node");return t.parentNode=this,t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,this.firstChild===e&&(this.firstChild=t),this.lastChild===e&&(this.lastChild=t),e.clearParentAndSibling(),t.compile(this.compileOptions),this.childNodes.splice(n,1,t),t}},{key:"cloneNode",value:function(e){var t=this.onCloneNode(e);return e&&(t.childNodes=this.childNodes.map((function(t){return t.cloneNode(e)})),t.buildSibling()),t}},{key:"destroy",value:function(){this.onDestroy&&this.onDestroy(),this.childNodes.map((function(e){e.destroy()})),this.remove(),this.clearParentAndSibling(),this.childNodes.length=0,this.firstChild=null,this.lastChild=null,this.ownerDocument=null}}])&&Qt(t.prototype,n),r&&Qt(t,r),e}();function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rn(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function on(e){return(on=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function un(e,t){return(un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var an=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=rn(this,on(t).call(this,Xt.attribute,e,n))).velm=null,r.quote='"',r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&un(e,t)}(t,e),n=t,(r=[{key:"setValue",value:function(e){this.nodeValue=e}},{key:"onCloneNode",value:function(){return new t(this.nodeName,this.nodeValue)}},{key:"onDestroy",value:function(){}}])&&nn(n.prototype,r),o&&nn(n,o),t}(en);function sn(e){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ln(e,t){return!t||"object"!==sn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fn(e){return(fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hn(e,t){return(hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ln(this,fn(t).call(this,Xt.comment,"#comment",e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hn(e,t)}(t,e),n=t,(r=[{key:"onCloneNode",value:function(){return new t(this.nodeName,this.nodeValue)}}])&&cn(n.prototype,r),o&&cn(n,o),t}(en);function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bn(e,t){return!t||"object"!==yn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vn(e){return(vn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mn(e,t){return(mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bn(this,vn(t).call(this,e))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mn(e,t)}(t,e),n=t,(r=[{key:"isValidIdentifierStart",value:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e||"@"===e||":"===e||"*"===e}},{key:"isValidIdentifierContinue",value:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)||"-"===e||"."===e}},{key:"expectString",value:function(e){var t=e.length;return this.index+t<=this.text.length&&e===this.text.substr(this.index,t)}},{key:"readComment",value:function(e,t){var n=this.index;this.index+=e.length;for(var r="",o=e;this.index<this.text.length;){var i=this.text.charAt(this.index);if(o+=i,this.expectString(t))return o+=t,this.index+=t.length,void this.tokens.push({index:n,text:o,comment:!0,value:r});r+=i,this.index++}this.throwError("Unterminated comment",n)}},{key:"readText",value:function(){for(var e=this.index,t="";this.index<this.text.length;){var n=this.text.charAt(this.index),r=this.peek();if("<"===n&&(this.isIdentifierStart(r)||"/"===r)||this.expectString("\x3c!--"))break;t+=n,this.index++}this.tokens.push({index:e,text:t,textTag:!0})}},{key:"readTag",value:function(e,t,n,r){for(this.tokens.push({index:this.index,text:e,tag:!0,closing:n,begin:!0,doctype:r}),this.index+=e.length,this.readIdent();this.index<this.text.length;){var o=this.text.charAt(this.index);if(!n){var i=o+this.peek();if(i==="/"+t){this.tokens.push({index:this.index,text:i,tag:!0,closing:!0,end:!0}),this.index+=i.length;break}}if(o===t){this.tokens.push({index:this.index,text:t,tag:!0,closing:!!r||n,end:!0}),this.index+=t.length;break}this.isIdentifierStart(this.peekMultichar())?this.readIdent():'"'===o||"'"===o?this.readString(o):this.isWhitespace(o)?this.index++:"="===o?(this.tokens.push({index:this.index,text:"=",equal:!0}),this.index++):this.throwError("Unexpected next character ",this.index,this.index+1)}}},{key:"lex",value:function(e){this.text=e,this.index=0,this.tokens=[];for(var t=!!this.options.allowDocType;this.index<this.text.length;){var n=this.text.charAt(this.index),r=this.peek(),o=this.peek(2);this.expectString("\x3c!--")?this.readComment("\x3c!--","--\x3e"):"<"===n&&this.isIdentifierStart(r)?this.readTag("<",">",!1):this.expectString("</")&&this.isIdentifierStart(o)?this.readTag("</",">",!0):this.expectString("<!DOCTYPE")?t?this.readTag("<!",">",!0,!0):this.throwError("DOCTYPE is not allowed",this.index,this.index+1):this.readText()}return this.tokens}}])&&dn(n.prototype,r),o&&dn(n,o),t}(jt);function wn(e){return(wn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xn(e,t){return!t||"object"!==wn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function On(e){return(On=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function En(e,t){return(En=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Sn=function(e){function t(e,n){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xn(this,On(t).call(this,e,n))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&En(e,t)}(t,e),n=t,(r=[{key:"parse",value:function(e){this.index=0,this.text=e,this.tokens=this.lexer.lex(e);for(var t,n=new Mn,r=!!this.options.allowDocType;this.index<this.tokens.length;){var o=this.current();if(o.doctype)r?t?this.throwError("DOCTYPE only allow one",o):(t=this.doctype(),n.childNodes.push(t)):this.throwError("DOCTYPE is not allowed",o);else if(o.comment){var i=new pn(o.text);n.childNodes.push(i),this.next()}else o.textTag?(e=new zn(o.text),n.childNodes.push(e),this.next()):o.tag&&o.begin?n.childNodes.push(this.element()):this.throwError("impossible",o)}return n.buildSibling(),n.childNodes}},{key:"doctype",value:function(){this.next();var e=new Gn,t=this.current();return t.identifier?e.nodeValue=t.text:this.throwError(" Unexpected ",t),this.attrs(e).forEach((function(t){e.childNodes.push(t)})),(t=this.current()).tag&&t.end&&t.closing?this.next():this.throwError(" Unexpected ",t),e}},{key:"element",value:function(e){this.next();var t=new Mn,n=this.current();if(n.identifier?(t.nodeName=n.text,this.next()):this.throwError(" Unexpected ",n),this.attrs(t).forEach((function(e){t.pushAttr(e)})),(n=this.current()).tag&&n.end){if(this.next(),"input"===t.nodeName)return t.selfClosed=!0,t;n.closing||this.childElements(t).forEach((function(e){t.pushChild(e)}))}else this.throwError(" Unexpected ",n);return(n=this.current()).tag&&n.begin&&n.closing?(this.next(),(n=this.current()).identifier&&t.nodeName===n.text?(this.next(),(n=this.current()).tag&&n.end&&n.closing?this.next():this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n)):this.throwError(" Unexpected ",n),t}},{key:"childElements",value:function(e){for(var t=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.closing)break;if(n.comment){var r=new pn(n.text);t.push(r),this.next()}else if(n.textTag){var o=new zn(n.text);t.push(o),this.next()}else n.tag&&n.begin?t.push(this.element(e)):this.throwError(" Unexpected ",n)}return t}},{key:"attrs",value:function(e){for(var t=[];this.index<this.tokens.length;){var n=this.current();if(n.tag&&n.end)break;var r=new an;n.identifier&&(r.nodeName=n.text,r.origin=n.text,this.next(),(n=this.current()).equal&&(this.next(),(n=this.current()).constant?(r.nodeValue=n.value,this.next()):this.throwError(" Unexpected ",n))),t.push(r)}return t}},{key:"current",value:function(){return this.index<this.tokens.length?this.tokens[this.index]:{}}},{key:"next",value:function(){this.index++}}])&&kn(n.prototype,r),o&&kn(n,o),t}(Ct);function jn(e){return e=q(e),(new gn).lex(e)}function _n(e){return e=q(e),new Sn(new gn).parse(e)}function Cn(e){return e.nodeType===Xt.element}function $n(e){return e.nodeType===Xt.attribute}function Pn(e){return e.nodeType===Xt.text}function Nn(e){return e.nodeType===Xt.comment}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Dn=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"build",value:function(e){return Pn(e)?this.buildText(e):Nn(e)?this.buildComment(e):this.buildElement(e)}},{key:"buildElement",value:function(e){var t=this,n=e.vattrs.map((function(e){return t.buildAttribute(e)})).join(" "),r=e.childNodes.map((function(e){return t.build(e)})).join("");n&&(n=" "+n);var o="<"+e.nodeName+n+">"+r;return e.selfClosed||(o+="</"+e.nodeName+">"),o}},{key:"buildAttribute",value:function(e){return e.nodeName+(null==e.nodeValue?"":"="+e.quote+e.nodeValue+e.quote)}},{key:"buildText",value:function(e){return e.nodeValue}},{key:"buildComment",value:function(e){return e.nodeValue}}])&&Tn(t.prototype,n),r&&Tn(t,r),e}();function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ln(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vn(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rn(e,t){return(Rn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Vn(this,In(t).call(this,Xt.element,e))).elm=null,n.vattrs=[],n.selfClosed=!1,n.builder=new Dn,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rn(e,t)}(t,e),n=t,(r=[{key:"pushAttr",value:function(e){e.velm=this,this.vattrs.push(e)}},{key:"hasAttr",value:function(){return 0!==this.vattrs.length}},{key:"getAttr",value:function(e){var t=this.vattrs.filter((function(t){return t.nodeName===e}));return t.length?t[0]:null}},{key:"setAttr",value:function(e,t){var n,r=this.vattrs.filter((function(t){return t.belongTo(e)}));return r.length>0?(n=r[0]).setValue(t):((n=new an(e,t)).velm=this,n.compile(this.compileOptions)),this.vattrs.push(n),n}},{key:"removeAttr",value:function(e){var t=[],n=this;if(e instanceof an){var r=this.vattrs.indexOf(e);-1!==r&&(t=n.vattrs.splice(r,1))}else this.vattrs.filter((function(t){return t.belongTo(e)})).forEach((function(e){var r=n.vattrs.indexOf(e);e.destroy(),t=n.vattrs.splice(r,1)}));return t.length>0?t[0]:null}},{key:"appendAttr",value:function(e){if(null!=e.velm)throw new Error("Current attribute is not new!");return e.velm=this,e.compile(this.compileOptions),this.vattrs.push(e),e}},{key:"getOuterTpl",value:function(){return this.builder.build(this)}},{key:"getInnerTpl",value:function(){var e=this;return this.childNodes.map((function(t){return e.builder.build(t)})).join("")}},{key:"setOuterTpl",value:function(e){var t=this;_n(e).forEach((function(e){e.parentNode=null,t.parentNode.insertBefore(t,e)})),t.parentNode.removeChild(t)}},{key:"setInnerTpl",value:function(e){var t=this;this.clearChildNodes(),_n(e).forEach((function(e){e.parentNode=null,t.appendChild(e)}))}},{key:"onCloneNode",value:function(){var e=new t(this.nodeName,this.nodeValue);return e.vattrs=this.vattrs.map((function(t){var n=t.cloneNode();return n.velm=e,n})),e}},{key:"onDestroy",value:function(){this.vattrs.forEach((function(e){e.destroy()})),this.vattrs.length=0}}])&&Ln(n.prototype,r),o&&Ln(n,o),t}(en);function Fn(e){return(Fn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Un(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bn(e,t){return!t||"object"!==Fn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qn(e){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var zn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Bn(this,qn(t).call(this,Xt.text,"#text",e))).elm=null,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(t,e),n=t,(r=[{key:"onCloneNode",value:function(){return new t(this.nodeName,this.nodeValue)}}])&&Un(n.prototype,r),o&&Un(n,o),t}(en);function Hn(e){return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wn(e,t){return!t||"object"!==Hn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yn(e){return(Yn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zn(e,t){return(Zn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Wn(this,Yn(t).call(this,Xt.documentType))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zn(e,t)}(t,e),t}(en);function Jn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var Qn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.text=t}var t,n,r;return t=e,(n=[{key:"compute",value:function(e,t){return e.$eval(this.text,t)}},{key:"assign",value:function(e,t,n){e.$assign(this.text,t,n)}},{key:"watch",value:function(e,t,n){return e.$watch(this.text,t,n)}},{key:"destroy",value:function(){}}])&&Jn(t.prototype,n),r&&Jn(t,r),e}();function Xn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var er,tr,nr=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.text=n,this.locals=r,this.isExp=!1,this.logical=!1,this.assignment=!1,this.automation=null,this.value=null,this.oldValue=null,this.changed=!1,this.segments=[],this.expressions=[]}var t,n,r;return t=e,(n=[{key:"createExpression",value:function(e){var t=new Qn(e);return this.expressions.push(t),t}},{key:"compile",value:function(){if((this.logical||this.assignment)&&(this.isExp=!0),this.isExp)this.createExpression(this.text);else{for(var e,t=/{{([^}]*)}}/g,n=t.lastIndex,r=t.exec(this.text);null!=r;)r.index>n&&(e=this.text.substring(n,r.index),this.segments.push(e)),this.segments.push(this.createExpression(r[1])),n=t.lastIndex,r=t.exec(this.text);this.text.length>n&&(e=this.text.substring(n),this.segments.push(e))}}},{key:"link",value:function(){var e=this;this.assignment||this.logical||(this.detect(),this.expressions.forEach((function(t){t.watch(e.scope,(function(){e.detect(),e.patch()}),e.locals)})))}},{key:"detect",value:function(){var e=this.compute();this.value!=e&&(this.changed=!0,this.oldValue=this.value,this.value=e)}},{key:"compute",value:function(e){var t=this;return e=l(this.locals,e),this.isExp?this.expressions[0].compute(this.scope,e):this.segments.reduce((function(n,r){return x(r)?n+r:n+(r.compute(t.scope,e)||"")}),"")}},{key:"assign",value:function(e,t){if(t=l(this.locals,t),!this.isExp)throw new Error(this.text+" is not valid expression");this.expressions[0].assign(this.scope,e,t)}},{key:"registerAutomation",value:function(e){this.automation=e}},{key:"unregisterAutomation",value:function(e){this.automation===e&&(this.automation=null)}},{key:"patch",value:function(){this.changed&&null!=this.automation&&(this.changed=!1,this.automation.call(this,this.value,this.oldValue))}},{key:"evaluate",value:function(e,t){return t=l(this.locals,t),this.scope.$eval(e,t)}},{key:"destroy",value:function(){}}])&&Xn(t.prototype,n),r&&Xn(t,r),e}();function rr(e){return Array.prototype.slice.call(e.childNodes,0)}function or(e,t){var n=e.parentNode;null!=n&&(n.insertBefore(t,e),n.removeChild(e))}function ir(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach((function(t){return e.classList.add(t)})):e.classList.add(t);else{var n=" "+(e.getAttribute("class")||"")+" ";n.indexOf(" "+t+" ")<0&&e.setAttribute("class",(n+t).trim())}}function ur(e,t){if(t&&(t=t.trim()))if(e.classList)t.indexOf(" ")>-1?t.split(/\s+/).forEach((function(t){return e.classList.remove(t)})):e.classList.remove(t),e.classList.length||e.removeAttribute("class");else{for(var n=" "+(e.getAttribute("class")||"")+" ",r=" "+t+" ";n.indexOf(r)>=0;)n=n.replace(r," ");(n=n.trim())?e.setAttribute("class",n):e.removeAttribute("class")}}er=".m-component{display:inherit;} .m-hide{display:none !important;}",(tr=document.createElement("style")).appendChild(document.createTextNode(er)),document.getElementsByTagName("head")[0].appendChild(tr);function ar(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var sr="load unload change submit reset select blur focus abort keydown keypress keyup click dblclick mousedown mousemove mouseout mouseover mouseup".split(" "),cr=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.scope=t,this.buffer={components:{},directives:{}}}var t,n,r;return t=e,(n=[{key:"createBinding",value:function(e,t){return new nr(this.scope,e,t.locals)}},{key:"render",value:function(e,t){var n=document.createDocumentFragment(),r=_n(e),o={locals:t,directives:[]};return this.compileNodes(r,o),this.linkNodes(r,o).forEach((function(e){n.appendChild(e)})),o.directives.forEach((function(e){e.$postlink()})),n}},{key:"compileNodes",value:function(e,t){var n=this;e.forEach((function(e){n.compileNode(e,t)}))}},{key:"compileNode",value:function(e,t){Pn(e)?this.compileText(e,t):Nn(e)?this.compileComment(e,t):this.compileElm(e,t)}},{key:"linkNodes",value:function(e,t){var n=this;return e.map((function(e){return n.linkNode(e,t)}))}},{key:"linkNode",value:function(e,t){return Pn(e)?this.linkText(e,t):Nn(e)?this.linkComment(e,t):this.linkElm(e,t)}},{key:"compileElm",value:function(e,t){var n=this;e.nodeData.component=this.recognizeComponent(e);var r=[],o=e.vattrs.some((function(o){return n.compileAttr(o,t),null!=o.nodeData.directive&&(r.push(o.nodeData.directive),e.nodeData.linker=o.nodeData.linker,null!=e.nodeData.linker)}));R(r,(function(e){return e.$priority})).forEach((function(e){t.directives.push(e)})),e.nodeData.directives=r,o||(e.nodeData.component?e.nodeData.slots=this.seekSlot(e):this.compileNodes(e.childNodes,t))}},{key:"compileAttr",value:function(e,t){var n;if(null!=e.nodeValue&&(n=this.createBinding(e.nodeValue,t),e.nodeData.binding=n),e.nodeName.startsWith("@")?(e.nodeData.isEvent=!0,n&&(n.logical=!0),e.nodeData.name=e.nodeName.substr(1),e.nodeData.isDomEvent=T(sr,e.nodeData.name)):e.nodeName.startsWith(":")?(n&&(n.isExp=!0),e.nodeData.name=e.nodeName.substr(1)):e.nodeName.startsWith("*")?(e.nodeData.directive=!0,n&&(n.isExp=!0),e.nodeData.name=e.nodeName.substr(1)):e.nodeData.name=e.nodeName,e.nodeData.directive){var r=this.recognizeDirective(e);if(!r)throw new Error("directive "+e.nodeData.name+" is not defined");if(e.nodeData.directive=this.scope.$newDirective(r),e.nodeData.directive.$$vattr=e,n&&(n.assignment=e.nodeData.directive.$assignment),e.nodeData.directive.$compile())return void(e.nodeData.linker=e.nodeData.directive)}if(n){if(!e.nodeData.isEvent&&!e.nodeData.directive){var o=function(t){var n=e.velm.elm;e.nodeData.name.startsWith("style")?V(n,e.nodeData.name,t):n.setAttribute(e.nodeData.name,t)};e.velm.nodeData.component?n.registerAutomation((function(t){e.velm.nodeData.component.$hasProperty(e.nodeData.name)?e.velm.nodeData.component.$setProperty(e.nodeData.name,t):o(t)})):n.registerAutomation(o)}n.compile()}}},{key:"compileText",value:function(e,t){e.nodeData.binding=this.createBinding(e.nodeValue,t),e.nodeData.binding.registerAutomation((function(t){var n,r=document.createTextNode(t);null==e.parentNode?null!=e.elm&&(n=e.elm.parentNode):n=e.parentNode.elm,null!=n&&(null==e.elm?n.appendChild(r):or(e.elm,r)),e.elm=r})),e.nodeData.binding.compile()}},{key:"compileComment",value:function(e){}},{key:"linkElm",value:function(e){var t=this;if(null!=e.nodeData.linker)return e.nodeData.linker.$link();if(e.elm=document.createElement(e.nodeName),e.nodeData.component){var n=this.scope.$newComponent(e.nodeData.component);e.nodeData.component=n,ir(e.elm,"m-component"),e.vattrs.forEach((function(e){t.linkAttr(e)})),n.$$velm=e,n.$setSlot(e.nodeData.slots),n.$render(),n.$mount(e.elm)}else e.vattrs.forEach((function(e){t.linkAttr(e)})),e.childNodes.forEach((function(n){e.elm.appendChild(t.linkNode(n))}));return e.elm}},{key:"linkAttr",value:function(e){var t=e.velm.elm,n=e.nodeData.binding;n&&(e.nodeData.isEvent?e.nodeData.isDomEvent?t.addEventListener(e.nodeData.name,(function(e){n.compute(new z(e,t))})):e.velm.nodeData.component&&e.velm.nodeData.component.$bind(e.nodeData.name,(function(e){n.compute(new z(e,t))})):(n.link(),n.patch()),e.nodeData.directive&&n.registerAutomation((function(t,n){e.nodeData.directive.$change(t,n)})))}},{key:"linkText",value:function(e){return e.nodeData.binding.link(),e.elm=document.createTextNode(e.nodeData.binding.value),e.elm}},{key:"linkComment",value:function(e){return document.createComment(e.nodeValue)}},{key:"seekSlot",value:function(e){var t={};return e.childNodes.forEach((function(e){if(Cn(e)){var n=e.getAttr("slot");n&&(t[n.nodeValue]=e.getInnerTpl())}})),t}},{key:"recognizeComponent",value:function(e){var t,n,r=e.nodeName,o=this.buffer.components;return void 0!==o[r]?n=o[r]:(t=this.scope.$parseFullName(r),n=this.scope.$getComponent(t.key,t.ns),o[r]=n),n}},{key:"recognizeDirective",value:function(e){var t,n,r=e.nodeData.name,o=this.buffer.directives;return void 0!==o[r]?n=o[r]:(t=this.scope.$parseFullName(e.nodeData.name),n=this.scope.$getDirective(t.key,t.ns),o[r]=n),n}}])&&ar(t.prototype,n),r&&ar(t,r),e}(),lr=0,fr=1,hr=2,pr=3;function yr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var dr=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.classContainer={},this.instanceContainer={}}var t,n,r;return t=e,(n=[{key:"getClassContainer",value:function(e){return this.classContainer[e]||(this.classContainer[e]={}),this.classContainer[e]}},{key:"getInstanceContainer",value:function(e){return this.instanceContainer[e]||(this.instanceContainer[e]=[]),this.instanceContainer[e]}},{key:"register",value:function(e,t,n){if(-1!==t.indexOf("."))throw new Error('Illegal character "."');var r=this.getClassContainer(e);if(null==r[t])r[t]=[];else{var o=r[t].filter((function(e){return e.prototype.$$metadata.namespace===n.prototype.$$metadata.namespace}));if(o.length>0)throw new Error(t+" is exist under namespace "+o[0].prototype.$$metadata.namespace)}r[t].push(n)}},{key:"registerComponent",value:function(e,t,n){this.register(hr,e,t,n)}},{key:"registerDirective",value:function(e,t,n){this.register(pr,e,t,n)}},{key:"registerFilter",value:function(e,t,n){this.register(lr,e,t,n)}},{key:"registerService",value:function(e,t,n){this.register(fr,e,t,n)}},{key:"has",value:function(e,t,n,r){var o,i=this.getClassContainer(e);return null!=(o=n?L(i,t,!0):i[t])&&!(r&&o.length>0&&0===(o=o.filter((function(e){var t=e.prototype.$$metadata;return t.namespace&&d(t.namespace)===d(r)}))).length)}},{key:"hasComponent",value:function(e,t){return this.has(hr,e,!0,t)}},{key:"hasDirective",value:function(e,t){return this.has(pr,e,!0,t)}},{key:"hasFilter",value:function(e,t){return this.has(lr,e,!0,t)}},{key:"hasService",value:function(e,t){return this.has(fr,e,!0,t)}},{key:"get",value:function(e,t,n,r){var o,i=this.getClassContainer(e);if(null==(o=n?L(i,t,!0):i[t]))return null;if(r&&o.length>0&&0===(o=o.filter((function(e){var t=e.prototype.$$metadata;return t.namespace&&d(t.namespace)===d(r)}))).length)return null;if(o.length>1){var u=o.map((function(e){return e.prototype.$$metadata.namespace}));throw new Error("namespace "+u.join("|")+" all have "+t)}return o[0]}},{key:"getComponent",value:function(e,t){return this.get(hr,e,t)}},{key:"getDirective",value:function(e,t){return this.get(pr,e,t)}},{key:"getFilter",value:function(e,t){return this.get(lr,e,t)}},{key:"getService",value:function(e,t){return this.get(fr,e,t)}},{key:"create",value:function(e,t,n){var r;if(x(t)){if(null==(r=this.get(e,t,n)))throw new Error("miss constructor for key "+t)}else{if(!S(t))throw new Error("Invalid parameter");r=t}return new r}},{key:"createComponent",value:function(e,t){return this.create(hr,e,t)}},{key:"createDirective",value:function(e,t){return this.create(pr,e,t)}},{key:"createFilter",value:function(e,t){var n,r=this.getInstanceContainer(lr);x(e)&&(e=this.getFilter(e,t));var o=r.filter((function(t){return t instanceof e}));return o.length?n=o[0]:(n=new e,r.push(n)),n}},{key:"createService",value:function(e,t){var n,r=this.getInstanceContainer(fr);if(x(e)&&(e=this.getService(e,t)),!e.prototype.$$metadata.nonShared){var o=r.filter((function(t){return t instanceof e}));o.length&&(n=o[0])}return n||(n=new e,r.push(n)),n}},{key:"parseFullName",value:function(e,t){var n={ns:"",key:""},r=e.split(".");return 1===r.length?n.key=e:(n.key=r.pop(),n.ns=r.join("."),t&&a(t,(function(e,t){if(e===n.ns)return n.ns=t,!0}))),n}},{key:"injectServices",value:function(e,t){var n=this;t&&w(t.inject)&&u(t.inject,(function(r,o){Object.defineProperty(e,o,{enumerable:!1,configurable:!1,get:function(){var i="$$"+o;if(null==e[i])if(x(r)){var u=n.parseFullName(r,t.alias);e[i]=n.createService(u.key,u.ns)}else e[i]=n.createService(r);return e[i]}})}))}}])&&yr(t.prototype,n),r&&yr(t,r),e}());function br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vr(e,t,n){return t&&br(e.prototype,t),n&&br(e,n),e}function mr(e){this.$$velm=null,this.$$view=null,this.$$parent=null,this.$$children=[],this.$$directives=[],this.$$data=this.$initData(e),this.$$injector=dr,this.$$renderer=new cr(this),this.$$observer=new Jt(this),this.$$evaluator=new At(this),this.slots={},this.events={},this.props=this.$delegate({}),this.state=this.$delegate({}),dr.injectServices(this,this.$$data)}var gr=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mr.call(this)}return vr(e,[{key:"$delegate",value:function(e){return new Proxy(e,ee)}},{key:"$setSlot",value:function(e){this.slots=e||{}}},{key:"$setState",value:function(e){this.state=this.$delegate(e)}},{key:"$setProps",value:function(e){this.props=this.$delegate(e)}}]),vr(e,[{key:"$initData",value:function(e){return l(this.$$metadata,e)}},{key:"$setData",value:function(e){c(this.$$data,e)}},{key:"$getNsAlias",value:function(){return this.$$data.alias}},{key:"$parseFullName",value:function(e){return this.$$injector.parseFullName(e,this.$getNsAlias())}},{key:"$getComponent",value:function(e,t){return this.$$injector.getComponent(e,t)}},{key:"$newComponent",value:function(e){var t=this.$$injector.createComponent(e);return t.$$parent=this,this.$$children.push(t),t}},{key:"$getDirective",value:function(e,t){return this.$$injector.getDirective(e,t)}},{key:"$newDirective",value:function(e){var t=this.$$injector.createDirective(e);return t.$$scope=this,this.$$directives.push(t),t}},{key:"$getFilter",value:function(e){var t=this.$parseFullName(e);return this.$$injector.createFilter(t.key,t.ns)}},{key:"$hasProperty",value:function(e){return void 0!==this.$getProperty(e)}},{key:"$getProperty",value:function(e){return L(this.props,e,!0)}},{key:"$setProperty",value:function(e,t){L(this.props,e,!0)!==t&&V(this.props,e,t,!0)}},{key:"$hasMessage",value:function(e){return A(this.events,e,!0)}},{key:"$bind",value:function(e,t){var n=L(this.events,e,!0);if(!Y(n))throw new Error(B('"{0}" is not a valid event',e));n.on(t)}},{key:"$unbind",value:function(e,t){var n=L(this.events,e,!0);Y(n)&&n.off(t)}},{key:"$watch",value:function(e,t,n){return this.$$observer.watch(e,t,n)}},{key:"$watchCollection",value:function(e,t,n){return this.$$observer.watchCollection(e,t,n)}},{key:"$eval",value:function(e,t){return this.$$evaluator.evaluate(e,t)}},{key:"$assign",value:function(e,t,n){return this.$$evaluator.assign(e,t,n)}},{key:"$getTemplate",value:function(){var e=this.$$data;if(x(e.template))return e.template;if(x(e.templateId)){var t=document.getElementById(e.templateId);if(null!=t)return t.innerHTML}return""}},{key:"$render",value:function(){var e=this.$getTemplate();return this.$$view=this.$$renderer.render(e),this.$$view}},{key:"$mount",value:function(e){(x(e)?document.querySelector(e):e).appendChild(this.$$view)}},{key:"$unmount",value:function(){}},{key:"$destroy",value:function(){this.$$observer.destroy(),this.$$children.forEach((function(e){e.$destroy()})),this.$$directives.forEach((function(e){e.$destroy()})),this.onDestroy&&this.onDestroy(),this.$$parent=null,this.$$children.length=0,this.$$directives.length=0}}]),e}();function wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kr(e,t,n){return t&&wr(e.prototype,t),n&&wr(e,n),e}function xr(){this.$$scope=null,this.$$vattr=null,this.$priority=9,this.$assignment=!1,this.$placeholder=null}var Or=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),xr.call(this,t)}return kr(e,[{key:"$key",get:function(){return this.$$metadata.key}},{key:"$scope",get:function(){return this.$$scope}},{key:"$renderer",get:function(){return this.$scope.$$renderer}},{key:"$element",get:function(){return this.$$vattr.velm.elm}},{key:"$binding",get:function(){return this.$$vattr.nodeData.binding}},{key:"$component",get:function(){return this.$$vattr.velm.nodeData.component}}]),kr(e,[{key:"$compile",value:function(){return this.onCompile&&this.onCompile(this.$$vattr.velm,this.$$vattr)}},{key:"$link",value:function(){return this.onLink&&this.onLink(this.$scope)}},{key:"$postlink",value:function(){this.afterLink&&this.afterLink(),null!=this.$binding&&this.$change(this.$binding.value,this.$binding.oldValue)}},{key:"$change",value:function(e,t){this.onChange&&this.onChange(e,t)}},{key:"$destroy",value:function(){this.onDestroy&&this.onDestroy()}},{key:"$$searchDirective",value:function(e,t){var n=e.nodeData.directives.filter((function(e){return e.$key===t}));return n.length?n[0]:null}},{key:"$seekDirective",value:function(e){var t=this.$$vattr.velm;return this.$$searchDirective(t,e)}},{key:"$seekUpDirective",value:function(e){var t=this.$$vattr.velm.parentNode;return this.$$searchDirective(t,e)}},{key:"$removeElement",value:function(e){if(null==this.$placeholder)throw new Error("you must define element placeholder!");e?null!=this.$element.parentNode&&or(this.$element,this.$placeholder):null==this.$element.parentNode&&or(this.$placeholder,this.$element)}},{key:"$hideElement",value:function(e){e?ir(this.$element,"m-hide"):ur(this.$element,"m-hide")}}]),e}();function Er(e){}var Sr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Er.call(this,t)};function jr(e){}var _r=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jr.call(this,t)};function Cr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var $r=/^[a-z_\$][\w\$-]*/i,Pr=function(e){mr.call(this,e)};Pr.prototype=gr.prototype;var Nr=function(e){xr.call(this,e)};Nr.prototype=Or.prototype;var Tr=function(e){Er.call(this,e)};Tr.prototype=Sr.prototype;var Dr=function(e){jr.call(this,e)};Dr.prototype=_r.prototype;var Ar,Lr=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,(n=[{key:"rename",value:function(e,t){if($r.test(t)){var n="";switch(t.split("-").forEach((function(e){n+=b(e[0])+e.substring(1)})),e){case hr:n+="Component";break;case pr:n+="Directive";break;case lr:n+="Filter";break;case fr:n+="Service"}return n}throw new Error(t+"is not a valid name")}},{key:"make",value:function(e,t,n,r){var o,i=this.rename(e,t);for(var u in o=new Function("onConstruct",'"use strict";return function '+i+"(){onConstruct.call(this);};")((function(){S(o.super)&&o.super.call(this),S(n.construct)&&n.construct.call(this,W)})),S(n.extends)&&y(o,n.extends),n)n.hasOwnProperty(u)&&"extends"!==u&&"construct"!==u&&(o.prototype[u]=n[u]);return r.key=t,o.prototype.$$metadata=r,o}},{key:"makeComponent",value:function(e,t,n){return t=l({extends:Pr},t),this.make(hr,e,t,n)}},{key:"makeDirective",value:function(e,t,n){return t=l({extends:Nr},t),this.make(pr,e,t,n)}},{key:"makeFilter",value:function(e,t,n){return t=l({extends:Tr},t),this.make(lr,e,t,n)}},{key:"makeService",value:function(e,t,n){return t=l({extends:Dr},t),this.make(fr,e,t,n)}}])&&Cr(t.prototype,n),r&&Cr(t,r),e}());function Vr(e){return{component:function(t,n,r){return r.namespace=e,function(e,t,n){var r=Lr.makeComponent(e,t,n);return dr.registerComponent(e,r),r}(t,n,r)},directive:function(t,n,r){return r.namespace=e,function(e,t,n){var r=Lr.makeDirective(e,t,n);return dr.registerDirective(e,r),r}(t,n,r)},service:function(t,n,r){return r.namespace=e,function(e,t,n){var r=Lr.makeService(e,t,n);return dr.registerService(e,r),r}(t,n,r)},filter:function(t,n,r){return r.namespace=e,function(e,t,n){var r=Lr.makeFilter(e,t,n);return dr.registerFilter(e,r),r}(t,n,r)}}}function Ir(e){return e instanceof gr}function Rr(e){return e instanceof Or}function Mr(e){return e instanceof Sr}function Fr(e){return e instanceof _r}function Ur(e,t){var n,r=document.querySelector(e),o=new(Lr.makeComponent("root",t,{template:r.innerHTML}));rr(n=r).forEach((function(e){n.removeChild(e)})),o.$render(),o.$mount(r)}function Br(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,dr.registerComponent(n,t)}}function qr(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,dr.registerDirective(n,t)}}function Kr(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,dr.registerFilter(n,t)}}function zr(e){return function(t){var n=e.key||t.name;t.prototype.$$metadata=e,dr.registerService(n,t)}}function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e,t){return!t||"object"!==Hr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e,t){return(Gr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Jr;qr({namespace:"automate",key:"m-bind"})(Ar=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Yr(this,Zr(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gr(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$element.innerText=e}}])&&Wr(n.prototype,r),o&&Wr(n,o),t}(Or));function Qr(e){return(Qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eo(e,t){return!t||"object"!==Qr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function to(e){return(to=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function no(e,t){return(no=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ro;qr({namespace:"automate",key:"m-bind-html"})(Jr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),eo(this,to(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&no(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$element.innerHTML=e}}])&&Xr(n.prototype,r),o&&Xr(n,o),t}(Or));function oo(e){return(oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uo(e,t){return!t||"object"!==oo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ao(e){return(ao=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function so(e,t){return(so=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var co;qr({namespace:"automate",key:"m-repeat"})(ro=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=uo(this,ao(t).call(this))).itemExp="",e.itemsExp="",e.itemTemplate="",e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&so(e,t)}(t,e),n=t,(r=[{key:"onCompile",value:function(e,t){var n=t.nodeValue,r=/^([a-z_]+\w+)\s+in\s+(.+)$/i.exec(n);if(null==r)throw new Error("m-repeat: parameter is not valid");return this.itemExp=r[1],this.itemsExp=r[2],e.removeAttr(t),this.itemTemplate=e.getOuterTpl(),!0}},{key:"onLink",value:function(e){var t=this,n=document.createDocumentFragment(),r=document.createComment("start: m-repeat"),o=document.createComment("end: m-repeat");return n.appendChild(r),n.appendChild(this.render(e)),n.appendChild(o),e.$watchCollection(this.itemsExp,(function(){var n,i,u,a=t.render(e);i=o,rr(u=(n=r).parentNode).forEach((function(e){e.previousSibling===n&&e!==i&&u.removeChild(e),e.nextSibling===i&&e!==n&&u.removeChild(e)})),o.parentNode.insertBefore(a,o)})),n}},{key:"render",value:function(e){var t=this,n=e.$eval(this.itemsExp),r=document.createDocumentFragment();return u(n,(function(e,n){var o={};o.$key=n,o.$index=n,o[t.itemExp]=e;var i=t.$renderer.render(t.itemTemplate,o);r.appendChild(i)})),r}},{key:"onDestroy",value:function(){}}])&&io(n.prototype,r),o&&io(n,o),t}(Or));function lo(e){return(lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ho(e,t){return!t||"object"!==lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function po(e){return(po=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yo(e,t){return(yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bo;qr({namespace:"automate",key:"m-model"})(co=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=ho(this,po(t).call(this))).viewValue=null,e.modelValue=null,e.parsers=[],e.formatters=[],e.viewChangeListeners=[],e.validators=[],e.status={feedback:"",pristine:!0,dirty:!1,valid:!0,invalid:!1},e.options={css:{pristine:"n-pristine",dirty:"n-dirty",valid:"n-valid",invalid:"n-invalid"}},e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yo(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.commitModelValue(e)}},{key:"afterLink",value:function(){var e=this,t=this.$element.name;t&&(this.$scope.state[t]=this.status),null!=this.$component?this.$component.$bind("change",(function(t){return e.commitViewValue(t.data.newvalue)})):this.$element.addEventListener("input",(function(t){return e.commitViewValue(t.target.value)}))}},{key:"onDestroy",value:function(){}},{key:"commitModelValue",value:function(e){if(this.modelValue!==e){var t=this;this.validators.forEach((function(n){n.call(t,e,this.modelValue)})),this.modelValue=e,this.formatters.forEach((function(n){e=n.call(t,e)})),this.viewValue!==e&&(this.viewValue=e,null!=this.$component?this.$component.$setProperty("value",e):this.$element.value=e,this.updateElmCssClass())}}},{key:"commitViewValue",value:function(e){if(this.viewValue!==e){var t=this;this.markDirtyStatus(!0),this.viewChangeListeners.forEach((function(n){n.call(t,e,t.viewValue)})),this.viewValue=e,this.parsers.forEach((function(n){e=n.call(t,e)})),this.modelValue!==e&&(this.validators.forEach((function(n){n.call(t,e,t.modelValue)})),this.modelValue=e,this.$binding.assign(e))}}},{key:"updateElmCssClass",value:function(){var e=this.$element,t=this.options.css;this.status.dirty?(e.classList.add(t.dirty),e.classList.remove(t.pristine)):(e.classList.add(t.pristine),e.classList.remove(t.dirty)),this.status.valid?(e.classList.add(t.valid),e.classList.remove(t.invalid)):(e.classList.add(t.invalid),e.classList.remove(t.valid))}},{key:"markDirtyStatus",value:function(e){this.status.dirty=e,this.status.pristine=!e,this.updateElmCssClass()}},{key:"markValidStatus",value:function(e,t){this.status.valid=e,this.status.invalid=!e,this.status.feedback=t,this.updateElmCssClass()}}])&&fo(n.prototype,r),o&&fo(n,o),t}(Or));function vo(e){return(vo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function go(e,t){return!t||"object"!==vo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wo(e){return(wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ko(e,t){return(ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xo;qr({namespace:"automate",key:"m-hide"})(bo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),go(this,wo(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ko(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$hideElement(e)}}])&&mo(n.prototype,r),o&&mo(n,o),t}(Or));function Oo(e){return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function So(e,t){return!t||"object"!==Oo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _o(e,t){return(_o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}qr({namespace:"automate",key:"m-show"})(xo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),So(this,jo(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_o(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$hideElement(!e)}}])&&Eo(n.prototype,r),o&&Eo(n,o),t}(Or));function Co(e){return(Co="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Po(e,t){return!t||"object"!==Co(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function No(e){return(No=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function To(e,t){return(To=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Do,Ao=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Po(this,No(t).call(this))).key=e,n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&To(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){e?this.$element.hasAttribute(this.key)||this.$element.setAttribute(this.key,""):this.$element.hasAttribute(this.key)&&this.$element.removeAttribute(this.key)}}])&&$o(n.prototype,r),o&&$o(n,o),t}(Or);function Lo(e){return(Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e,t){return!t||"object"!==Lo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Io(e){return(Io=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ro(e,t){return(Ro=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Mo;qr({namespace:"automate",key:"m-checked"})(Do=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Vo(this,Io(t).call(this,"checked"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ro(e,t)}(t,e),t}(Ao));function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Uo(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bo(e){return(Bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qo(e,t){return(qo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ko;qr({namespace:"automate",key:"m-disabled"})(Mo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Uo(this,Bo(t).call(this,"disabled"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qo(e,t)}(t,e),t}(Ao));function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ho(e,t){return!t||"object"!==zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wo(e){return(Wo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Yo(e,t){return(Yo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Zo;qr({namespace:"automate",key:"m-readonly"})(Ko=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ho(this,Wo(t).call(this,"readonly"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yo(e,t)}(t,e),t}(Ao));function Go(e){return(Go="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jo(e,t){return!t||"object"!==Go(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xo(e,t){return(Xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ei;qr({namespace:"automate",selector:"m-selected"})(Zo=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Jo(this,Qo(t).call(this,"selected"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xo(e,t)}(t,e),t}(Ao));function ti(e){return(ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ri(e,t){return!t||"object"!==ti(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oi(e){return(oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ii(e,t){return(ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ui,ai=qr({namespace:"automate",key:"m-class"})(ei=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ri(this,oi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ii(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e,t){this.skipCurrentElm()||(t&&ur(this.$element,t.join("")),e&&ir(this.$element,e.join("")))}},{key:"skipCurrentElm",value:function(){return!1}}])&&ni(n.prototype,r),o&&ni(n,o),t}(Or))||ei;function si(e){return(si="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return!t||"object"!==si(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fi(e){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hi(e,t){return(hi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var pi;qr({namespace:"automate",key:"m-class-even"})(ui=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),li(this,fi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hi(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!0&this.$binding.evaluate("$index")}}])&&ci(n.prototype,r),o&&ci(n,o),t}(ai));function yi(e){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bi(e,t){return!t||"object"!==yi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vi(e){return(vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var gi;qr({namespace:"automate",key:"m-class-odd"})(pi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),bi(this,vi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!1&this.$binding.evaluate("$index")}}])&&di(n.prototype,r),o&&di(n,o),t}(ai));function wi(e){return(wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ki(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xi(e,t){return!t||"object"!==wi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ei(e,t){return(Ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Si,ji=qr({namespace:"automate",key:"m-style"})(gi=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),xi(this,Oi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ei(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e,t){if(!this.skipCurrentElm()){var n=this;t&&u(t,(function(e,t){n.$element.style[t]=""})),w(e)&&u(e,(function(e,t){n.$element.style[t]=e}))}}},{key:"skipCurrentElm",value:function(){return!1}}])&&ki(n.prototype,r),o&&ki(n,o),t}(Or))||gi;function _i(e){return(_i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ci(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $i(e,t){return!t||"object"!==_i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pi(e){return(Pi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ni(e,t){return(Ni=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ti;qr({namespace:"automate",key:"m-style-even"})(Si=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),$i(this,Pi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ni(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!0&this.$binding.evaluate("$index")}}])&&Ci(n.prototype,r),o&&Ci(n,o),t}(ji));function Di(e){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ai(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Li(e,t){return!t||"object"!==Di(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vi(e){return(Vi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ii(e,t){return(Ii=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ri;qr({namespace:"automate",key:"m-style-odd"})(Ti=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Li(this,Vi(t).call(this))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ii(e,t)}(t,e),n=t,(r=[{key:"skipCurrentElm",value:function(){return!1&this.$binding.evaluate("$index")}}])&&Ai(n.prototype,r),o&&Ai(n,o),t}(ji));function Mi(e){return(Mi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return!t||"object"!==Mi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bi(e){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qi(e,t){return(qi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ki;qr({namespace:"automate",key:"m-if"})(Ri=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ui(this,Bi(t).call(this))).$placeholder=document.createComment("n-if"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qi(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.$removeElement(!e)}}])&&Fi(n.prototype,r),o&&Fi(n,o),t}(Or));function zi(e){return(zi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wi(e,t){return!t||"object"!==zi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zi(e,t){return(Zi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Gi;qr({namespace:"automate",key:"m-switch"})(Ki=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Wi(this,Yi(t).call(this))).value=null,e.matchCount=0,e.changed=new W,e.defaultMatched=!0,e.matchDefault=new W,e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zi(e,t)}(t,e),n=t,(r=[{key:"onChange",value:function(e){this.value=e,this.changed.fire()}},{key:"plusMatch",value:function(){this.matchCount++,this.checkDefault()}},{key:"minusMatch",value:function(){this.matchCount--,this.checkDefault()}},{key:"checkDefault",value:function(){var e=this.matchCount<=0;this.defaultMatched!==e&&(this.defaultMatched=e,this.matchDefault.fire())}}])&&Hi(n.prototype,r),o&&Hi(n,o),t}(Or));function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xi(e,t){return!t||"object"!==Ji(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eu(e){return(eu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tu(e,t){return(tu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var nu;qr({namespace:"automate",key:"m-switch-default"})(Gi=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Xi(this,eu(t).call(this))).switchCtrl=null,e.$placeholder=document.createComment("m-switch-default"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tu(e,t)}(t,e),n=t,(r=[{key:"afterLink",value:function(){var e=this;if(this.switchCtrl=this.$seekUpDirective("m-switch"),null==this.switchCtrl)throw new Error("Require m-switch directive");this.switchCtrl.matchDefault.on((function(){e.$removeElement(!e.switchCtrl.defaultMatched)})),this.switchCtrl.defaultMatched||this.$removeElement(!0)}}])&&Qi(n.prototype,r),o&&Qi(n,o),t}(Or));function ru(e){return(ru="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ou(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iu(e,t){return!t||"object"!==ru(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function uu(e){return(uu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function au(e,t){return(au=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var su;qr({namespace:"automate",key:"m-switch-when"})(nu=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=iu(this,uu(t).call(this))).value=null,e.matched=!1,e.switchCtrl=null,e.changed=new W,e.$placeholder=document.createComment("m-switch-when"),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&au(e,t)}(t,e),n=t,(r=[{key:"afterLink",value:function(){var e=this;if(this.switchCtrl=this.$seekUpDirective("m-switch"),null==this.switchCtrl)throw new Error("Require m-switch directive");this.switchCtrl.changed.on((function(){e.render()}))}},{key:"onChange",value:function(e){this.value=e,this.render()}},{key:"render",value:function(){var e=this.switchCtrl.value===this.value;this.matched!=e&&(this.matched=e,e?this.switchCtrl.plusMatch():this.switchCtrl.minusMatch()),this.$removeElement(!e)}}])&&ou(n.prototype,r),o&&ou(n,o),t}(Or));function cu(e){return(cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fu(e,t){return!t||"object"!==cu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hu(e){return(hu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pu(e,t){return(pu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}Br({namespace:"automate",key:"slot"})(su=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=fu(this,hu(t).call(this))).props.name="",e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pu(e,t)}(t,e),n=t,(r=[{key:"$render",value:function(){var e=this.$$parent.slots[this.props.name];return e&&(this.$$view=this.$$parent.$$renderer.render(e)),this.$$view}}])&&lu(n.prototype,r),o&&lu(n,o),t}(gr));n.d(t,"forEach",(function(){return u})),n.d(t,"some",(function(){return a})),n.d(t,"copy",(function(){return s})),n.d(t,"extend",(function(){return c})),n.d(t,"merge",(function(){return l})),n.d(t,"object",(function(){return p})),n.d(t,"inherit",(function(){return y})),n.d(t,"lowercase",(function(){return d})),n.d(t,"uppercase",(function(){return b})),n.d(t,"isUndefined",(function(){return v})),n.d(t,"isDefined",(function(){return m})),n.d(t,"isObject",(function(){return w})),n.d(t,"isBlankObject",(function(){return k})),n.d(t,"isNumber",(function(){return O})),n.d(t,"isDate",(function(){return E})),n.d(t,"isFunction",(function(){return S})),n.d(t,"isRegExp",(function(){return j})),n.d(t,"isBoolean",(function(){return _})),n.d(t,"isArray",(function(){return g})),n.d(t,"isString",(function(){return x})),n.d(t,"isSame",(function(){return $})),n.d(t,"isEmpty",(function(){return P})),n.d(t,"isFormData",(function(){return C})),n.d(t,"debug",(function(){return N})),n.d(t,"contains",(function(){return T})),n.d(t,"containsStr",(function(){return D})),n.d(t,"hasProperty",(function(){return A})),n.d(t,"getProperty",(function(){return L})),n.d(t,"setProperty",(function(){return V})),n.d(t,"concat",(function(){return I})),n.d(t,"orderBy",(function(){return R})),n.d(t,"orderByDescending",(function(){return M})),n.d(t,"toNumber",(function(){return F})),n.d(t,"remove",(function(){return U})),n.d(t,"format",(function(){return B})),n.d(t,"escapeHtml",(function(){return q})),n.d(t,"join",(function(){return K})),n.d(t,"Local",(function(){return z})),n.d(t,"Message",(function(){return W})),n.d(t,"isMessage",(function(){return Y})),n.d(t,"MessageBus",(function(){return G})),n.d(t,"isProxy",(function(){return te})),n.d(t,"getTarget",(function(){return ne})),n.d(t,"handler",(function(){return ee})),n.d(t,"Observer",(function(){return Jt})),n.d(t,"parseOptions",(function(){return re})),n.d(t,"AST",(function(){return oe})),n.d(t,"NullExpressionNode",(function(){return ie})),n.d(t,"AstNode",(function(){return ae})),n.d(t,"AssignmentExpressionNode",(function(){return he})),n.d(t,"BinaryExpressionNode",(function(){return ve})),n.d(t,"CallExpressionNode",(function(){return xe})),n.d(t,"ConditionalExpressionNode",(function(){return _e})),n.d(t,"ExpressionStatementNode",(function(){return Te})),n.d(t,"IdentifierNode",(function(){return Ie})),n.d(t,"LiteralNode",(function(){return Be})),n.d(t,"LogicalExpressionNode",(function(){return We})),n.d(t,"MemberExpressionNode",(function(){return Qe})),n.d(t,"ObjectExpressionNode",(function(){return rt})),n.d(t,"ProgramNode",(function(){return st})),n.d(t,"PropertyNode",(function(){return pt})),n.d(t,"UnaryExpressionNode",(function(){return mt})),n.d(t,"ArrayExpressionNode",(function(){return Ot})),n.d(t,"ExpLexer",(function(){return jt})),n.d(t,"ExpParser",(function(){return Ct})),n.d(t,"lexExp",(function(){return $t})),n.d(t,"parseExp",(function(){return Pt})),n.d(t,"ExpBuilder",(function(){return Tt})),n.d(t,"Evaluator",(function(){return At})),n.d(t,"Analyser",(function(){return Mt})),n.d(t,"nodeType",(function(){return Xt})),n.d(t,"VNode",(function(){return en})),n.d(t,"VAttr",(function(){return an})),n.d(t,"VCmnt",(function(){return pn})),n.d(t,"VElm",(function(){return Mn})),n.d(t,"VText",(function(){return zn})),n.d(t,"VType",(function(){return Gn})),n.d(t,"lexTpl",(function(){return jn})),n.d(t,"parseTpl",(function(){return _n})),n.d(t,"isVElm",(function(){return Cn})),n.d(t,"isVAttr",(function(){return $n})),n.d(t,"isVText",(function(){return Pn})),n.d(t,"isVComment",(function(){return Nn})),n.d(t,"TplBuilder",(function(){return Dn})),n.d(t,"Binding",(function(){return nr})),n.d(t,"Expression",(function(){return Qn})),n.d(t,"Renderer",(function(){return cr})),n.d(t,"Component",(function(){return gr})),n.d(t,"Directive",(function(){return Or})),n.d(t,"Filter",(function(){return Sr})),n.d(t,"Service",(function(){return _r})),n.d(t,"isComponent",(function(){return Ir})),n.d(t,"isDirective",(function(){return Rr})),n.d(t,"isFilter",(function(){return Mr})),n.d(t,"isService",(function(){return Fr})),n.d(t,"namespace",(function(){return Vr})),n.d(t,"render",(function(){return Ur})),n.d(t,"injector",(function(){return dr})),n.d(t,"component",(function(){return Br})),n.d(t,"directive",(function(){return qr})),n.d(t,"filter",(function(){return Kr})),n.d(t,"service",(function(){return zr})),n.d(t,"ClassDirective",(function(){return ai})),n.d(t,"StyleDirective",(function(){return ji}))}])}));